{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./app/algorithms/mcts.js","webpack:///./app/algorithms/minimax.js","webpack:///./app/algorithms/neat.js","webpack:///./app/algorithms/neat/connection.js","webpack:///./app/algorithms/neat/functions.js","webpack:///./app/algorithms/neat/individual.js","webpack:///./app/algorithms/neat/node.js","webpack:///./app/app.html","webpack:///./app/commons/Form.js","webpack:///./app/commons/NavigationService.js","webpack:///./app/commons/ServiceWorker.js","webpack:///./app/commons/effects.js","webpack:///./app/commons/elements.html","webpack:///./app/commons/fields.html","webpack:///./app/commons/index.js","webpack:///./app/commons/inputs.html","webpack:///./app/commons/layouts.html","webpack:///./app/commons/services.js","webpack:///./app/commons/table.html","webpack:///./app/commons/viewport.html","webpack:///./app/games/labyrinth.js","webpack:///./app/games/stats.js","webpack:///./app/games/ttt.js","webpack:///./app/games/uttt.js","webpack:///./app/index.js","webpack:///./app/pages/index.js","webpack:///./app/pages/labyrinth.html","webpack:///./app/pages/tictactoe.html","webpack:///./app/pages/ulttictactoe.html","webpack:///./app/players/labyrinthmonitor.js","webpack:///./app/players/players.js","webpack:///./app/res.js","webpack:///./app/stores/labyrinth_store.js","webpack:///./app/stores/ttt_store.js","webpack:///./app/stores/uttt_store.js","webpack:///webpack:///webpack/universalModuleDefinition","webpack:///webpack:///webpack/bootstrap","webpack:///webpack:///index.js","webpack:///webpack:///lib/compile.expr.js","webpack:///webpack:///lib/compile.js","webpack:///webpack:///lib/component.js","webpack:///webpack:///lib/component.utils.js","webpack:///webpack:///lib/dom.attrs.js","webpack:///webpack:///lib/element.js","webpack:///webpack:///lib/index.js","webpack:///webpack:///lib/node.js","webpack:///webpack:///lib/register.js","webpack:///webpack:///lib/utils.js","webpack:///webpack:///lib/xml.js","webpack:///webpack:///lib/xml.utils.js","webpack:///webpack:///pipes/arr.js","webpack:///webpack:///pipes/date.js","webpack:///webpack:///pipes/index.js","webpack:///webpack:///pipes/obj.js","webpack:///webpack:///pipes/str.js","webpack:///webpack:///pipes/url.js","webpack:///webpack:///types/Form.js","webpack:///webpack:///types/NavigationService.js","webpack:///webpack:///types/Service.js","webpack:///webpack:///types/ServiceWorker.js","webpack:///webpack:///types/elements.html","webpack:///webpack:///types/fields.html","webpack:///webpack:///types/index.js","webpack:///webpack:///types/inputs.html","webpack:///webpack:///types/layouts.html","webpack:///webpack:///types/services.js","webpack:///webpack:///types/table.html","webpack:///webpack:///types/viewport.html","webpack:///webpack:///src/arr.js","webpack:///webpack:///src/date.js","webpack:///webpack:///src/fn.js","webpack:///webpack:///src/index.js","webpack:///webpack:///src/obj.js","webpack:///webpack:///src/str.js","webpack:///(webpack)/buildin/module.js"],"names":["MonteCarloTreeSearch","scoreForWin","game","player","opponent","tree","Tree","rootNode","root","state","index","promisingNode","selectPromisingNode","finished","expandNode","nodeToExplore","childs","length","randomChild","playoutResult","simulateRandomPlayout","backPropogation","winnerNode","reduce","acc","cur","visits","movesScores","map","child","move","node","UCT","findBestChild","possibleStates","getPossibleStates","forEach","newNode","Node","push","tempNode","parent","tempState","winner","score","Number","MIN_SAFE_INTEGER","togglePlayer","randomMove","addScore","uctValue","totalVisit","nodeWinScore","nodeVisit","MAX_SAFE_INTEGER","Math","sqrt","log","parentVisits","values","id","iMax","i","arr","State","floor","random","arguments","copy","availableMoves","getAvailableMoves","newState","makeMove","randId","MiniMax","assess","depth","maximizing","alpha","beta","first","moveAssessment","bestValue","bestMove","value","pruningSearch","max","min","NEAT","params","probParams","crossOver","addNode","addConn","mutateNode","toggleConn","updBias","updActFcn","updConn","population","Population","size","inNum","outNum","individuals","best","Individual","individual","toEvolveNum","findBest","rand","getIndividual","selectWorst","toReplaceId","toReplaceValue","selectBest","addRandNode","addRandConnection","mutateRandNode","candidatesId","weights","MAX_NUM","randomWeighted","Connection","inNodeid","outNode","cantorPairing","weight","active","ActivationFunctions","funcs","x","sin","tan","ans","activationFunctions","randomSample","array","quant","sample","selectId","splice","sum","norm","val","slice","y","totalNum","nodes","maxLayer","lastLayer","getLayer","addNodesNum","ceil","el","addConnection","layer","layers","some","args","activateFirst","getMaxLayer","activate","answ","sort","node1","node2","activateLast","inCandidates","getLayers","Array","keys","inNode","outLayers","v","outCandidates","candidates","conn","conns","toNextLayer","nodeId","mutate","donor","nodeSeparator","connSeparatorId","concat","donorNode","getNode","_crossOverNodes","thisNode","childConnId","findIndex","c","bias","activation","randomFunc","output","resetSum","inValue","connectionExist","toggleRandConnection","updateBias","updateActivationFunction","updateRandomConnection","randConnId","toggle","connId","allNodes","FIELD_TYPES","bool","FormField","form","field","data","change","type","String","capitalize","error","fields","disabled","undefined","caption","name","Form","Object","NavigationService","prevHash","hashchange","hash","window","location","emit","addEventListener","setTimeout","removeEventListener","d","urlParse","target","path","reset","urlStringify","update","Service","ServiceWorker","Function","assert","api","source","scope","register","then","registration","registered","ready","ev","onMessage","subscribe","fallback","fn","pushManager","withPushManager","getSubscription","ss","unsubscribe","saveSubscription","e","console","urlBase64ToUint8Array","base64String","padding","repeat","base64","replace","rawData","atob","Uint8Array","from","char","charCodeAt","Notification","permission","applicationServerKey","vapidPublicKey","userVisibleOnly","subscription","toJSON","err","handleError","payload","navigator","serviceWorker","Delay","isDone","action","period","Invoke","Loader","reload","trigger","into","callback","result","effectsTypes","formTypes","services","elements","table","viewport","layouts","inputs","$","ref","app","impl","up","defer","message","code","handler","lookupService","p","def","ErrorHandlingService","show","mode","ToastService","top","close","closeAfter","TestService","clicked","Goal","Player","goal","xVel","yVel","quality","distance","getDistance","vx","vy","_norm","direction","deltaVel","changeVelocity","resetGoal","goalsParams","dx","dy","Labyrinth","playerX","playerY","assign","width","height","players","bestPlayer","savegoal","a","b","crossWin","circleWin","draw","total","times","TTTStats","row","cols","col","boardReset","Board","JSON","parse","stringify","checkFinished","board","step","minwinstep","ind","TTT","moves","subgame","available","subrow","subcol","makeSubMove","r","UTTT","subboard","avail","_copy","cell","types","commons","templates","pages","TTTStore","UTTTStore","LabyrinthStore","LabyrinthMonitor","PlayerControllerPlayer","PlayerControllerMCTS","PlayerControllerRandom","PlayerControllerMiniMax","launch","template","resources","pipes","fio","fullName","now","Date","kv","age","wrapWithKey","k","inc","dec","toArray","element","gameState","states","f","gameWinner","gameTurn","subGame","ticTacToe","ultTicTacToe","labyrinth","maxcycle","cycle","lifetime","assessAll","moveAll","montecarlo","prototype","getMovesScores","getBestMove","minimax","sameValueMoves","title","sitemap","icon2","icon","gameStates","playersTTT","playersUTTT","toEvolve","neat","newgoalcycles","maxlifetime","cyclesltconst","addlt","getDiractionX","getDiractionY","evaluate","setScore","scoreAll","evolvePopulation","evolve","parseInt","_","game2","cross","circle","currentPlayer","mctsrequest","toggledAI","findNextmove","RE_SINGLE_PLACEHOLDER","RE_PLACEHOLDER","key","parseValue","pipe","fnx","pattern","placeholder","s","intrpltn","stringInterpolation","pipec","withPipes","resourceExpression","vv","compiledNodeMap","itemName","prep","expr","compileNode","tag","filterMapKey","attrs","iff","ifNode","condition","hasSlot","compileExpression","$then","ifElse","ifThen","getNodes","uid0","compileRegularNode","uid","wrapNode","nodeMap","compileFor","compileIf","compileTag","T","text","parseXML","Component","container","hidden","Î”","force","upAsync","changes","setter","methodName","propId","propGetter","uuid","nextId","listeners","cancel","applicator","refId","applyValue","method","initials","all","initializers","Promise","COUNTERS","counter","res","stringifyComponent","recontent","content","children","snode","filterSlotNodes","setNodeMap","getByTag","Registered","Ctor","Ctors","Element","ContainerComponent","ForComponent","items","itemNode","pk","datum","ItemComponent","COUNTER","fnId","pre","racer","akey","promise","instant","bound","gettr","fn0","deep","camelize","sep","jn","ATTR_SETTERS","selected","checked","init","click","setAttribute","blur","dblclick","scroll","touchstart","h","screenY","touch","hs","keypress","enter","fnValue","ekey","elt","document","cleanupAttributes","applyAttributes","rootElement","body","props","$AppContext","commonPipes","arrangeElements","registerTypes","commonTypes","UID","OBJ","decodeXmlEntities","propKey","getter","initialState","isInitial","$propertyResolvers","$initializers","stringifyNode","fnName","ctor","Fragment","REGISTRY","reg","ctr","NAME","TEMPLATE","compileTemplate","ID","next","ErrorType","Error","num","isNaN","n","before","cursor","appendElt","src","stringifyAttrs","tab","sattrs","ssubs","stext","RE_EMPTY","RE_XML_COMMENT","RE_XML_TAG","SINGLE_TAGS","ctx","lastIndex","sAttrs","parseAttrs","RE_ESCAPE_XML_ENTITY","ESCAPE_XML_ENTITY","FN_ESCAPE_XML_ENTITY","m","RE_XML_ENTITY","RE_ATTRS","SUBST_XML_ENTITY","amp","gt","lt","quot","nbsp","FN_XML_ENTITY","escapeXml","skipQoutes","groupBy","fieldFn","iter","slot","count","subs","list","sortBy","property","order","aa","bb","idKey","valKey","isKeyFn","R","ru","monthNames","monthNamesShort","dayNames","dayNamesShort","en","DATE_FORMATTERS","hh","date","ii","hi","dd","w","ww","mmmm","mmm","mm","yyyy","ll","z","orNow","l18n","daysInMonth","month","firstOfWeek","monthName","fractions","parseISO8601","timebits","tz","utcdate","parseFloat","narrow","formatTimezone","toNumber","format","dateKey","ms","track","dot","wrap","includes","dig","steps","not","isUndefined","isTrue","isFalse","or","and","equals","greater","less","plus","minus","multiply","compose","ff","swap","curry","_curry","fx","lengthLimit","guid","s4","o","str","obj","isEmpty","decode","decodeURIComponent","decodePrimitive","encode","encodeURIComponent","tail","pos","lastTail","head","pad","fill","mirror","snakeCase","proper","upper","param","Obj","url","tzOffset","throw","debugger","x0","VALUE_MAP","true","false","module","exports","webpackPolyfill","deprecate","paths","defineProperty","enumerable","get","l"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\nexport class MonteCarloTreeSearch {\n  init () {\n    return {\n      scoreForWin: 10\n    }\n  }\n\n  // TODO: remove\n  findNextmove (game, player) {\n    const opponent = 3 - player\n    const tree = new Tree()\n    const rootNode = tree.root\n    rootNode.state.game = game\n    rootNode.state.player = opponent\n\n    // const startTime = Date.now()\n    // while ((Date.now() - startTime) < 1000) {\n    for (let index = 0; index < 100; index++) {\n      const promisingNode = this.selectPromisingNode(rootNode)\n      if (promisingNode.state.game.finished === false) {\n        this.expandNode(promisingNode)\n      }\n      let nodeToExplore = promisingNode\n      if (promisingNode.childs.length > 0) {\n        nodeToExplore = promisingNode.randomChild()\n      }\n      const playoutResult = this.simulateRandomPlayout(nodeToExplore, opponent)\n      this.backPropogation(nodeToExplore, playoutResult)\n    }\n\n    const winnerNode = rootNode.childs.reduce((acc, cur) => cur.state.visits > acc.state.visits ? cur : acc)\n    // console.log(rootNode)\n    // tree.root = winnerNode\n    // console.log(winnerNode)\n    return winnerNode.state.game\n  }\n\n  getMovesScores (game, player) {\n    const opponent = 3 - player\n    const tree = new Tree()\n    const rootNode = tree.root\n    rootNode.state.game = game\n    rootNode.state.player = opponent\n\n    // const startTime = Date.now()\n    // while ((Date.now() - startTime) < 1000) {\n    for (let index = 0; index < 100; index++) {\n      const promisingNode = this.selectPromisingNode(rootNode)\n      if (promisingNode.state.game.finished === false) {\n        this.expandNode(promisingNode)\n      }\n      let nodeToExplore = promisingNode\n      if (promisingNode.childs.length > 0) {\n        nodeToExplore = promisingNode.randomChild()\n      }\n      const playoutResult = this.simulateRandomPlayout(nodeToExplore, opponent)\n      this.backPropogation(nodeToExplore, playoutResult)\n    }\n    const movesScores = rootNode.childs.map((child) => { return { visits: child.state.visits, move: child.state.move } })\n    // console.log(rootNode)\n    // tree.root = winnerNode\n    // console.log(movesScores)\n\n    return movesScores\n  }\n\n  selectPromisingNode (rootNode) {\n    let node = rootNode\n    while (node.childs.length !== 0) {\n      node = UCT.findBestChild(node)\n    }\n    return node\n  }\n\n  expandNode (node) {\n    const possibleStates = node.state.getPossibleStates()\n    possibleStates.forEach((state) => {\n      const newNode = new Node(state, node)\n      newNode.state.player = 3 - node.state.player\n      node.childs.push(newNode)\n    })\n  }\n\n  simulateRandomPlayout (nodeToExplore, opponent) {\n    const tempNode = new Node(nodeToExplore.state, nodeToExplore.parent)\n    const tempState = tempNode.state\n    let winner = tempState.game.finished\n    // if (winner) {\n    //   console.log(winner, opponent)\n    //   console.log(tempState)\n    //   console.log(tempNode)\n    // }\n    if (winner === opponent) {\n      // console.log(123, JSON.parse(JSON.stringify(nodeToExplore.state)))\n      // console.log(123, JSON.parse(JSON.stringify(nodeToExplore.parent.state)))\n      // console.log(JSON.parse(JSON.stringify(tempNode.state)))\n\n      tempNode.parent.state.score = Number.MIN_SAFE_INTEGER\n      return winner\n    }\n    tempNode.parent = null\n    while (winner === false) {\n      tempState.togglePlayer()\n      tempState.randomMove()\n      winner = tempState.game.finished\n    }\n    return winner\n  }\n\n  backPropogation (nodeToExplore, winner) {\n    let tempNode = nodeToExplore\n    while (tempNode !== null) {\n      tempNode.state.visits++\n      if (tempNode.state.player === winner) {\n        tempNode.state.addScore(1)\n      }\n      tempNode = tempNode.parent\n    }\n  }\n}\n\nconst UCT = {\n  uctValue (totalVisit, nodeWinScore, nodeVisit) {\n    if (nodeVisit === 0) {\n      return Number.MAX_SAFE_INTEGER\n    }\n    return (nodeWinScore / nodeVisit) + 1.41 * Math.sqrt(Math.log(totalVisit) / nodeVisit)\n  },\n\n  findBestChild (node) {\n    const parentVisits = node.state.visits\n    const values = node.childs.map((child) => UCT.uctValue(parentVisits, child.state.score, child.state.visits))\n    const id = values.reduce((iMax, cur, i, arr) => cur > arr[iMax] ? i : iMax, 0)\n    return node.childs[id]\n  }\n}\n\nclass Tree {\n  constructor (root) {\n    this.root = new Node()\n  }\n}\n\nclass Node {\n  constructor (state = null, parent = null, childs = []) {\n    this.parent = parent\n    this.childs = childs\n    if (state !== null) {\n      this.state = new State(state)\n    } else {\n      this.state = new State()\n    }\n  }\n\n  randomChild () {\n    return this.childs[Math.floor(Math.random() * this.childs.length)]\n  }\n}\n\nclass State {\n  constructor (state) {\n    if (arguments.length === 1) {\n      this.visits = state.visits\n      this.score = state.score\n      this.game = state.game.copy({ ...state.game })\n      this.player = state.player\n      this.move = state.move\n    } else {\n      this.visits = 0\n      this.score = 10\n      this.game = null\n      this.player = null\n      this.move = null\n    }\n  }\n\n  togglePlayer () {\n    this.player = 3 - this.player\n  }\n\n  addScore (score) {\n    if (this.score !== Number.MIN_SAFE_INTEGER) {\n      this.score += score\n    }\n  }\n\n  getPossibleStates () {\n    const availableMoves = this.game.getAvailableMoves()\n    return availableMoves.map((move) => {\n      const newState = new State()\n      newState.move = move\n      newState.game = this.game.makeMove(move)\n      // newState.game = this.game.copy()\n      newState.player = 3 - this.player\n      // newState.game.performMove(move, newState.player)\n      return newState\n    })\n  }\n\n  randomMove () {\n    const availableMoves = this.game.getAvailableMoves()\n    const randId = Math.floor(Math.random() * availableMoves.length)\n    this.game = this.game.makeMove(availableMoves[randId])\n    // this.game.performMove(availableMoves[randId], this.player)\n  }\n}\n","\nexport class MiniMax {\n  constructor (assess) {\n    this.assess = assess\n  }\n\n  getMovesScores (game) {\n    return {}\n  }\n\n  pruningSearch (game, depth, maximizing, alpha = -10000, beta = 10000, first = false) {\n    const availableMoves = game.getAvailableMoves()\n    if (game.finished || !depth || !availableMoves) {\n      return this.assess(game)\n    }\n\n    const moveAssessment = []\n    let bestValue = 0\n    let bestMove = {}\n    if (!game.finished) {\n      bestValue = maximizing ? -10000 : 10000\n      for (let index = 0; index < availableMoves.length; index++) {\n        const move = availableMoves[index]\n        const value = this.pruningSearch(game.makeMove(move), depth - 1, !maximizing, alpha, beta)\n        if (first) {\n          moveAssessment.push({ move: availableMoves[index], value })\n        }\n        if (maximizing) {\n          if (value > bestValue) {\n            bestValue = value\n            bestMove = move\n            alpha = Math.max(alpha, bestValue)\n          }\n        } else {\n          if (value < bestValue) {\n            bestValue = value\n            bestMove = move\n            beta = Math.min(beta, bestValue)\n          }\n        }\n      }\n    }\n\n    if (first) {\n      return { bestMove, moveAssessment, bestValue }\n    }\n    return bestValue\n  }\n}\n","\nimport { Individual } from './neat/individual'\nimport {\n  MAX_NUM, randomWeighted\n} from './neat/functions'\n\nexport class NEAT {\n  constructor (params) {\n    if (!params.probParams) {\n      params.probParams = {\n        crossOver: 0.2,\n        addNode: 0.2,\n        addConn: 0.7,\n        mutateNode: { toggleConn: 0.3, updBias: 0.5, updActFcn: 0.3, updConn: 0.5 }\n      }\n    }\n    this.population = new Population(params)\n  }\n}\n\nclass Population {\n  constructor ({ size, inNum, outNum, probParams }) {\n    this.size = size\n    this.individuals = []\n    this.best = new Individual(inNum, outNum, 0)// { id: false, score: MAX_NUM }\n    this.probParams = probParams\n\n    for (let i = 0; i < size; i++) {\n      const individual = new Individual(inNum, outNum, i)\n      this.individuals.push(individual)\n    }\n  }\n\n  getIndividual (id) {\n    for (let i = 0; i < this.size; i++) {\n      const individual = this.individuals[i]\n      if (individual.id === id) {\n        return { id: i, value: individual }\n        // id -- id in individuals array\n      }\n    }\n  }\n\n  findBest () {\n    this.individuals.forEach((individual) => {\n      if (individual.score < this.best.score) {\n        this.best = individual.copy(individual.score)\n      }\n    })\n  }\n\n  evolvePopulation (toEvolveNum = 4) {\n    this.findBest()\n    for (let i = 0; i < toEvolveNum; i++) {\n      const rand = Math.random()\n      const { id: toReplaceId, value: toReplaceValue } = this.getIndividual(this.selectWorst())\n      const copy = this.getIndividual(this.selectBest()).value.copy()\n      if (rand < this.probParams.crossOver) {\n        copy.crossOver(toReplaceValue)\n      } else {\n        if (Math.random() < this.probParams.addNode) {\n          copy.addRandNode()\n        }\n        if (Math.random() < this.probParams.addConn) {\n          copy.addRandConnection()\n        }\n        copy.mutateRandNode(this.probParams.mutateNode)\n      }\n      copy.id = toReplaceId\n      this.individuals[toReplaceId] = copy\n    }\n  }\n\n  selectBest () {\n    const candidatesId = []\n    const weights = []\n    this.individuals.forEach((individual) => {\n      if (individual.score !== MAX_NUM) {\n        candidatesId.push(individual.id)\n        weights.push(1 / (1 + individual.score))\n      }\n    }\n    )\n    return randomWeighted(candidatesId, weights)\n  }\n\n  selectWorst () {\n    const candidatesId = []\n    const weights = []\n    this.individuals.forEach((individual) => {\n      if (individual.score !== MAX_NUM) {\n        candidatesId.push(individual.id)\n        weights.push(individual.score)\n      }\n    }\n    )\n    return randomWeighted(candidatesId, weights)\n  }\n}\n","import { cantorPairing } from './functions.js'\n\nexport class Connection {\n  constructor (inNodeid, outNode) {\n    this.id = cantorPairing(inNodeid, outNode.id)\n    this.outNode = outNode\n    this.weight = 2 * Math.random() - 1\n    this.active = true\n  }\n\n  toggle () {\n    this.active = !this.active\n  }\n\n  activate () {\n    this.active = true\n  }\n\n  copy (inNodeid, outNode) {\n    const copy = new Connection(inNodeid, outNode)\n    copy.weight = this.weight\n    copy.active = this.active\n    return copy\n  }\n\n  // crossCopy (inNode, outNode) {\n  //   if (outNode.layer !== false && outNode.layer <= inNode.layer) {\n  //     return false\n  //   }\n  //   return this.copy(inNode.id, outNode)\n  // }\n}\n","class ActivationFunctions {\n  constructor () {\n    this.funcs = [\n      (x) => (x),\n      Math.sin,\n      Math.tan,\n      (x) => x > 0 ? x : 0\n    ]\n  }\n\n  randomFunc () {\n    const ans = this.funcs[Math.floor(this.funcs.length * Math.random())]\n    return ans\n  }\n}\n\nexport const activationFunctions = new ActivationFunctions()\nexport const MAX_NUM = 100000000\n\nexport function randomSample (array, quant) {\n  const copy = [...array]\n  const sample = []\n  for (let i = 0; i < quant; i++) {\n    const selectId = Math.floor(Math.random() * copy.length)\n    sample.push(copy[selectId])\n    copy.splice(selectId, 1)\n  }\n  return sample\n}\n\nexport function randomWeighted (array, weights) {\n  let sum = 0\n  const rand = Math.random()\n  const norm = weights.reduce((acc, val) => acc + val, 0)\n  for (let i = 0; i < array.length; i++) {\n    sum += weights[i] / norm\n    if (rand < sum) {\n      return array[i]\n    }\n  }\n  return array.slice(-1)[0]\n}\n\nexport function cantorPairing (x, y) {\n  return (x + y) * (x + y + 1) / 2 + y\n}\n","import { MAX_NUM, randomSample } from './functions'\nimport { Node } from './node'\n\nexport class Individual {\n  constructor (inNum, outNum, id) {\n    this.id = id\n    this.inNum = inNum\n    this.outNum = outNum\n    this.totalNum = inNum + outNum\n    this.nodes = []\n    this.score = MAX_NUM\n    this.maxLayer = 0\n\n    for (let i = this.inNum; i < this.totalNum; i++) {\n      const node = new Node(i)\n      this.nodes.push(node)\n    }\n    const lastLayer = this.getLayer(false)\n    for (let i = 0; i < this.inNum; i++) {\n      const node = new Node(i, 0)\n      const addNodesNum = Math.ceil(Math.random() * this.outNum)\n      randomSample(lastLayer, addNodesNum).forEach((el) => node.addConnection(el))\n      this.nodes.push(node)\n    }\n  }\n\n  getNode (id) {\n    for (let i = 0; i < this.totalNum; i++) {\n      const node = this.nodes[i]\n      if (node.id === id) {\n        return node\n      }\n    }\n  }\n\n  getLayer (layer) {\n    const nodes = []\n    this.nodes.forEach((node) => {\n      if (node.layer === layer) {\n        nodes.push(node)\n      }\n    })\n    return nodes\n  }\n\n  getLayers (layers) {\n    const nodes = []\n    this.nodes.forEach((node) => {\n      if (layers.some((layer) => layer === node.layer)) {\n        nodes.push(node)\n      }\n    })\n    return nodes\n  }\n\n  getMaxLayer () {\n    let maxLayer = 0\n    for (let i = this.inNum + this.outNum; i < this.totalNum; i++) {\n      const node = this.nodes[i]\n      if (node.layer && (node.layer > maxLayer)) {\n        maxLayer = node.layer\n      }\n    }\n    this.maxLayer = maxLayer\n    return maxLayer\n  }\n\n  setScore (score) {\n    this.score = score\n  }\n\n  evaluate (args) {\n    // first layer init\n    this.getLayer(0).forEach((node, i) => node.activateFirst(args[i]))\n    this.getMaxLayer()\n    for (let layer = 1; layer < this.maxLayer + 1; layer++) {\n      this.getLayer(layer).forEach((node, i) => node.activate())\n    }\n    const answ = this.getLayer(false).sort((node1, node2) => node1.id - node2.id).map((node) => node.activateLast())\n    return answ\n  }\n\n  addRandConnection () {\n    const inCandidates = this.getLayers([...Array(this.maxLayer + 1).keys()])\n    const inNode = inCandidates[Math.floor(Math.random() * inCandidates.length)]\n    const outLayers = [...Array(this.maxLayer - inNode.layer).keys()].map((v) => v + inNode.layer + 1)\n    const outCandidates = this.getLayers([...outLayers, false])\n    const outNode = outCandidates[Math.floor(Math.random() * outCandidates.length)]\n    inNode.addConnection(outNode)\n  }\n\n  addRandNode () {\n    const candidates = this.nodes.slice(this.outNum, this.nodes.length)\n    const node = candidates[Math.floor(Math.random() * candidates.length)]\n    const conn = node.conns[Math.floor(Math.random() * node.conns.length)]\n    const outNode = conn.outNode\n    const newNode = new Node(this.totalNum, outNode.layer ? outNode.layer : node.layer + 1)\n    this.totalNum += 1\n    outNode.toNextLayer()\n    newNode.addConnection(outNode)\n    conn.outNode = newNode\n    conn.active = true\n    this.nodes.push(newNode)\n  }\n\n  mutateRandNode (params) {\n    const nodeId = Math.floor(Math.random() * this.nodes.length)\n    this.nodes[nodeId].mutate(params)\n  }\n\n  crossOver (donor) {\n    const nodeSeparator = this.nodes[this.outNum + Math.floor(Math.random() * (this.nodes.length - this.outNum))]\n    const connSeparatorId = nodeSeparator.conns[Math.floor(Math.random() * nodeSeparator.conns.length)].id\n    const child = this.copy()\n    if (donor.totalNum > this.totalNum) {\n      child.nodes = child.nodes.concat(donor.nodes.slice(this.totalNum).map(node => node.copy()))\n      // adding connections\n      // this.nodes.slice(this.totalNum).forEach((node, i) => {\n      //   child.nodes[i].conns = node.conns.map((conn) => conn.copy(node.id, child.getNode(conn.outNode.id)))\n      // })\n      child.totalNum = donor.totalNum\n    }\n    let i = 0\n    while (i < child.getMaxLayer()) {\n      const nodes = child.getLayer(i)\n      nodes.forEach((node) => {\n        const donorNode = donor.getNode(node.id)\n        if (donorNode) {\n          child._crossOverNodes(node, donorNode, connSeparatorId)\n        }\n      })\n      i++\n    }\n    return child\n  }\n\n  _crossOverNodes (thisNode, donorNode, connSeparatorId) {\n    donorNode.conns.forEach(conn => {\n      if (conn.id > connSeparatorId) {\n        const childConnId = thisNode.conns.findIndex((c) => c.id === conn.id)\n        if (childConnId) {\n          thisNode.conns[childConnId] = conn.copy(thisNode.id, this.getNode(conn.outNode.id))\n        } else {\n          const outNode = this.getNode(conn.outNode.id)\n          // if (outNode.layer === false || outNode.layer > thisNode.layer) {\n          //   thisNode.conns.push(conn.copy(thisNode.id, outNode))\n          // }\n          thisNode.addConnection(outNode)\n        }\n      }\n    })\n  }\n\n  disableNode (id) {\n    this.nodes.forEach((node, i) => {\n      node.conns.forEach((conn) => {\n        if (conn.outNode.id === id) {\n          conn.active = false\n        }\n      })\n    })\n    this.getNode(id).conns.forEach((conn) => { conn.active = false })\n  }\n\n  copy (score = MAX_NUM) {\n    const copy = new Individual(this.inNum, this.outNum, this.id)\n    copy.id = this.id\n    copy.totalNum = this.totalNum\n    copy.nodes = this.nodes.map((node) => node.copy())\n    copy.score = score\n    this.nodes.forEach((node, i) => {\n      // const nodeid = node.id\n      copy.nodes[i].conns = node.conns.map((conn) => conn.copy(node.id, copy.getNode(conn.outNode.id)))\n    })\n    return copy\n  }\n}\n","import { activationFunctions, cantorPairing } from './functions'\nimport { Connection } from './connection.js'\n\nexport class Node {\n  constructor (id, layer = false) {\n    this.id = id\n    this.conns = []\n    this.sum = 0\n    this.bias = 2 * Math.random() - 1\n    this.activation = activationFunctions.randomFunc()\n    this.output = 0\n    this.layer = layer\n  }\n\n  activate () {\n    this.output = this.activation(this.sum) + this.bias\n    this.resetSum()\n    this.conns.forEach((conn) => {\n      if (conn.active) {\n        conn.outNode.sum += this.output * conn.weight\n      }\n    })\n  }\n\n  activateFirst (inValue) {\n    this.sum = inValue\n    this.activate()\n  }\n\n  activateLast () {\n    this.output = this.activation(this.sum) + this.bias\n    this.resetSum()\n    return this.output\n  }\n\n  resetSum () {\n    this.sum = 0\n  }\n\n  addConnection (node) {\n    if (!node.layer || (node.layer > this.layer)) {\n      if (!this.connectionExist(node.id)) {\n        const conn = new Connection(this.id, node)\n        this.conns.push(conn)\n      } else {\n        this.weight += 2 * Math.random() - 1\n      }\n    }\n  }\n\n  mutate ({ toggleConn, updBias, updActFcn, updConn }) {\n    if (toggleConn < Math.random()) {\n      this.toggleRandConnection()\n    }\n    if (updBias < Math.random()) {\n      this.updateBias()\n    }\n    if (updActFcn < Math.random()) {\n      this.updateActivationFunction()\n    }\n    if (updConn < Math.random()) {\n      this.updateRandomConnection()\n    }\n  }\n\n  toggleRandConnection () {\n    if (this.conns.length) {\n      const randConnId = Math.floor(Math.random() * this.conns.length)\n      this.conns[randConnId].toggle()\n    }\n  }\n\n  updateBias () {\n    this.bias += 2 * Math.random() - 1\n  }\n\n  updateActivationFunction () {\n    this.activation = activationFunctions.randomFunc()\n  }\n\n  updateRandomConnection () {\n    if (this.conns.length) {\n      const connId = Math.floor(Math.random() * this.conns.length)\n      this.conns[connId].weight += 2 * Math.random() - 1\n    }\n  }\n\n  connectionExist (nodeId) {\n    const connId = cantorPairing(this.id, nodeId)\n    return this.conns.some((conn) => conn.id === connId)\n  }\n\n  toNextLayer () {\n    if (this.layer) {\n      this.layer += 1\n      this.conns.forEach((conn) => conn.outNode.toNextLayer())\n    }\n  }\n\n  copy (allNodes) {\n    const copy = new Node(this.id, this.layer)\n    copy.conns = [] // can't duplicate conns here, cause not all nodes created yet\n    copy.sum = 0\n    copy.bias = this.bias\n    copy.activation = this.activation\n    copy.output = 0\n    return copy\n  }\n}\n","export default \"<component id=\\\"App\\\">\\n  <NavigationService ui:ref=\\\"nav\\\" />\\n  <ViewPort caption=\\\":top.title\\\" sidebarWidth=\\\"300\\\">\\n    <ViewPort:aside>\\n      <NavTree data=\\\":top.sitemap\\\" />\\n    </ViewPort:aside>\\n    <PageRouter ui:props=\\\"<- nav.route\\\" />\\n  </ViewPort>\\n</component>\\n\\n<component id=\\\"Navbar\\\">\\n  <header class=\\\"navbar bg-primary\\\" style=\\\"min-height: 48px\\\">\\n    <section class=\\\"navbar-section mx-2\\\">\\n      <h4 class=\\\"m-1\\\" style=\\\"vertical-align: middle\\\" ui:if=\\\"{caption}\\\">\\n        {caption}\\n      </h4>\\n      <ui:slot />\\n    </section>\\n    <section class=\\\"navbar-center\\\" ui:if=\\\"{logo}\\\">\\n      <img src=\\\"{logo}\\\" alt=\\\"\\\" height=\\\"40\\\" width=\\\"140\\\" />\\n    </section>\\n    <section class=\\\"navbar-section mx-2\\\">\\n      <ui:slot id=\\\"right\\\" />\\n      <UserAvatar ui:props=\\\"{user}\\\" ui:if=\\\"{user}\\\" />\\n    </section>\\n  </header>\\n</component>\\n\\n<component id=\\\"SimpleList\\\">\\n  <ul class=\\\"nav\\\">\\n    <li class=\\\"nav-item {item.class}\\\" ui:for=\\\"item of data\\\">\\n      <span>{item.name}</span>\\n    </li>\\n  </ul>\\n</component>\\n\\n<component id=\\\"NavTree\\\">\\n  <ul class=\\\"nav\\\">\\n    <li class=\\\"nav-item {item.class}\\\" ui:for=\\\"item of data\\\">\\n      <NavLink href=\\\"{item.id}\\\">\\n        <span>{item.name}</span>\\n        <span ui:if=\\\"{item.label}\\\" class=\\\"label label-error\\\">{item.label}</span>\\n      </NavLink>\\n      <NavTree ui:if=\\\"{item.subs}\\\" data=\\\"{item.subs}\\\" />\\n    </li>\\n  </ul>\\n</component>\\n\\n<component id=\\\"MainPage\\\">\\n  <Navbar caption=\\\"This is a demonstration of achieved during CW of Danila Litskevich\\\" />\\n  <!-- <Panel caption=\\\"Icons\\\">\\n    <LoadingIndicator />\\n    Using Font\\n    <Icon type=\\\"cog\\\" />\\n  </Panel>\\n  <Panel caption=\\\"Buttons\\\">\\n    <Button caption=\\\"Default\\\" trackId=\\\"action1\\\" />\\n    <Button\\n            icon=\\\"cog\\\"\\n            caption=\\\"Large primary with icon\\\"\\n            primary\\n            large\\n            class=\\\"m-2\\\" />\\n    <Button icon=\\\"123\\\" caption=\\\"Link\\\" link />\\n  </Panel>\\n  <Panel caption=\\\"Panel\\\" hint=\\\"with hint\\\"> here... </Panel> -->\\n  <br/>\\n  <h5>You can click that button</h5>\\n  <button class=\\\"btn\\\" click=\\\"->\\\" data-clicked={clicked|inc}>Clicked {clicked|or:0}</button>\\n\\n</component>\\n\\n<component id=\\\"ArrowsPage\\\">\\n  <Navbar caption=\\\"Arrows\\\" />\\n  <Panel caption=\\\"Subscribe and Action\\\">\\n    <Tabs value=\\\"<- store.tab\\\" items=\\\":top.sitemap\\\" action=\\\"-> store.select\\\" />\\n    <Button\\n            caption=\\\"<- store.tab|or:none|str.capitalize\\\"\\n            data-id=\\\"other\\\"\\n            action=\\\"-> store.select\\\" />\\n  </Panel>\\n</component>\";","\nconst FIELD_TYPES = {\n  bool: 'SwitchField'\n}\n\nexport class FormField {\n  get TEMPLATE () {\n    return /* html */ `\n    <ui:fragment>\n      <ui:tag tag={fieldType} ui:props={fieldProps} onChange={onChange}/>\n    </ui:fragment>`\n  }\n\n  onChange ({ value }) {\n    const form = this.form\n    const field = this.field\n    const id = field.id\n    form.data = { ...form.data, [id]: value }\n    form.change && form.change(form.data)\n  }\n\n  get fieldType () {\n    const type = this.field.type || 'text'\n    return FIELD_TYPES[type] || (String.capitalize(type) + 'Field')\n  }\n\n  get fieldProps () {\n    const field = this.field\n    const form = this.form\n    const id = field.id\n    const data = form.data || {}\n    const value = data[id]\n    return {\n      ...field,\n      error: (form.error && form.error.fields && form.error.fields[id]) || null,\n      get disabled () { return field.disabled && field.disabled(this.value, this.data) },\n      value: value === undefined ? null : value,\n      caption: field.caption || field.name,\n      data\n    }\n  }\n}\n\nexport class Form {\n  get TEMPLATE () {\n    return /* html */ `\n    <div autocomplete=\"off\" class=\"form-horizontal\">\n        <FormField ui:for=\"field of fields\" field={field} form={form}/>\n    </div>`\n  }\n\n  getForm () {\n    return this\n  }\n\n  getFields () {\n    return this.fields || Object.keys(this.data).map(id => ({ id, caption: id }))\n  }\n}\n","import { Service } from './services'\n\nexport class NavigationService extends Service {\n  init () {\n    this.prevHash = ''\n    this.hashchange = () => {\n      const hash = window.location.hash.slice(1)\n      if (hash[0] === '/' && hash !== this.prevHash) {\n        this.emit('this.hash', { value: hash.slice(1) })\n        this.prevHash = hash\n      } else if (!this.prevHash) {\n        this.emit('this.hash', { value: 'main' })\n        this.prevHash = '/main'\n      }\n    }\n    window.addEventListener('hashchange', this.hashchange)\n    setTimeout(() => this.hashchange(), 0)\n  }\n\n  done () {\n    window.removeEventListener('hashchange', this.hashchange)\n  }\n\n  update (d) {\n    const { target, path = ['*'], params } = Object.urlParse(d)\n    const state = {\n      target: (!target || target === '*' ? this.target : target) || 'main',\n      path: path[0] === '*' ? this.path : path,\n      params: params.reset ? { ...params, reset: null } : { ...this.params, ...params }\n    }\n    window.location.hash = this.prevHash = '/' + Object.urlStringify(state)\n    return state\n  }\n\n  getRoute () {\n    return {\n      target: this.target,\n      path: this.path,\n      params: this.params\n    }\n  }\n\n  onHash ({ value }) { return this.update(value) }\n  onParams (params) { return this.update({ params: { ...params, data: null } }) }\n}\n","import { Service } from './services'\n\nexport class ServiceWorker extends Service {\n  get api () {\n    return navigator.serviceWorker\n  }\n\n  init () {\n    try {\n      Function.assert(this.api, 'Service Workers are not supported')\n\n      const { source = '/service-worker.js', scope = '/', push } = this\n\n      this.api.register(source, { scope })\n        .then((registration) => this.registered(registration))\n        .then(() => this.ready(() => this.log('Service Worker Ready')))\n\n      this.api.addEventListener('message', ev => this.onMessage(ev))\n\n      if (push) {\n        this.subscribe()\n      }\n    } catch (error) {\n      this.fallback(error)\n    }\n  }\n\n  // ensures that `fn` executed when api is ready\n  ready (fn) {\n    return this.api.ready.then(fn)\n  }\n\n  fallback (error) {\n    this.log(error)\n  }\n\n  // hook on registered\n  registered (registration) {\n    this.log('Service Worker Registered')\n    return registration\n  }\n  /**\n     * Push\n     */\n\n  withPushManager (fn) {\n    return this.ready(({ pushManager }) => pushManager).then(fn)\n  }\n\n  unsubscribe () {\n    this.withPushManager(pushManager => pushManager.getSubscription())\n      .then((ss) => ss && ss.unsubscribe())\n      .then(() => this.saveSubscription())\n      .catch(function (e) {\n        console.log('Error thrown while unsubscribing from  push messaging.', e)\n      })\n  }\n\n  subscribe () {\n    function urlBase64ToUint8Array (base64String) {\n      const padding = '='.repeat((4 - base64String.length % 4) % 4)\n      const base64 = (base64String + padding)\n        .replace(/-/g, '+')\n        .replace(/_/g, '/')\n\n      const rawData = window.atob(base64)\n      return Uint8Array.from([...rawData].map((char) => char.charCodeAt(0)))\n    }\n    if (Notification.permission === 'granted') {\n      /* do our magic */\n    } else if (Notification.permission === 'blocked') {\n      /* the user has previously denied push. Can't reprompt. */\n    } else {\n      /* show a prompt to the user */\n    }\n    const applicationServerKey = urlBase64ToUint8Array(this.vapidPublicKey)\n    this.withPushManager(pushManager => pushManager.getSubscription()\n    // .then((ss) => ss && ss.unsubscribe())\n      .then(ss => ss || pushManager.subscribe({\n        userVisibleOnly: true,\n        applicationServerKey\n      }))\n      .then((subscription) => this.saveSubscription(subscription.toJSON()))\n      .catch((err) => {\n        if (Notification.permission === 'denied') {\n          this.log('The user has blocked notifications.')\n        }\n        this.handleError(err)\n      })\n    )\n  }\n\n  // to be overriden from props\n  saveSubscription (ss) {\n    this.subscription = ss\n  }\n\n  /**\n     * Intercommunication between service worker.\n     */\n\n  // handles a message posted from Service worker.\n  onMessage (payload) {\n    this.log('onMessage', payload)\n  }\n}\n","export class Delay {\n  init () {\n    setTimeout(() => { if (!this.isDone) { this.action(this.data) } }, (this.period || 5) * 1000)\n  }\n}\n\nexport class Invoke {\n  init () {\n    this.action(this.data)\n  }\n}\n\nexport class Loader {\n  init () {\n    this.reload()\n  }\n\n  setTrigger (val) {\n    this.trigger = val\n    this.reload()\n  }\n\n  reload () {\n    const { from, data, into } = this\n    if (from && into) {\n      from({ ...data, callback: (error, result) => into({ error, ...result }) })\n    }\n  }\n}\n","export default \"<component id=\\\"Icon\\\">\\n    <i class=\\\"fa{bundle|or:s} fa-{type} {class}\\\" style={style} data={data} click={click}></i>\\n</component>\\n\\n<component id=\\\"Img\\\">\\n    <img src={src|or:@default} alt={alt} class=\\\"img {class}\\\" style={style} />\\n</component>\\n\\n<component id=\\\"Avatar\\\">\\n    <figure class=\\\"avatar {large|then:avatar-lg}\\\">\\n        <Img src={src}\\n             alt={alt}\\n             default=\\\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\\\" />\\n    </figure>\\n</component>\\n\\n<component id=\\\"Button\\\">\\n    <button class=\\\"btn btn-{mode} {primary|then:btn-primary} {disabled|or:@busy|then:disabled} {class} {large|then:btn-lg} {link|then:btn-link} c-hand\\\"\\n            style={style}\\n            data={data}\\n            click={action|track:@trackId:@caption}>\\n        <i ui:if={busy} class=\\\"loading mx-2\\\"></i>\\n        <Icon ui:if={icon} bundle={iconBundle} type={icon} class=\\\"mx-2\\\" />\\n        <span ui:if={caption} style=\\\"white-space:nowrap; overflow: hidden; text-overflow: ellipsis;\\\">{caption}</span>\\n    </button>\\n</component>\\n\\n<component id=\\\"FAB\\\">\\n    <button class=\\\"btn2 {tooltip|then:tooltip} tooltip-left fixed bg-primary circle c-hand {class}\\\"\\n            style=\\\"position: fixed;border:none; right:1.5rem; bottom:1.5rem; width: 2.5rem; height: 2.5rem; z-index:5;\\\"\\n            data={data} data-tooltip={tooltip|or:} click={action|track:@trackId:big}>\\n        <Icon type={icon|or:plus} />\\n    </button>\\n</component>\\n\\n<component id=\\\"Modal\\\">\\n    <div class=\\\"modal modal {open|then:active}\\\">\\n        <a class=\\\"modal-overlay\\\" aria-label=\\\"Close\\\" data={data} click={close}></a>\\n        <div class=\\\"modal-container\\\">\\n            <div class=\\\"modal-header\\\">\\n                <a class=\\\"btn btn-clear float-right\\\" aria-label=\\\":close\\\" data={data} click={close}></a>\\n                <div class=\\\"modal-title h5\\\" ui:if={title}>{title}</div>\\n                <ui:slot id=\\\"header\\\" />\\n            </div>\\n            <div class=\\\"modal-body\\\" style=\\\"max-height: 70vh;\\\">\\n                <div class=\\\"content\\\">\\n                    <ui:slot />\\n                </div>\\n            </div>\\n            <div class=\\\"modal-footer\\\">\\n                <ui:slot id=\\\"footer\\\" />\\n            </div>\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Tabs\\\">\\n    <ul class=\\\"tab tab-block\\\">\\n        <li class=\\\"tab-item {item.id|equals:@value|then:active} c-hand\\\" ui:for=\\\"item of items\\\">\\n            <a data={data} data-id={item.id} click={action}>\\n                <Icon ui:if={item.icon} type={item.icon} bundle={item.iconBundle} class=\\\"mx-2\\\" />\\n                {item.name}\\n            </a>\\n        </li>\\n    </ul>\\n</component>\\n\\n<component id=\\\"StatRow\\\">\\n    <p>Cross {cross} â€“Â {crossWin} Circle {circle} â€“Â {circleWin}  Total - {total}</p>\\n</component>\";","export default \"<component id=\\\"FieldItem\\\">\\n    <div class=\\\"columns form-group {error|then:has-error} {class}\\\">\\n        <div class=\\\" col-4 col-sm-12\\\">\\n            <label class=\\\"form-label\\\" for=\\\"input-example-1\\\">\\n                {caption}\\n                <sup ui:if={required}\\n                     class=\\\"text-error\\\">âœ±</sup>\\n            </label>\\n        </div>\\n        <div class=\\\"col-8 col-sm-12\\\">\\n            <ui:slot />\\n            <p class=\\\"form-input-hint\\\" ui:if={error}>{error}</p>\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"TextField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               type=\\\"text\\\"\\n               disabled={disabled}\\n               placeholder={placeholder}\\n               data={data}\\n               value={value}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"DateField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               disabled={disabled}\\n               type=\\\"date\\\"\\n               placeholder={caption}\\n               value={value}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"DateTimeField\\\">\\n    <FieldItem caption=\\\"{caption}\\\" error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               disabled={disabled}\\n               type=\\\"datetime-local\\\"\\n               placeholder={caption}\\n               value={value|date:yyyy-mm-ddTt}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"NumberField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               disabled={disabled}\\n               type=\\\"number\\\"\\n               placeholder={caption}\\n               value={value}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"TextareaField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <textarea\\n                  class=\\\"form-input\\\"\\n                  style=\\\"min-height: 15vw\\\"\\n                  data={data}\\n                  disabled={disabled} placeholder={caption} rows=\\\"3\\\" change={onChange} value={value}></textarea>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"SwitchField\\\">\\n    <div class=\\\"form-group\\\">\\n        <div class=\\\"col-sm-12\\\">\\n            <label class=\\\"form-switch\\\">\\n                <span>{caption}</span>\\n                <input type=\\\"checkbox\\\" toggle={onChange} data={data} checked={value|not|not}>\\n                <i class=\\\"form-icon\\\"></i>\\n            </label>\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"EnumField\\\">\\n    <FieldItem caption={caption} class={class} error={error} required={required}>\\n        <Select class=\\\"form-select\\\"\\n                change={onChange}\\n                value={value|or:@defaultValue}\\n                data={data}\\n                options=\\\":enums.{typeSpec}\\\"\\n                emptyCaption={emptyCaption}\\n                disabled={disabled} />\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"SelectField\\\">\\n    <FieldItem caption={caption} class={class} error={error} required={required}>\\n        <Select class=\\\"form-select\\\"\\n                change={onChange}\\n                value={value|or:@defaultValue}\\n                data={data}\\n                options={options}\\n                emptyCaption={emptyCaption}\\n                disabled={disabled} />\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"RadioField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <RadioGroup change={onChange}\\n                    value={value} data={data} options=\\\":enums.{typeSpec}\\\"\\n                    disabled={disabled} />\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"ReferenceField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <Loader from=\\\"-> references.{typeSpec}Search\\\"\\n                data-value={keyword.value|orDataPropValueByKey:keyword}\\n                trigger={keyword.value}\\n                into=\\\"->options\\\" />\\n        <Loader from=\\\"-> references.{typeSpec}Entry\\\" data-id={value} trigger={value} into=\\\"->entry\\\" />\\n        <ReferenceInput change={onChange}\\n                        value={value} entry={entry.data}\\n                        onKeyword=\\\"->keyword\\\" keyword={keyword.value|orDataPropValueByKey:keyword}\\n                        onSelectMenuItem=\\\"->entry\\\"\\n                        options={options.data}\\n                        disabled={disabled} />\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"RemoteEnumField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <Loader from=\\\"-> references.{typeSpec}Enum\\\" data={data} into=\\\"->options\\\" />\\n        <Select class=\\\"form-select\\\" change={onChange} value={value} data={options.data} disabled={disabled} />\\n    </FieldItem>\\n</component>\";","import * as effectsTypes from './effects.js'\n\nimport elements from './elements.html'\nimport table from './table.html'\nimport inputs from './inputs.html'\nimport fields from './fields.html'\nimport layouts from './layouts.html'\nimport viewport from './viewport.html'\nimport { NavigationService } from './NavigationService'\nimport { ServiceWorker } from './ServiceWorker'\nimport * as formTypes from './Form'\n\nimport * as services from './services'\n\nexport default [\n  ServiceWorker,\n  NavigationService,\n  ...Object.values(effectsTypes),\n  ...Object.values(formTypes),\n  ...Object.values(services),\n  elements, table, fields, viewport, layouts, inputs\n]\n","export default \"<component id=\\\"Select\\\">\\n    <select class=\\\"{class}\\\" change={change} disabled={disabled} data={data}>\\n        <option selected={value|not} value=\\\"\\\" ui:if={value|not|or:@emptyCaption}>{emptyCaption}</option>\\n        <option ui:for=\\\"option of options\\\" selected={option.id|equals:@value} value={option.id}>\\n            {option.name}\\n        </option>\\n    </select>\\n</component>\\n\\n<component id=\\\"RadioGroup\\\">\\n    <div class=\\\"{class}\\\">\\n        <label class=\\\"form-radio\\\" ui:for=\\\"option of options\\\">\\n            <input type=\\\"radio\\\" name={id|or:rg}\\n                   value={option.id}\\n                   checked={option.id|equals:@value} change={change} data={data}\\n                   disabled={disabled}>\\n            <i class=\\\"form-icon\\\"></i>{option.name}\\n        </label>\\n    </div>\\n</component>\\n<component id=\\\"InlineInput\\\">\\n    <label class=\\\"{editing|then:hidden} silver\\\" data-editing=\\\"true\\\" click=\\\"->\\\">{value|or:___}</label>\\n    <input type=\\\"number\\\"\\n           autofocus\\n           ui:if={editing}\\n           style=\\\"width:50px;\\\"\\n           value={value}\\n           data-editing=\\\"false\\\"\\n           data-key={key}\\n           enter={onChange}\\n           blur=\\\"->\\\" />\\n</component>\\n<component id=\\\"InlineText\\\">\\n    <div class=\\\"{editing|then:hidden} silver\\\" data-editing=\\\"true\\\" click=\\\"->\\\">{value|or:___}</div>\\n    <textarea\\n              autofocus\\n              style=\\\"width:100%;\\\"\\n              ui:if={editing}\\n              value={value}\\n              data-editing=\\\"false\\\"\\n              data-key={key}\\n              enter={onChange}\\n              blur=\\\"->\\\" />\\n    </component>\\n\\n<component id=\\\"Dropdown\\\">\\n    <div class=\\\"dropdown\\\">\\n        <a href=\\\"#\\\" class=\\\"btn btn-link dropdown-toggle\\\" tabindex=\\\"0\\\">\\n            {data|selectedName}<i class=\\\"icon icon-caret\\\"></i>\\n        </a>\\n        <!-- menu component -->\\n        <ul class=\\\"menu\\\" style=\\\"right:0;left:auto;\\\">\\n            <li ui:for=\\\"item of data\\\" class=\\\"menu-item {item.id|equals:@value|then:active}\\\"\\n                data-id={item.id}\\n                data-name={item.name}\\n                click={change}>\\n                <a>{item.name}</a>\\n            </li>\\n        </ul>\\n    </div>\\n</component>\\n\\n<component id=\\\"DateTimeInput\\\">\\n    <input class=\\\"form-input flatpickr-input\\\"\\n           init={:support.initFlatpickr}\\n           disabled={disabled}\\n           type=\\\"text\\\"\\n           placeholder={placeholder}\\n           value={value|support.setFlatpickrValue}\\n           change={change}>\\n</component>\\n\\n<component id=\\\"SearchBar\\\">\\n    <span class=\\\"ant-input-search ant-input-affix-wrapper\\\">\\n        <input placeholder=\\\"ÐŸÐ¾Ð¸ÑÐº...\\\" class=\\\"ant-input\\\" type=\\\"text\\\"\\n               value={value} enter={action}\\n               style=\\\"min-height:40px;\\\">\\n        <span class=\\\"ant-input-suffix\\\">\\n            <i class=\\\"anticon anticon-search ant-input-search-icon\\\" style=\\\"margin-top: 4px;\\\"></i>\\n        </span>\\n    </span>\\n</component>\\n\\n<component id=\\\"ReferenceInput\\\">\\n    <div class=\\\"form-autocomplete\\\">\\n        <div class=\\\"form-input has-icon-right\\\" data-showMenu={showMenu|not} click=\\\"->\\\">\\n            <div>{entry.fullNameRu}</div>\\n            <i class=\\\"form-icon icon icon-edit c-hand\\\"></i>\\n        </div>\\n        <Modal ui:if={showMenu} open=\\\"true\\\" title=\\\"Ð’Ñ‹Ð±Ð¾Ñ€ Ð¾Ð¿Ñ†Ð¸Ð¸ {title}\\\" data-showMenu=\\\"false\\\" close=\\\"->\\\">\\n            <div class=\\\"menu\\\" style=\\\"position:sticky;top:-20;z-index:101; border-bottom: none; box-shadow: unset\\\">\\n                <div class=\\\"form-group has-icon-right\\\">\\n                    <input class=\\\"form-input\\\" type=\\\"text\\\"\\n                           value={keyword} placeholder=\\\"search...\\\" change={onKeyword}>\\n                    <i class=\\\"form-icon icon icon-cross c-hand\\\" data-value=\\\"\\\" click={onKeyword}></i>\\n                </div>\\n                <div ui:if={options} class=\\\"menu-item\\\">\\n                    <div class=\\\"tile tile-centered mx-1\\\">\\n                        <b class=\\\"tile-content\\\">ÐÐ°Ð¹Ð´ÐµÐ½Ð¾: {options.length}</b>\\n                    </div>\\n                </div>\\n            </div>\\n            <ul class=\\\"menu\\\" style=\\\"position:unset; border-top: none; box-shadow: unset\\\">\\n                <li class=\\\"menu-item\\\" ui:for=\\\"item of options\\\" data-showMenu=\\\"false\\\" click=\\\"->\\\">\\n                    <div click={change} data-value={item.id}>\\n                        <div class=\\\"tile tile-centered mx-1\\\">\\n                            <figure class=\\\"avatar avatar-xs bg-primary\\\" data-initial={item.fullNameRu|initials}>\\n                            </figure>\\n                            <div class=\\\"tile-content\\\">{item.fullNameRu}, {item.birthday|date}</div>\\n                        </div>\\n                    </div>\\n                </li>\\n            </ul>\\n        </Modal>\\n    </div>\\n</component>\";","export default \"<component id=\\\"Panel\\\">\\n    <h6 class=\\\"mt-2 pt-2 px-2 text-gray\\\" ui:if=\\\"caption\\\">{caption}</h6>\\n    <div class=\\\"panel\\\" style={style}>\\n        <small class=\\\"p-2 bg-secondary\\\" ui:if={hint}>{hint}</small>\\n        <div class=\\\"panel-header\\\" ui:if=\\\"slot(title)\\\">\\n            <div class=\\\"panel-title\\\">\\n                <ui:slot id=\\\"title\\\" key=\\\"panel-title\\\" />\\n            </div>\\n        </div>\\n        <div class=\\\"panel-nav\\\" ui:if=\\\"slot(nav)\\\">\\n            <ui:slot id=\\\"nav\\\" />\\n        </div>\\n        <div class=\\\"panel-body p1\\\">\\n            <ui:slot />\\n        </div>\\n        <div class=\\\"panel-footer\\\" ui:if=\\\"slot(footer)\\\">\\n            <ui:slot id=\\\"footer\\\" />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Grid\\\">\\n    <div class=\\\"columns {class}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n\\n<component id=\\\"Col\\\">\\n    <div class=\\\"col-{size|or:6} col-sm-12 {class}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n<component id=\\\"Centroid\\\">\\n    <div class=\\\"{class}\\\" style=\\\"display: flex;align-items: center;justify-content: center;{style}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n\\n<component id=\\\"FlexBox\\\">\\n    <div class=\\\"{class}\\\" style=\\\"display: flex;align-items: stretch;justify-content:space-around;{style}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n\\n<component id=\\\"Tile\\\">\\n    <div class=\\\"tile {centered|then:tile-centered} m-2 {class}\\\">\\n        <div class=\\\"tile-icon\\\" ui:if={image}>\\n            <Avatar src={image} />\\n        </div>\\n        <div class=\\\"tile-icon\\\" ui:if={icon}>\\n            <Icon type={icon} />\\n        </div>\\n        <div class=\\\"tile-content\\\">\\n            <div class=\\\"tile-title text-bold\\\" ui:if={title}>{title}</div>\\n            <div class=\\\"tile-subtitle\\\" ui:if={subtitle}>{subtitle}</div>\\n            <ui:slot />\\n        </div>\\n        <div class=\\\"tile-action btn-group\\\" ui:if=\\\"slot(actions)\\\">\\n            <ui:slot id=\\\"actions\\\" />\\n        </div>\\n    </div>\\n</component>\\n\\n\\n<component id=\\\"Card\\\">\\n    <div class=\\\"card\\\" style={style}>\\n        <div class=\\\"card-image\\\" ui:if={image}>\\n            <img src={image} class=\\\"img-responsive\\\" />\\n        </div>\\n        <div class=\\\"card-header\\\">\\n            <a ui:if={title} href={link}>\\n                <h5 class=\\\"card-title\\\">{title}</h5>\\n            </a>\\n            <div ui:if={subtitle} class=\\\"card-subtitle text-gray\\\">{subtitle}</div>\\n            <ui:slot id=\\\"header\\\" />\\n        </div>\\n        <div class=\\\"card-body\\\">\\n            <ui:slot />\\n        </div>\\n        <div class=\\\"card-footer\\\">\\n            <ui:slot id=\\\"footer\\\" />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Popover\\\">\\n    <div class=\\\"popover popover-right\\\">\\n        <ui:slot />\\n        <div class=\\\"popover-container\\\">\\n            <div class=\\\"card\\\">\\n                <div class=\\\"card-header\\\">\\n                    <ui:slot id=\\\"body\\\" />\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</component>\";","export class Service {\n  constructor(state, $) {\n    this.state = state\n    this.$ = $\n  }\n\n  /**\n   * Framework\n   */\n  lookupService(ref) {\n    return this.$.app && this.$.app[ref] ? this.$.app[ref].impl : null\n  }\n\n  up(...args) {\n    return this.$.up(...args)\n  }\n\n  defer(...args) {\n    return this.$.defer(...args)\n  }\n\n  emit(...args) {\n    return this.$.emit(...args)\n  }\n\n  log(...args) {\n    console.log(this.$.ref + ': ', ...args)\n    return args[0]\n  }\n\n  /**\n   * Error handling\n   */\n\n  handleError({ message = '', code = '' }) {\n    // may  overriden from props\n    const handler = this.lookupService('errorHandler')\n    if (handler) {\n      handler.handleError({ message, code, source: this.$.ref })\n    } else {\n      console.error(this.$.ref + ': ERROR: ', message, code)\n    }\n  }\n\n  safe(p, def) {\n    return p.catch(error => {\n      this.handleError(error)\n      return def ? def(error) : { error }\n    })\n  }\n\n  onClearError() {\n    return { error: null }\n  }\n}\n\nexport class ErrorHandlingService extends Service {\n  handleError({ message = '', code, source = {} }) {\n    this.show({ message: source + ': ' + message, code, mode: 'error' })\n  }\n\n  show({ message = '', code = '', source }) {\n    console.error(source + ': ERROR: ', code, message)\n  }\n}\n\nexport class ToastService extends Service {\n  onSend({ data }) {\n    return {\n      top: { ...data, close: () => this.emit('this.close'), closeAfter: 5 }\n    }\n  }\n\n  onClose() {\n    return {\n      top: null\n    }\n  }\n}\n\nexport class TestService extends Service {\n  onMyClick({ clicked }) {\n    return { clicked: clicked + 1 }\n  }\n}\n","export default \"<component id=\\\"LoadingIndicator\\\">\\n    <div class=\\\"loading {large|then:loading-lg} {class}\\\" />\\n</component>\\n\\n<component id=\\\"EmptyData\\\">\\n    <div class=\\\"empty {class}\\\">\\n        <div class=\\\"empty-icon\\\">\\n            <Icon type={icon|or:people} />\\n        </div>\\n        <p class=\\\"empty-title h5\\\">{title}</p>\\n        <p ui:if={subtitle} class=\\\"empty-subtitle\\\">{subtitle}</p>\\n        <div class=\\\"empty-action\\\">\\n            <ui:slot />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"LoadableItems\\\">\\n    <LoadingIndicator class=\\\"empty\\\" ui:if=\\\"data|not\\\">\\n        <ui:else>\\n            <h5 class=\\\"error text-error\\\" ui:if=\\\"data.error\\\">{data.error.message|or:@data.error}</h5>\\n            <EmptyData title={emptyCaption|or:Empty} ui:if=\\\"data.length|not\\\">\\n                <ui:else>\\n                    <div style={style} ui:for=\\\"item of data\\\">\\n                        <ui:tag tag={itemType} ui:props={item} item={item} context={context} action={action} />\\n                    </div>\\n                </ui:else>\\n            </EmptyData>\\n        </ui:else>\\n    </LoadingIndicator>\\n</component>\\n\\n<component id=\\\"LoadableEntity\\\">\\n    <LoadingIndicator class=\\\"empty\\\" ui:if=\\\"data|not\\\">\\n        <ui:else>\\n            <h5 class=\\\"error text-error\\\" ui:if=\\\"data.error\\\">\\n                <span>{data.error.message|or:@data.error}</span>\\n                <ui:else>\\n                    <EmptyData title={emptyCaption|or:Empty} ui:if=\\\"data.id|not\\\">\\n                        <ui:else>\\n                            <ui:tag tag={type} data={data} context={context} action={action} />\\n                        </ui:else>\\n                    </EmptyData>\\n                </ui:else>\\n            </h5>\\n        </ui:else>\\n    </LoadingIndicator>\\n</component>\\n\\n<component id=\\\"Cell\\\">\\n    <span class=\\\"\\\" style=\\\"padding-left: 0px;\\\">{value}</span>\\n</component>\\n\\n<component id=\\\"EnumCell\\\">\\n    <span class=\\\"\\\"\\n          style=\\\"padding-left: 0px;\\\">:map.{typeSpec}.{value}</span>\\n</component>\\n\\n<component id=\\\"DateCell\\\">\\n    <span class=\\\"\\\" style=\\\"padding-left: 0px;\\\">{value|date}</span>\\n</component>\\n\\n<component id=\\\"Table\\\">\\n    <table style=\\\"position: relative;\\\">\\n        <thead class=\\\"table-thead\\\">\\n            <tr>\\n                <th class=\\\"col-index\\\" style=\\\"position: sticky; top: -1;\\\"></th>\\n                <th class=\\\"col-index\\\" style=\\\"position: sticky; top: -1;\\\" ui:for=\\\"item of columns\\\">\\n                    <span>{item.name}</span>\\n                    <div class=\\\"table-column-sorter\\\" ui:if=\\\"item.sortable\\\">\\n                        <span class=\\\"table-column-sorter-up off\\\" title=\\\"â†‘\\\" data-id=\\\"-{item.id}\\\"\\n                              click={doSort}><i class=\\\"anticon anticon-caret-up\\\"></i></span>\\n                        <span class=\\\"table-column-sorter-down off\\\" title=\\\"â†“\\\" data-id={item.id} click={doSort}><i\\n                               class=\\\"anticon anticon-caret-down\\\"></i></span>\\n                    </div>\\n                </th>\\n            </tr>\\n        </thead>\\n        <TableRow ui:for=\\\"item of data\\\" data={item} selected={item.selected} columns={columns} kind={kind} />\\n    </table>\\n</component>\\n\\n<component id=\\\"TableRow\\\">\\n    <tbody class=\\\"table-tbody\\\">\\n        <tr class=\\\"table-row table-row-level-0\\\" style=\\\"position:sticky;\\\">\\n            <td class=\\\"col-index\\\" data-id={data.id} click={doItem}>\\n                <div ui:if={expandable}\\n                     role=\\\"button\\\"\\n                     class=\\\"table-row-expand-icon table-row-expanded\\\"\\n                     aria-label=\\\"Collapse row\\\"\\n                     data-selected=\\\"false\\\" click=\\\"->\\\">\\n                    <ui:else>\\n                        <div role=\\\"button\\\"\\n                             class=\\\"table-row-expand-icon table-row-collapsed\\\"\\n                             aria-label=\\\"Expand row\\\"\\n                             data-selected=\\\"true\\\" click=\\\"->\\\"></div>\\n                    </ui:else>\\n                </div>\\n            </td>\\n            <td class=\\\"col-index\\\" ui:for=\\\"col of columns\\\">\\n                <ui:tag tag=\\\"{col.type|str.capitalize}Cell\\\" ui:props={col} value={col.id|propObjectValueByKey}\\n                        data={data} />\\n            </td>\\n        </tr>\\n        <tr ui:if={expanded} class=\\\"table-expanded-row table-expanded-row-level-1\\\">\\n            <td class=\\\"\\\"></td>\\n            <td class=\\\"\\\" colspan=\\\"100\\\">\\n                <ui:tag tag=\\\"{kind|str.capitalize}RowInsider\\\" data={data} />\\n            </td>\\n        </tr>\\n    </tbody>\\n</component>\";","export default \"<component id=\\\"ViewPort\\\">\\n    <ToastService ui:ref=\\\"toaster\\\" />\\n    <ErrorHandlingService ui:ref=\\\"errorHandler\\\" show=\\\"-> toaster.send\\\" />\\n    <ui:fragment ui:if=\\\"slot(aside)\\\">\\n        <Sidebar caption={caption} size={sidebarWidth}>\\n            <Sidebar:aside>\\n                <ui:slot id=\\\"aside\\\" />\\n            </Sidebar:aside>\\n            <main>\\n                <Toast event=\\\"<- toaster.top\\\" />\\n                <ui:slot />\\n            </main>\\n        </Sidebar>\\n        <ui:else>\\n            <main>\\n                <Toast event=\\\"<- toaster.top\\\" />\\n                <ui:slot />\\n            </main>\\n        </ui:else>\\n    </ui:fragment>\\n</component>\\n\\n<component id=\\\"Sidebar\\\">\\n    <div class=\\\"off-canvas off-canvas-sidebar-show\\\">\\n        <a class=\\\"off-canvas-toggle btn btn-primary btn-action show-lg bg-red\\\"\\n           href=\\\"#sidebar\\\">\\n            <Icon type=\\\"bars\\\" />\\n        </a>\\n        <div id=\\\"sidebar\\\" class=\\\"off-canvas-sidebar\\\">\\n            <Aside caption={caption}>\\n                <ui:slot id=\\\"aside\\\" />\\n            </Aside>\\n        </div>\\n        <a class=\\\"off-canvas-overlay\\\" href=\\\"#\\\"></a>\\n        <div class=\\\"off-canvas-content\\\">\\n            <ui:slot />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Aside\\\">\\n    <aside style=\\\"display:flex; flex-direction: column; height: 100vh; width:{size|or:300}px\\\">\\n        <div class=\\\"text-center\\\" ui:if={caption}>\\n            <a href=\\\"#/main\\\">\\n                <h5 class=\\\"p-2\\\">{caption}</h5>\\n            </a>\\n        </div>\\n        <div class=\\\"m-2\\\" style=\\\"flex:1; overflow-y: auto;\\\">\\n            <ui:slot />\\n        </div>\\n    </aside>\\n</component>\\n\\n<component id=\\\"Navbar\\\">\\n    <header class=\\\"navbar {class}\\\" style=\\\"min-height:48px\\\">\\n        <section class=\\\"navbar-section\\\">\\n            <div class=\\\"mx-2\\\">\\n                <NavLink href={back} ui:if={back}>\\n                    <Button link class=\\\"text-primary\\\" icon=\\\"arrow-left\\\" title=\\\":action.back\\\" />\\n                </NavLink>\\n                <h4 class=\\\"m-1\\\" style=\\\"vertical-align: middle;\\\" ui:if={caption}>{caption}</h4>\\n                <ui:slot id=\\\"left\\\" />\\n            </div>\\n        </section>\\n        <section class=\\\"navbar-center\\\" ui:if={logo}>\\n            <img src={logo} style=\\\"max-height:44px;\\\" />\\n        </section>\\n        <section class=\\\"navbar-section\\\">\\n            <div class=\\\"mx-2\\\">\\n\\n                <ui:slot />\\n            </div>\\n\\n        </section>\\n    </header>\\n</component>\\n\\n<component id=\\\"NavTree\\\">\\n    <ul class=\\\"nav\\\">\\n        <li class=\\\"nav-item {item.class}\\\" ui:for=\\\"item of data\\\">\\n            <NavLink href={item.id}>\\n                <span>{item.name}</span>\\n                <span ui:if={item.label} class=\\\"label label-error\\\">{item.label}</span>\\n            </NavLink>\\n            <NavTree ui:if={item.subs} data={item.subs} />\\n        </li>\\n    </ul>\\n</component>\\n\\n<component id=\\\"NavLink\\\">\\n    <a data-value={href} click=\\\"-> nav.hash\\\" class=\\\"c-hand {class}\\\">\\n        <ui:slot />\\n    </a>\\n</component>\\n\\n<component id=\\\"PageRouter\\\">\\n    <ui:tag tag=\\\"{target|str.capitalize|or:Main}Page\\\" ui:props={params} params={params} />\\n</component>\\n\\n<component id=\\\"Toast\\\">\\n    <div class=\\\"toast toast-{event.mode|or:@mode|or:primary}\\\"\\n         style=\\\"position:absolute;top:1rem;right:1rem;left:1rem;{style}\\\"\\n         ui:if=\\\"event\\\">\\n        <button class=\\\"btn btn-clear float-right\\\" click={event.close}></button>\\n        <p>{event.message}</p>\\n        <Delay ui:if={event.closeAfter} action={event.close} period={event.closeAfter} />\\n    </div>\\n</component>\";","class Goal {\n  constructor (x, y) {\n    this.x = x\n    this.y = y\n  }\n}\n\n// class Player0 {\n//   constructor (x, y, goal) {\n//     this.x = x\n//     this.y = y\n//     this.xVel = Math.random() / 10\n//     this.yVel = Math.random() / 10\n//     this.goal = goal\n//     this.getDistance()\n//   }\n\n//   getDistance () {\n//     const xDiff = this.x - this.goal.x\n//     const yDiff = this.y - this.goal.y\n//     this.distance = xDiff ** 2 + yDiff ** 2\n//     return this.distance\n//   }\n\n//   // changeVelocity (direction) {\n//   //   const deltaVel = 0.5\n//   //   const norm = _norm(direction)\n//   //   this.xVel += deltaVel * direction[0] / norm\n//   //   this.yVel += deltaVel * direction[1] / norm\n//   // }\n\n//   move (direction) {\n//     // this.changeVelocity(direction)\n//     const copy = this.copy()\n//     const norm = _norm(direction)\n//     copy.x += direction[0] / norm\n//     copy.y += direction[1] / norm\n//     copy.getDistance()\n//     return copy\n//   }\n\n//   copy () {\n//     const copy = new Player(this.x, this.y, this.goal)\n//     copy.xVel = this.xVel\n//     copy.yVel = this.yVel\n//     copy.distance = this.distance\n//     return copy\n//   }\n// }\nclass Player {\n  constructor (x, y, goal) {\n    this.x = x\n    this.y = y\n    this.xVel = (Math.random() - 0.5) / 5\n    this.yVel = (Math.random() - 0.5) / 5\n    this.goal = goal\n    this.quality = 0\n    this.distance = getDistance(this, this.goal)\n  }\n\n  get score () {\n    if (this.x > 500 || this.x < -100 || this.y > 700 || this.y < -100) {\n      return 1e20\n    }\n    const quality = this.quality\n    this.quality = 0\n    return quality\n  }\n\n  getDiractionX () {\n    const vx = this.goal.x - this.x\n    const vy = this.goal.y - this.y\n    return vx / _norm([vx, vy])\n  }\n\n  getDiractionY () {\n    const vx = this.goal.x - this.x\n    const vy = this.goal.y - this.y\n    return vy / _norm([vx, vy])\n  }\n\n  // predictDistance () {\n  //   return getDistance({ x: this.x + this.xVel, y: this.y + this.yVel }, this.goal)\n  // }\n\n  changeVelocity (direction) {\n    const deltaVel = 1\n    // const norm = _norm(direction)\n    this.xVel += deltaVel * direction[0] // norm\n    this.yVel += deltaVel * direction[1] // norm\n    // const norm = _norm([this.xVel, this.yVel])\n  }\n\n  move (direction) {\n    this.changeVelocity(direction)\n    const copy = this.copy()\n    copy.x += copy.xVel\n    copy.y += copy.yVel\n    copy.distance = getDistance(copy, copy.goal)\n    copy.quality = this.distance + this.quality\n    return copy\n  }\n\n  copy () {\n    const copy = new Player(this.x, this.y, this.goal)\n    copy.xVel = this.xVel\n    copy.yVel = this.yVel\n    copy.distance = this.distance\n    return copy\n  }\n}\nfunction resetGoal (goalsParams) {\n  const x = goalsParams.x + Math.floor(Math.random() * goalsParams.dx)\n  const y = goalsParams.y + Math.floor(Math.random() * goalsParams.dy)\n  return new Goal(x, y)\n}\n\nexport class Labyrinth {\n  constructor (size,\n    playerX = () => (200),\n    playerY = () => (400),\n    goalsParams = { x: 85, y: 280, dx: 230, dy: 70 }\n  ) {\n    this.playerX = playerX\n    this.playerY = playerY\n    this.goalsParams = goalsParams\n    this.goal = resetGoal(goalsParams)\n    Object.assign(this, {\n      width: 400,\n      height: 600,\n      size,\n      players: [],\n      bestPlayer: new Player(playerX(), playerY(), this.goal)\n    })\n    for (let i = 0; i < size; i++) {\n      this.players.push(new Player(playerX(), playerY(), this.goal))\n    }\n  }\n\n  reset (savegoal) {\n    if (!savegoal) {\n      this.goal = resetGoal(this.goalsParams)\n    }\n\n    this.players = []\n    this.bestPlayer = new Player(this.playerX(), this.playerY(), this.goal)\n    for (let i = 0; i < this.size; i++) {\n      this.players.push(new Player(this.playerX(), this.playerY(), this.goal))\n    }\n  }\n}\n\nfunction _norm (array) {\n  return Math.sqrt(array.reduce((acc, val) => acc + val ** 2, 0))\n}\nfunction getDistance (a, b, width = 400, height = 600) {\n  return _norm([(a.x - b.x), (a.y - b.y)]) / 100\n}\n","\nfunction reset () {\n  return {\n    crossWin: 0,\n    circleWin: 0,\n    draw: 0,\n    total: 0,\n    times: 100\n  }\n}\n// TTT stats\nexport class TTTStats {\n  init () {\n    return reset()\n  }\n\n  createarray () {\n    const size = [0, 1, 2]\n    return size.map(row => ({ id: row, cols: size.map(col => ({ id: col, value: 0 })) }))\n  }\n\n  // setPlayers (state) {\n  //   this.players = state\n  // }\n  reset () {\n    this.crossWin = 0\n    this.circleWin = 0\n    this.draw = 0\n    this.total = 0\n    this.times = 0\n  }\n\n  // setCross (state) {\n  //   console.log('bruh')\n  //   return this.reset()\n  // }\n\n  // setCircle (state) {\n  //   return this.reset()\n  // }\n\n  setFinished (state) {\n    // console.log('TTTState', state, this)\n    // console.log(this.times)\n    if (this.times > 0) {\n      switch (state) {\n        case 1:\n          this.crossWin += 1\n          break\n        case 2:\n          this.circleWin += 1\n          break\n\n        case 3:\n          this.draw += 1\n          break\n\n        default:\n          return\n      }\n      this.total += 1\n      this.times -= 1\n      // console.log('do it')\n      setTimeout(() => {\n        this.handler()\n      }, 1)\n    }\n  }\n}\n","// function boardReset () {\n//   const size = [0, 1, 2]\n//   return {\n//     data: size.map(row => ({ id: row, cols: size.map(col => ({ id: col, value: 0 })) }))\n//   }\n// }\nfunction boardReset () {\n  const size = [0, 1, 2]\n  return size.map(row => ({ id: row, cols: size.map(col => ({ id: col, value: 0 })) }))\n}\n\nclass Board {\n  // init () {\n  //   return boardReset()\n  // }\n  constructor () {\n    this.data = boardReset()\n  }\n\n  makeMove ({ row, col, value }) {\n    const data = JSON.parse(JSON.stringify(this.data))\n    data[row].cols[col].value = value\n    return this.copy(data)\n  }\n\n  copy (data) {\n    const copy = new Board()\n    copy.data = JSON.parse(JSON.stringify(data))\n    return copy\n  }\n}\n\n// function gameReset (player1 = 0, player2 = 1) {\n//   return {\n//     board: new Board(),\n//     finished: false,\n//     winner: false,\n//     step: 0,\n//     player1,\n//     player2\n//   }\n// }\n\nfunction checkFinished (board, step, minwinstep = 4, player = false) {\n  if (step < minwinstep) {\n    return false\n  }\n  if (!player) {\n    player = 1 + step % 2\n  }\n  // board.map()\n  for (let row = 0; row < 3; row++) {\n    if (board[row].cols.reduce((acc, cur) => (acc && (cur.value === player)), true)) {\n      return player\n    }\n    if (board.reduce((acc, cur) => (acc && (cur.cols[row].value === player)), true)) {\n      return player\n    }\n  }\n  if (board.reduce((acc, cur, ind) => (acc && (cur.cols[ind].value === player)), true)) {\n    return player\n  }\n  if (board.reduce((acc, cur, ind) => (acc && (cur.cols[2 - ind].value === player)), true)) {\n    return player\n  }\n  if (step === 8) {\n    return 3\n  }\n  return false\n}\n\nexport class TTT {\n  // init () {\n  //   console.log('TTTlog')\n  //   return gameReset(0, 1)\n  // }\n  constructor () {\n    this.board = new Board()\n    this.finished = false\n    this.step = 0\n  }\n\n  // makeMove ({ row, col }) {\n  //   if (!this.finished) {\n  //     // console.log(row, col, this.step)\n  //     this.board = this.board.makeMove({ row, col, value: 1 + (this.step % 2) })\n  //     const winner = checkFinished(this.board.data, this.step)\n  //     this.step = this.step + 1\n  //     if (winner) {\n  //       this.finished = winner\n  //     }\n  //     // return { ...this, board, step, finished, winner }\n  //   }\n  //   return this.copy({ ...this, winner: this.finished })\n  // }\n  makeMove ({ row, col }) {\n    // console.log(row, col, !this.finished, this.step)\n    if (!this.finished) {\n      // console.log(row, col, this.step)\n      const board = this.board.makeMove({ row, col, value: 1 + (this.step % 2) })\n      const finished = checkFinished(board.data, this.step)\n\n      return this.copy({ board, finished, step: this.step + 1 })\n    }\n    return this.copy({ ...this })\n  }\n\n  getAvailableMoves () {\n    const moves = []\n    for (let row = 0; row < 3; row++) {\n      for (let col = 0; col < 3; col++) {\n        if (this.board.data[row].cols[col].value === 0) {\n          moves.push({ col: col, row: row, value: 0 })\n        }\n      }\n    }\n    return moves\n  }\n\n  copy ({ board, finished, step }) {\n    const copy = new TTT()\n    copy.board = board.copy(board.data)\n    copy.finished = finished\n    copy.step = step\n    return copy\n  }\n\n  // This is for UTTT\n  makeSubMove ({ row, col, value }) {\n    // console.log(row, col, !this.finished, this.step)\n    if (!this.finished) {\n      // console.log(row, col, this.step)\n      const board = this.board.makeMove({ row, col, value })\n      const finished = checkFinished(board.data, this.step, 2, value)\n\n      return this.copy({ board, finished, step: this.step + 1 })\n    }\n    return this.copy({ ...this })\n  }\n}\n","import { TTT } from './ttt.js'\n\nfunction boardReset () {\n  const size = [0, 1, 2]\n  return size.map(row => ({\n    id: row,\n    cols: size.map(col => ({\n      id: col,\n      subgame: new TTT(),\n      value: 0,\n      available: 1,\n      finished: false\n    }))\n  }))\n}\n\nclass Board {\n  constructor () {\n    this.data = boardReset()\n  }\n\n  makeMove ({ col, row, value, subrow, subcol }) {\n    // const { board, step, finished } = this\n    const data = this.data.map(\n      row => ({\n        ...row,\n        cols: row.cols.map(\n          col => ({\n            ...col,\n            subgame: col.subgame.copy(col.subgame)\n          })\n        )\n      })\n    )\n    data[row].cols[col].subgame = data[row].cols[col].subgame.makeSubMove({ row: subrow, col: subcol, value })\n    const finished = data[row].cols[col].subgame.finished\n    if (finished) {\n      data[row].cols[col].value = finished % 3\n      data[row].cols[col].available = false\n      data[row].cols[col].finished = finished\n    }\n    // return this.copy(data)\n    const answ = new Board()\n    answ.data = data\n    return answ\n  }\n\n  copy (data) {\n    // TODO: rewrite copy by map\n    const copy = new Board()\n    copy.data = data.map(\n      row => ({\n        ...row,\n        cols: row.cols.map(\n          col => ({\n            ...col,\n            subgame: col.subgame.copy(col.subgame)\n          })\n        )\n      })\n    )\n    return copy\n  }\n}\n\nfunction checkFinished (board, step) {\n  if (step < 16) {\n    return false\n  }\n  const player = 1 + step % 2\n  for (let row = 0; row < 3; row++) {\n    if (board[row].cols.reduce((acc, cur) => (acc && (cur.value === player)), true)) {\n      return player\n    }\n    if (board.reduce((acc, cur) => (acc && (cur.cols[row].value === player)), true)) {\n      return player\n    }\n  }\n  if (board.reduce((acc, cur, ind) => (acc && (cur.cols[ind].value === player)), true)) {\n    return player\n  }\n  if (board.reduce((acc, cur, ind) => (acc && (cur.cols[2 - ind].value === player)), true)) {\n    return player\n  }\n  // available subBoards check\n\n  for (let r = 0; r < 3; r++) {\n    for (let c = 0; c < 3; c++) {\n      if (board[r].cols[c].available !== false) {\n        return false\n      }\n    }\n  }\n  return 3\n}\n\nexport class UTTT {\n  constructor () {\n    this.board = new Board()\n    this.finished = false\n    this.step = 0\n  }\n\n  copy ({ board, finished, step }) {\n    const copy = new UTTT()\n    copy.board = board.copy(board.data)\n    copy.finished = finished\n    copy.step = step\n    return copy\n  }\n\n  makeMove ({ col, row, subrow, subcol }) {\n    // const { board, step, finished } = this\n    // console.log(col, row, subcol, subrow)\n    const subboard = this.board.data[row].cols[col]\n    // console.log(subboard)\n    if (!this.finished && (subboard.available === 1) && !subboard.finished) {\n      const board = this.board.makeMove({ subcol, subrow, row, col, value: 1 + (this.step % 2) })\n      const finished = checkFinished(board.data, this.step)\n      // console.log(board)\n      // determine available subboards for the next move\n      let avail = 1\n      if (board.data[subrow].cols[subcol].available !== false || finished) {\n        avail = 0\n      }\n      for (let r = 0; r < 3; r++) {\n        for (let c = 0; c < 3; c++) {\n          if (board.data[r].cols[c].available !== false) {\n            board.data[r].cols[c].available = avail\n          }\n        }\n      }\n      if (avail === 0 && !finished) {\n        board.data[subrow].cols[subcol].available = 1\n      }\n\n      return this._copy({ board, finished, step: this.step + 1 })\n    }\n    return this._copy({ ...this })\n  }\n\n  _copy ({ board, finished, step }) {\n    const copy = new UTTT()\n    copy.board = board\n    copy.finished = finished\n    copy.step = step\n    return copy\n  }\n\n  getAvailableMoves () {\n    const moves = []\n    for (let row = 0; row < 3; row++) {\n      for (let col = 0; col < 3; col++) {\n        const cell = this.board.data[row].cols[col]\n        if (cell.available !== 1) {\n          continue\n        }\n        for (let subrow = 0; subrow < 3; subrow++) {\n          for (let subcol = 0; subcol < 3; subcol++) {\n            if (cell.subgame.board.data[subrow].cols[subcol].value === 0) {\n              moves.push({ col: col, row: row, value: 0, subrow: subrow, subcol: subcol })\n            }\n          }\n        }\n      }\n    }\n    // console.log(moves)\n    return moves\n  }\n}\n","import { launch } from 'arrmatura'\nimport commons from './commons'\nimport templates from './app.html'\nimport pages from './pages'\nimport resources from './res'\nimport { TTTStore } from './stores/ttt_store.js'\nimport { UTTTStore } from './stores/uttt_store.js'\nimport { LabyrinthStore } from './stores/labyrinth_store.js'\nimport { pipes } from 'ultimus'\n// import {\n//   PlayerControllerPlayer,\n//   PlayerControllerMCTS,\n//   PlayerControllerRandom\n// } from './ai/player.js'\n\nimport {\n  PlayerControllerPlayer,\n  PlayerControllerMCTS,\n  PlayerControllerRandom,\n  PlayerControllerMiniMax\n} from './players/players.js'\nimport { TTTStats } from './games/stats.js'\nimport { LabyrinthMonitor } from './players/labyrinthmonitor.js'\n\nconst types = [\n  ...commons,\n  templates,\n  ...pages,\n  TTTStore,\n  UTTTStore,\n  LabyrinthStore,\n  TTTStats,\n  LabyrinthMonitor,\n  PlayerControllerPlayer,\n  PlayerControllerMCTS,\n  PlayerControllerRandom,\n  PlayerControllerMiniMax\n\n]\n\nlaunch({\n  template: '<App />',\n  types,\n  resources,\n  pipes: {\n    ...pipes,\n    fio: (p) => p.name || p.fullName,\n    now: () => Date.now(),\n    kv: (x = '', e = '') => 't' + e + x,\n    age: () => 34,\n    wrapWithKey: (v, k, r) => ({ ...r, [k]: v }),\n    inc: (x = 0) => (x + 1),\n    dec: (x = 0) => (x - 1),\n    toArray: (array) => array.map((element, i) => ({ id: i, value: element })),\n    gameState: (states, f, step) => {\n      if (f) {\n        return states.gameWinner[f - 1]\n      } else {\n        return states.gameTurn[step % 2]\n      }\n    },\n    subGame: (board, r, c) => board[r].cols[c].subgame.board.data\n\n  }\n})\n","import ticTacToe from './tictactoe.html'\nimport ultTicTacToe from './ulttictactoe.html'\nimport labyrinth from './labyrinth.html'\n\nexport default [\n  ticTacToe,\n  ultTicTacToe,\n  labyrinth\n]\n","export default \"\\n\\n<component id=\\\"Player\\\">\\n  <div class=\\\"player {title}\\\" style=\\\"top: {value.y}px; left: {value.x}px;\\\"></div> \\n</component>\\n\\n<component id=\\\"Goal\\\">\\n  <div class=\\\"goal\\\" style=\\\"top: {value.y}px; left: {value.x}px;\\\"></div> \\n</component>\\n\\n<component id=\\\"LabyrinthParams\\\">\\n  <div class=\\\"slidecontainer\\\">\\n    <label for=\\\"cycleRange\\\">Cycles: {maxcycle} </label> \\n    <input type=\\\"range\\\" min=\\\"2\\\" max=\\\"501\\\" value={maxcycle} class=\\\"slider\\\" change=\\\"->nstore.maxcycle\\\"  id=\\\"cycleRange\\\">\\n  </div> \\n  <label>Cycle: {cycle} </label>\\n  <div class=\\\"slidecontainer\\\">\\n    <label for=\\\"lifetimeRange\\\">Lifetime: {step}/{lifetime} </label>  \\n    <input type=\\\"range\\\" min=\\\"50\\\" max=\\\"501\\\" value={lifetime} class=\\\"slider\\\" change=\\\"->nstore.lifetime\\\"  id=\\\"lifetimeRange\\\">\\n  </div> \\n  <!-- <div class=\\\"slidecontainer\\\">\\n    <label for=\\\"maxlifetimeRange\\\">Max Lifetime: {maxlifetime} </label>  \\n    <input type=\\\"range\\\" min=\\\"100\\\" max=\\\"300\\\" value={maxlifetime} class=\\\"slider\\\" change=\\\"->nstore.maxlifetime\\\"  id=\\\"maxlifetimeRange\\\">\\n  </div> \\n  <div class=\\\"slidecontainer\\\">\\n    <label for=\\\"cyclesltconstRange\\\">Update LT in cycles: {cyclesltconst} </label>  \\n    <input type=\\\"range\\\" min=\\\"1\\\" max=\\\"10\\\" value={cyclesltconst} class=\\\"slider\\\" change=\\\"->nstore.cyclesltconst\\\"  id=\\\"cyclesltconstRange\\\">\\n  </div> \\n  <div class=\\\"slidecontainer\\\">\\n    <label for=\\\"addltRange\\\">Update LT by: {addlt} </label>  \\n    <input type=\\\"range\\\" min=\\\"1\\\" max=\\\"20\\\" value={addlt} class=\\\"slider\\\" change=\\\"->nstore.addlt\\\"  id=\\\"addltRange\\\">\\n  </div>  -->\\n\\n  <div class=\\\"slidecontainer\\\">\\n    <label for=\\\"newgoalcyclesRange\\\">New goal cycles: {newgoalcycles} </label>  \\n    <input type=\\\"range\\\" min=\\\"1\\\" max=\\\"50\\\" value={newgoalcycles} class=\\\"slider\\\" change=\\\"->nstore.newgoalcycles\\\"  id=\\\"newgoalcyclesRange\\\">\\n  </div> \\n  <div class=\\\"gametypes\\\">\\n    <button class=\\\"btn\\\" data-type=\\\"1\\\" click=\\\"->nstore.changegame\\\" > Game type 1 </button>\\n    <button class=\\\"btn\\\" data-type=\\\"2\\\" click=\\\"->nstore.changegame\\\" > Game type 2 </button>\\n  </div>\\n  \\n  \\n</component>\\n\\n<component id=\\\"Labyrinth\\\">\\n  <ui:tag tag=\\\"LabyrinthMonitor\\\" cycle=\\\"<-nstore.cycle\\\" lifetime=\\\"<-nstore.lifetime\\\" step=\\\"<-nstore.step\\\" maxcycle=\\\"<-nstore.maxcycle\\\" moveAll=\\\"->nstore.moveall\\\" assessAll=\\\"->nstore.evolve\\\" />\\n    \\n  \\n  <div class=\\\"container\\\">\\n    <div class=\\\"columns\\\">\\n      <div class=\\\"column col-6 labcontainer\\\">\\n        <div class=\\\"labyrinth\\\"  >\\n          <Player ui:for=\\\"pl of players|toArray\\\"  value=\\\"{pl.value}\\\" />\\n          <Player value=\\\"<- nstore.bestplayer\\\" title=\\\"bestplayer\\\"/>\\n          <Goal value=\\\"<- nstore.goal\\\"  />\\n        </div>\\n      </div>\\n      <div class=\\\"column col-1\\\"></div>\\n      <div class=\\\"column col-2\\\">\\n        <h6>Options</h6>\\n        <button class=\\\"btn btn-error control\\\" click=\\\"->nstore.reset\\\">Reset</button>\\n        <button class=\\\"btn btn-error control\\\" click=\\\"->nstore.moveall\\\">MoveAll</button>  \\n        <button class=\\\"btn btn-error control\\\" click=\\\"->nstore.cycle\\\">Cycle</button>  \\n        <br/>\\n        <br/>\\n\\n        <LabyrinthParams  \\n          maxcycle=\\\"<-nstore.maxcycle|dec\\\" \\n          lifetime=\\\"<-nstore.lifetime\\\" \\n          step=\\\"<-nstore.step\\\" \\n          cycle=\\\"<-nstore.cycle\\\"  \\n          addlt=\\\"<-nstore.addlt\\\"\\n          cyclesltconst=\\\"<-nstore.cyclesltconst\\\"\\n          maxlifetime=\\\"<-nstore.maxlifetime\\\"\\n          newgoalcycles=\\\"<-nstore.newgoalcycles\\\"\\n          />  \\n      </div>\\n    </div>\\n  </div>\\n</component>\\n\\n\\n<component id=\\\"LabyrinthPage\\\">\\n  <h4>NEAT is neat</h4>\\n  <LabyrinthStore  ui:ref=\\\"nstore\\\" />\\n  <Labyrinth players=\\\"<-nstore.players\\\"  />\\n  \\n  \\n  <h4>Comparation</h4>\\n</component>\";","export default \"<component id=\\\"Cell\\\">\\n  <div class=\\\"column col-sm-4 cell-box\\\">\\n    <div class=\\\"cell cell-{value}\\\" click=\\\"->store.step\\\" data-col={col} data-row={row}\\n         data-value={value}>\\n      <!-- {value|or:0} -->\\n    </div>\\n  </div>\\n</component>\\n\\n<component id=\\\"Board\\\">  \\n  <h6>{:gameStates|gameState:@finished:@step} </h6>\\n  <div class=\\\"container\\\">\\n    <div class=\\\"columns\\\" ui:for=\\\"row of board\\\">\\n      <Cell ui:for=\\\"col of row.cols\\\" col={col.id} row={row.id} value={col.value}/>\\n    </div>\\n  </div>\\n</component>\\n\\n<component id=\\\"TTTPlayer\\\">\\n\\n  <ui:tag tag=\\\"PlayerController{type}\\\" player={pplayer} type={type} state=\\\"<-store.state\\\" ref=\\\"->store.ref\\\" handler=\\\"->store.makeMoveOutside\\\" />\\n  <div>\\n    <h6>Select {name}</h6>      \\n    <button ui:for=\\\"pl of :playersTTT\\\"  class=\\\"btn control btn-{pl.name|equals:@type|then:primary}\\\" data-player={pplayer} data-type=\\\"{pl.type}\\\" click=\\\"-> store.switch\\\">{pl.name}</button>\\n  </div>\\n</component> \\n\\n<component id=\\\"TicTacToe\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"columns\\\">\\n      <div class=\\\"column col-6\\\">\\n        <Board board=\\\"<- store.board\\\" step=\\\"<- store.step\\\" finished=\\\"<- store.finished\\\"/>\\n      </div>\\n      <div class=\\\"column col-1\\\"></div>\\n      <div class=\\\"column col-2\\\">\\n        <h6>Options</h6>\\n        <button class=\\\"btn btn-error control\\\" click=\\\"->store.reset\\\">Reset</button>\\n        <TTTPlayer pplayer=\\\"1\\\" name=\\\"Cross\\\" type=\\\"<- store.cross|log\\\" />\\n        <TTTPlayer pplayer=\\\"2\\\" name=\\\"Circle\\\" type=\\\"<- store.circle\\\" />               \\n      </div>\\n    </div>\\n  </div>\\n</component>\\n\\n\\n\\n<component id=\\\"TictactoePage\\\">\\n  <h4>TicTacToe</h4>\\n\\n  <TTTStore ui:ref=\\\"store\\\" />\\n  <TicTacToe />\\n  <h4>Comparation</h4>\\n  <ui:tag tag=\\\"TTTStats\\\" ui:ref=\\\"stat\\\" handler=\\\"->store.reset\\\" players={:players} cross=\\\"<- store.cross\\\" circle=\\\"<-store.circle\\\" finished=\\\"<- store.finished\\\" />\\n  <StatRow cross=\\\"<- stat.cross\\\" crossWin=\\\"<- stat.crossWin\\\" circleWin=\\\"<- stat.circleWin\\\" draw=\\\"<- stat.draw\\\" total=\\\"<- stat.total\\\" circle=\\\"<- stat.circle\\\" />\\n  \\n</component>\";","export default \"<component id=\\\"UCell\\\">\\n  <div class=\\\"column col-4 cell-box\\\">\\n    <div class=\\\"ucell cell-{value}\\\" click=\\\"->ustore.stepcell\\\" \\n         data-col={col} data-row={row}\\n         data-subcol={subcol} data-subrow={subrow}\\n         data-value={value}>         \\n    </div>\\n  </div>\\n</component>\\n\\n<component id=\\\"USubBoard\\\">  \\n  <div class=\\\"column col-4 subBoard subBoard-{available} subWin-{finished}\\\">  \\n    <div class=\\\"hider\\\"></div>\\n    <div class=\\\"columns\\\" ui:for=\\\"row of board\\\">      \\n      <UCell ui:for=\\\"col of row.cols\\\" subcol={col.id} subrow={row.id} value={col.value} col={ucol} row={urow} />      \\n    </div>\\n    \\n  </div>\\n</component>\\n\\n<component id=\\\"UBoard\\\">  \\n  <h6>{:gameStates|gameState:@finished:@step} </h6>\\n  <div class=\\\"container\\\">\\n    <div class=\\\"columns\\\" ui:for=\\\"row of board\\\">\\n       <USubBoard \\n        ui:for=\\\"col of row.cols\\\" \\n        board=\\\"{board|subGame:@row.id:@col.id}\\\" \\n        ucol={col.id}\\n        urow={row.id} \\n        available={col.available}\\n        finished={col.finished}\\n        uvalue={col.value} /> \\n    </div>\\n  </div>\\n</component>\\n <!-- state=\\\"<-ustore.state\\\" handler=\\\"->ustore.stepcell\\\" -->\\n <component id=\\\"UTTTPlayer\\\">\\n\\n  <ui:tag tag=\\\"PlayerController{type}\\\" player={pplayer} type={type} state=\\\"<-ustore.state\\\" ref=\\\"->ustore.ref\\\" handler=\\\"->ustore.makeMoveOutside\\\" />\\n  <div>\\n    <h6>Select {name}</h6>      \\n    <button ui:for=\\\"pl of :playersUTTT\\\"  class=\\\"btn control btn-{pl.name|equals:@type|then:primary}\\\" data-player={pplayer} data-type=\\\"{pl.type}\\\" click=\\\"-> ustore.switch\\\">{pl.name}</button>\\n  </div>\\n</component> \\n\\n<component id=\\\"UTicTacToe\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"columns\\\">\\n      <div class=\\\"column col-8 board\\\">\\n        <UBoard board=\\\"<- ustore.board\\\" step=\\\"<- ustore.step\\\" finished=\\\"<- ustore.finished\\\" /> \\n      </div>\\n      <!-- <div class=\\\"column col-1\\\"></div> -->\\n      <div class=\\\"column col-2\\\">\\n        <h6>Options</h6>\\n        <button class=\\\"btn btn-error control\\\" click=\\\"->ustore.reset\\\">Reset</button>\\n        <!-- <button class=\\\"btn btn-error control\\\" click=\\\"->ustore.mctsrequest\\\">AI move</button> -->\\n        <UTTTPlayer pplayer=\\\"1\\\" name=\\\"Cross\\\" type=\\\"<- ustore.cross\\\" />\\n        <UTTTPlayer pplayer=\\\"2\\\" name=\\\"Circle\\\" type=\\\"<- ustore.circle\\\" />               \\n      </div>\\n    </div>\\n  </div>\\n</component> \\n\\n\\n<component id=\\\"UlttictactoePage\\\">\\n  <h4>UltimateTicTacToe</h4>\\n\\n  <UTTTStore ui:ref=\\\"ustore\\\" />\\n  <UTicTacToe />\\n  \\n  <h4>Comparation</h4>\\n  <ui:tag tag=\\\"TTTStats\\\" ui:ref=\\\"stat\\\" handler=\\\"->ustore.reset\\\" players={:players} cross=\\\"<- ustore.cross\\\" circle=\\\"<-ustore.circle\\\" finished=\\\"<- ustore.finished\\\" />\\n  <StatRow cross=\\\"<- stat.cross\\\" crossWin=\\\"<- stat.crossWin\\\" circleWin=\\\"<- stat.circleWin\\\" draw=\\\"<- stat.draw\\\" total=\\\"<- stat.total\\\" circle=\\\"<- stat.circle\\\" />\\n  \\n</component>\";","export class LabyrinthMonitor {\n  init () {\n    return {\n      maxcycle: 5,\n      cycle: 0\n    }\n  }\n\n  setStep (step) {\n    console.log(step)\n    if (this.cycle % this.maxcycle) {\n      if ((this.cycle % this.maxcycle === (this.maxcycle - 1)) && step === this.lifetime) { return }\n      if (step > this.lifetime) {\n        this.cycle += 1\n        setTimeout(() => this.assessAll(), 100)\n      } else {\n        setTimeout(() => this.moveAll(), 5)\n      }\n    }\n  }\n}\n","import { MonteCarloTreeSearch } from '../algorithms/mcts.js'\nimport { MiniMax } from '../algorithms/minimax.js'\n\nexport class PlayerControllerPlayer {\n  init () {\n  }\n\n  setState (game) {\n    // console.log('player')\n    // if (condition) {\n    //   this.handler({ row: 1, col: 2 })\n    // } else {\n\n    // }\n  }\n}\n// MCTS player for TTT\nexport class PlayerControllerMCTS {\n  init () {\n    this.montecarlo = new MonteCarloTreeSearch()\n    this.movesScores = null\n  }\n\n  getBestMove (game) {\n    this.movesScores = MonteCarloTreeSearch.prototype.getMovesScores(game, 1 + game.step % 2)\n    // console.log(this.movesScores)\n    const bestMove = this.movesScores.reduce((acc, cur) => cur.visits > acc.visits ? cur : acc)\n    return bestMove.move\n  }\n\n  setState (game) {\n    console.log('MCTS', this.player, this)\n    if (!game.finished && (this.player === 1 + game.step % 2)) {\n      setTimeout(() => {\n        const bestMove = this.getBestMove(game)\n        this.handler(bestMove)\n      }, 1)\n    }\n  }\n}\n// Random player\nexport class PlayerControllerRandom {\n  init () {\n  }\n\n  setState (game) {\n    console.log('Random', this.player, game)\n    if (!game.finished && (this.player === 1 + game.step % 2)) {\n      setTimeout(() => {\n        const randomMove = this.randomMove(game)\n        // console.log(randomMove)\n        if (randomMove) {\n          this.handler(randomMove)\n        }\n      }, 1)\n    }\n  }\n\n  randomMove (game) {\n    const availableMoves = game.getAvailableMoves()\n    const randId = Math.floor(Math.random() * availableMoves.length)\n    return availableMoves[randId]\n  }\n}\n\n// MiniMax player\nexport class PlayerControllerMiniMax {\n  init () {\n  }\n\n  assess (game) {\n    switch (game.finished) {\n      case 1:\n        return 1000\n\n      case 2:\n        return -1000\n\n      default:\n        return 0\n    }\n  }\n\n  setState (game) {\n    // console.log('MiniMax', this.player, game)\n    if (!game.finished && (this.player === 1 + game.step % 2)) {\n      setTimeout(() => {\n        const bestMove = this.getBestMove(game)\n        if (bestMove) {\n          this.handler(bestMove)\n        }\n      }, 1)\n    }\n  }\n\n  getBestMove (game, depth = 4) {\n    const minimax = new MiniMax(this.assess)\n    const answ = minimax.pruningSearch(game, depth, game.step % 2 === 0, -10000, 10000, true)\n    const sameValueMoves = []\n    answ.moveAssessment.forEach(element => {\n      if (element.value === answ.bestValue) {\n        sameValueMoves.push(element)\n      }\n    })\n    if (sameValueMoves.length > 1) {\n      const randId = Math.floor(Math.random() * sameValueMoves.length)\n      return sameValueMoves[randId].move\n    }\n    return answ.bestMove\n  }\n}\n","export default {\n  top: {\n    title: 'TicTacToe',\n    sitemap: [\n      { id: 'main', name: 'Info', icon2: 'home' },\n      { id: 'tictactoe', name: 'TicTacToe', icon: 'work' },\n      { id: 'ulttictactoe', name: 'UltimateTicTacToe', icon: 'work' },\n      { id: 'labyrinth', name: 'Labyrinth', icon: 'work' }\n    ]\n  },\n  gameStates: {\n    gameWinner: ['Red won', 'White won', 'Draw'],\n    gameTurn: ['Red turn', 'White turn']\n  },\n  playersTTT: [\n    { id: 0, name: 'Person', type: 'Person' },\n    { id: 1, name: 'MCTS', type: 'MCTS' },\n    { id: 2, name: 'Random', type: 'Random' },\n    { id: 3, name: 'MiniMax', type: 'MiniMax' }\n  ],\n  playersUTTT: [\n    { id: 0, name: 'Person', type: 'Person' },\n    { id: 1, name: 'MCTS', type: 'MCTS' },\n    { id: 2, name: 'Random', type: 'Random' }\n    // { id: 3, name: 'MiniMax', type: 'MiniMax' }\n  ]\n}\n","/* eslint-disable space-before-function-paren */\nimport { NEAT } from '../algorithms/neat.js'\nimport { Labyrinth } from '../games/labyrinth.js'\nfunction reset() {\n  const size = 100\n  return {\n    size,\n    toEvolve: 16,\n    neat: new NEAT({ size, inNum: 5, outNum: 2 }),\n    game: new Labyrinth(size),\n    step: 0,\n    lifetime: 200,\n    maxcycle: 351,\n    cycle: 0,\n    newgoalcycles: 3,\n    maxlifetime: 100,\n    cyclesltconst: 2,\n    addlt: 10\n  }\n}\n\nexport class LabyrinthStore {\n  init() {\n    console.log = () => {}\n    return {\n      ...reset()\n    }\n  }\n\n  get individuals() {\n    const array = this.neat.population.individuals.map((element, i) => ({ id: i, value: element }))\n    return array\n  }\n\n  get players() {\n    // const array = this.game.players.map((element, i) => ({ id: i, value: element }))\n    // console.log(array)\n    return this.game.players\n  }\n\n  get bestplayer() {\n    // const array = this.game.players.map((element, i) => ({ id: i, value: element }))\n    // console.log(array)\n    return this.game.bestPlayer\n  }\n\n  get goal() {\n    return this.game.goal\n  }\n\n  move(player, individual) {\n    // const args = [player.x, player.y, player.xVel, player.yVel, player.predictDistance() - player.distance, player.distance]\n    const args = [player.xVel, player.yVel, player.getDiractionX(), player.getDiractionY(), player.distance]\n    const direction = individual.evaluate(args)\n    return player.move(direction)\n  }\n\n  moveAll() {\n    for (let i = 0; i < this.size; i++) {\n      const player = this.game.players[i]\n      const individual = this.neat.population.individuals[i]\n      // const args = [player.x, player.y, player.distance]\n      // const direction = individual.evaluate(args)\n      // this.game.players[i] = player.move(direction)\n      this.game.players[i] = this.move(player, individual)\n    }\n    // if (this.neat.population.best.id) {\n    this.game.bestPlayer = this.move(this.game.bestPlayer, this.neat.population.best)\n    // }\n    this.game.players = [...this.game.players]\n    return { ...this, step: this.step + 1 }\n  }\n\n  scoreAll() {\n    for (let i = 0; i < this.size; i++) {\n      const individual = this.neat.population.individuals[i]\n      individual.setScore(this.game.players[i].score)\n    }\n    this.neat.population.best.setScore(this.game.bestPlayer.score)\n  }\n\n  evolve() {\n    this.scoreAll()\n    console.log(this)\n    this.neat.population.evolvePopulation(this.toEvolve)\n\n    this.game.reset(this.cycle % this.newgoalcycles)\n    if (!(this.cycle % this.newgoalcycles)) {\n      this.lifetime = Math.min(this.lifetime, 500)\n    }\n    // if (!(this.cycle % this.cyclesltconst)) {\n    //   this.lifetime = Math.min(this.lifetime + this.addlt, this.maxlifetime)\n    // }\n\n    return { ...this, step: 0, cycle: this.cycle + 1 }\n  }\n\n  onEvolve() {\n    return this.evolve()\n  }\n\n  onMoveall() {\n    return this.moveAll()\n  }\n\n  onCycle() {\n    this.cycle += 1\n    return this.moveAll()\n  }\n\n  onMaxcycle({ value }) {\n    this.maxcycle = parseInt(value)\n    return this\n  }\n\n  onLifetime({ value }) {\n    this.lifetime = parseInt(value)\n    return this\n  }\n\n  onMaxlifetime({ value }) {\n    this.maxlifetime = parseInt(value)\n    return this\n  }\n\n  onCyclesltconst({ value }) {\n    this.cyclesltconst = parseInt(value)\n    return this\n  }\n\n  onAddlt({ value }) {\n    this.addlt = parseInt(value)\n    return this\n  }\n\n  onNewgoalcycles({ value }) {\n    this.newgoalcycles = parseInt(value)\n    return this\n  }\n\n  onReset(_, { game }) {\n    return {\n      ...reset()\n    }\n  }\n\n  onChangegame({ type }) {\n    if (type === 2) {\n      return this.game2()\n    }\n    return {\n      ...reset()\n    }\n  }\n\n  game1() {\n    return {\n      ...reset(),\n      game: new Labyrinth(this.size)\n    }\n  }\n\n  game2() {\n    return {\n      ...reset(),\n      lifetime: 300,\n      game: new Labyrinth(\n        this.size,\n        () => (Math.random() < 0.5 ? 100 : 300),\n        () => (Math.random() < 0.5 ? 200 : 400),\n        { x: 200, y: 300, dx: 75, dy: 50 }\n      )\n    }\n  }\n};\n","/* eslint-disable space-before-function-paren */\nimport { TTT } from '../games/ttt.js'\n\nfunction reset() {\n  return {\n    game: new TTT()\n  }\n}\n\nexport class TTTStore {\n  init() {\n    return {\n      ...reset(),\n      cross: 'Person',\n      circle: 'Random'\n    }\n  }\n\n  getBoard() {\n    return this.game.board.data\n  }\n\n  getFinished() {\n    return this.game.finished\n  }\n\n  getStep() {\n    return this.game.step\n  }\n\n  getState() {\n    return this.game\n  }\n\n  onRef() {\n    return this\n  }\n\n  onSwitch({ player, type }) {\n    if (player === 1) {\n      return {\n        ...this,\n        ...reset(),\n        cross: type\n      }\n    } else {\n      return {\n        ...this,\n        ...reset(),\n        circle: type\n      }\n    }\n  }\n\n  currentPlayer() {\n    const player = 1 + this.game.step % 2\n    return player === 1 ? this.cross : this.circle\n  }\n\n  onStep({ col, row, value }, { game }) {\n    if (this.currentPlayer() === 'Person') {\n      if (!value) {\n        game = game.makeMove({ col, row })\n        return { game }\n      }\n    }\n  }\n\n  onMakeMoveOutside (cell) {\n    // test without this\n    this.game = this.game.makeMove(cell)\n    return { ...this }\n  }\n\n  // setBoard(v) {\n  //   this.board = v\n  // }\n\n  onReset(_, { game }) {\n    return reset()\n  }\n};\n","/* eslint-disable space-before-function-paren */\nimport { UTTT } from '../games/uttt.js'\nimport { MonteCarloTreeSearch } from '../algorithms/mcts.js'\n\nfunction reset() {\n  return {\n    game: new UTTT()\n  }\n}\n\nexport class UTTTStore {\n  init() {\n    // console.log('bruh', this)\n    return {\n      ...reset(),\n      cross: 'Person',\n      circle: 'MCTS'\n    }\n  }\n\n  getBoard() {\n    return this.game.board.data\n  }\n\n  getFinished() {\n    return this.game.finished\n  }\n\n  getStep() {\n    return this.game.step\n  }\n\n  getState() {\n    return this.game\n  }\n\n  onRef() {\n    return this\n  }\n\n  currentPlayer() {\n    const player = 1 + this.game.step % 2\n    return player === 1 ? this.cross : this.circle\n  }\n\n  onStepcell({ col, row, subcol, subrow, value }, { game }) {\n    if (this.currentPlayer() === 'Person') {\n      if (!value) {\n        // console.log(game)\n        game = game.makeMove({ col, row, subcol, subrow })\n        // console.log(game)\n        return { ...this, game }\n      }\n    }\n  }\n\n  onMakeMoveOutside (cell) {\n    this.game = this.game.makeMove(cell)\n    return { ...this }\n  }\n\n  onSwitch({ player, type }) {\n    if (player === 1) {\n      return {\n        ...this,\n        cross: type\n      }\n    } else {\n      return {\n        ...this,\n        circle: type\n      }\n    }\n  }\n\n  onReset(_, { board }) {\n    return reset()\n  }\n\n  onMctsrequest() {\n    return this.mctsrequest(this)\n  }\n\n  onToggleai({ state }) {\n    this.toggledAI = state\n    if (state === 1 + this.step % 2) {\n      return this.mctsrequest(this)\n    }\n  }\n\n  mctsrequest (state) {\n    if (!this.montecarlo) {\n      this.montecarlo = new MonteCarloTreeSearch()\n    }\n    // console.log(this.copy())\n    if (!this.finished) {\n      return this.montecarlo.findNextmove(this.copy(), 1 + state.step % 2)\n    }\n  }\n  // onStepcell(cell, game) {\n  //   if (this.toggledAI) {\n  //     if (this.toggledAI !== 1 + game.step % 2) {\n  //       const nextState = this.makeMove(cell, game)\n  //       return { ...nextState, '...': Promise.resolve(this.mctsrequest(nextState)) }\n  //     }\n  //   }\n  //   return this.makeMove(cell, game)\n  // }\n};\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export * from './lib'\n","import { parseValue } from './utils'\n\nconst RE_SINGLE_PLACEHOLDER = /^\\{([^}]+)\\}$/\nconst RE_PLACEHOLDER = /\\{([^}]+)\\}/g\n\nfunction pipe (value, key) {\n  const [id, ...args] = key.split(':')\n  try {\n    const fn = this.pipes(id)\n    const $ = this\n    return fn.apply($.impl, [value, ...args.map(a => a[0] === '@' ? $.container.get(a.slice(1)) : parseValue(a))])\n  } catch (ex) {\n    console.error('ERROR: pipe ' + id, ex)\n    return value\n  }\n}\n\nexport function withPipes (pipes) {\n  return !pipes.length ? (c, v) => v : (c, initialValue) => pipes.reduce((r, pk) => pipe.call(c, r, pk), initialValue)\n}\n\nfunction stringInterpolation (v, fnx = []) {\n  const pattern = v.replace(RE_PLACEHOLDER, (_, expr) => { fnx.push(placeholder(expr)); return '{{' + (fnx.length - 1) + '}}' })\n  return c => !fnx.length ? pattern : pattern.replace(/\\{\\{(\\d+)\\}\\}/g, (s, idx) => {\n    const r = fnx[idx](c)\n    return !r && r !== 0 ? '' : r\n  })\n}\n\nfunction resourceExpression (expr) {\n  const [key, ...pipes] = expr.split('|').map(s => s.trim())\n  const intrpltn = stringInterpolation(key)\n  return !pipes.length ? c => c.res(intrpltn(c)) : (pipec => c => pipec(c, c.res(intrpltn(c))))(withPipes(pipes))\n}\n\nfunction placeholder (expr) {\n  const [key, ...pipes] = expr.split('|').map(s => s.trim())\n  const fn = key[0] === ':' ? c => c.res(key.slice(1)) : c => c.container.get(key)\n  if (!pipes.length) return fn\n  return c => pipes.reduce((r, pk) => pipe.call(c, r, pk), fn(c))\n}\n\nexport function compileExpression (v) {\n  if (typeof v !== 'string') { return () => v }\n  if (v[0] === ':') { return resourceExpression(v.slice(1).trim()) }\n  if (!v.includes('{')) { const vv = parseValue(v); return () => vv }\n  if (v.match(RE_SINGLE_PLACEHOLDER)) { return placeholder(v.slice(1, -1).trim()) }\n  return stringInterpolation(v)\n}\n","import { Node } from './node'\nimport { compileExpression } from './compile.expr'\nimport { parseXML } from './xml.js'\nimport { filterMapKey, hasSlot, wrapNode } from './utils'\n\nexport const compiledNodeMap = nodes => nodes ? nodes.map(compileNode).reduce((map, node) => map.set(node.uid, node), new Map()) : null\n\nexport function compileFor (r) {\n  const [itemName, prep, expr = prep] = r.extractAttr('ui:for').split(' ')\n  return compileNode(new Node(\n    'ui:for',\n    new Map([['items', '{:<'.includes(expr[0]) ? expr : `{${expr}}`]]),\n    [new Node(\n      'ui:item',\n      new Map([['itemName', itemName]]),\n      [r]\n    )]))\n}\n\nexport function compileIf (r) {\n  const { tag, nodes } = r\n  const [expr, attrs] = filterMapKey(r.attrs, 'ui:if')\n  const iff = {}\n  const ifNode = new Node('ui:fragment')\n  if (expr[0] === '<' && expr[1] === '-') {\n    ifNode.addPropertyConnector(expr, condition => ({ condition }))\n  } else if ((expr.slice(0, 5) === 'slot(')) {\n    ifNode.addPropertyResolver((slotId => c => hasSlot(c, slotId))(expr.slice(5, -1)), 'condition')\n  } else {\n    ifNode.addPropertyResolver(compileExpression(expr[0] === '{' ? expr : `{${expr}}`), 'condition')\n  }\n  const $then = new Node(tag, attrs, nodes)\n  if (nodes && nodes.length) {\n    const ifElse = nodes.find(e => e.tag === 'ui:else')\n    const ifThen = nodes.find(e => e.tag === 'ui:then')\n    if (ifElse) {\n      iff.else = compiledNodeMap(ifElse.nodes)\n      $then.nodes = ifThen ? ifThen.nodes : nodes.filter(e => e !== ifElse)\n    } else if (ifThen) {\n      $then.nodes = ifThen.nodes\n    }\n  }\n  iff.then = compiledNodeMap([$then])\n  return Object.assign(ifNode, {\n    getNodes: ($) => $.state.condition ? iff.then : iff.else\n  })\n}\n\nexport function compileTag (r) {\n  const { uid: uid0, nodes } = r\n  const [expr, attrs] = filterMapKey(r.attrs, 'tag')\n  const node = compileRegularNode(new Node('', attrs, nodes))\n  if (expr[0] === '<' && expr[1] === '-') {\n    r.addPropertyConnector(expr, tag => ({ tag }))\n  } else {\n    r.addPropertyResolver(compileExpression(expr), 'tag')\n  }\n  return Object.assign(r, {\n    tag: 'ui:fragment',\n    getNodes: ($, tag = $.state.tag, uid = uid0 + ':' + tag) => wrapNode(Object.assign(node, { tag, uid }))\n  })\n}\n\nexport function compileRegularNode (r) {\n  r.attrs.forEach((v, k) => {\n    if (k === 'id') {\n      r.id = v\n      r.addInitialState({ [k]: v })\n    } else if (k === 'ui:ref') {\n      r.refId = v\n    } else if (k === 'ui:props') {\n      if (v[0] === '<' && v[1] === '-') {\n        r.addPropertyConnector(v, Function.ID)\n      } else {\n        r.addPropertyResolver(compileExpression(v))\n      }\n    } else {\n      if (typeof v !== 'string') {\n        r.addInitialState({ [k]: v })\n      } else {\n        if (v[0] === '<' && v[1] === '-') {\n          r.addPropertyConnector(v, rr => ({ [k]: rr }))\n        } else if (v[0] === '-' && v[1] === '>') {\n          r.addEmitter(v, k)\n        } else {\n          if (!v.includes('{') && v[0] !== ':') {\n            r.addInitialState({ [k]: v })\n          } else {\n            r.addPropertyResolver(compileExpression(v), k)\n          }\n        }\n      }\n    }\n  })\n  return Object.assign(r, {\n    nodeMap: compiledNodeMap(r.nodes)\n  })\n}\nexport function compileNode (node) {\n  if (node.attrs.has('ui:for')) { return compileFor(node) }\n  if (node.attrs.has('ui:if')) { return compileIf(node) }\n  if (node.tag === 'ui:tag') { return compileTag(node) }\n  return compileRegularNode(node)\n}\n\nexport function compileTemplate (text, name) {\n  try {\n    const T = compiledNodeMap(text ? parseXML(text, name).nodes : [])\n    return T\n  } catch (ex) {\n    // eslint-disable-next-line no-console\n    console.error('compile ' + name, ex)\n  }\n  return []\n}\n","/* eslint-disable no-console */\nimport { applyValue, nextId, propGetter, upAsync, res, pipes, methodName } from './component.utils'\nimport {\n  setNodeMap,\n  stringifyComponent,\n  filterSlotNodes\n} from './utils.js'\nimport { getByTag } from './register.js'\nimport { Element } from './element'\n\n/**\n * Component class.\n */\nclass Component {\n  constructor (Ctor, node, parent, container) {\n    Object.assign(this, { node, uid: node.uid, tag: node.tag, id: node.id, state: {}, parent, container })\n    if (parent) {\n      this.parent = parent\n      this.app = parent.app\n      this.impl = new Ctor(this.getInitialState(), this)\n    } else {\n      this.impl = this.app = new Ctor(this.getInitialState(), this)\n    }\n    this.impl.$ = this\n\n    if (this.refId) {\n      const hidden = this.app[this.refId]\n      this.app[this.refId] = this\n      this.defer(() => {\n        this.app[this.refId] = hidden\n      })\n    }\n  }\n\n  get refId () {\n    return this.node.refId\n  }\n\n  getInitialState () {\n    return this.node.resolveProps(this, true)\n  }\n  // --- State\n\n  up (Î” = {}, force) {\n    if (this.isDone) {\n      return null\n    }\n    if (Î”.then && Î”.catch) {\n      return upAsync(this, Î”)\n    }\n\n    const changes = []\n    Object.entries(Î”).forEach(([k, v]) => {\n      if (v && v.then && v.catch) {\n        upAsync(this, v, k)\n      } else if (k && typeof v !== 'undefined' && v !== this.state[k]) {\n        changes.push([v, k])\n        this.state[k] = v\n      }\n    })\n\n    if (changes.length || force) {\n      if (this.impl.stateChanged) {\n        this.impl.stateChanged(changes)\n      } else {\n        changes.forEach(([v, k]) => {\n          const setter = this.impl[methodName(k, 'set')]\n          if (setter) {\n            setter.call(this.impl, v)\n          } else {\n            this.impl[k] = v\n          }\n        })\n      }\n      this.recontent()\n      if (this.refId) {\n        this.notify()\n      }\n    }\n  }\n\n  get (propId) {\n    return propGetter(this, propId)()\n  }\n\n  // --- Left Arrow.\n\n  notify () {\n    if (this.listeners && !this.notifying) {\n      this.notifying = true\n      this.listeners.forEach((e) => e())\n      this.notifying = false\n    }\n  }\n\n  subscribe (target, fn) {\n    const uuid = nextId()\n    const listeners = this.listeners || (this.listeners = new Map())\n    listeners.set(uuid, () => {\n      try {\n        target.up(fn(this))\n      } catch (ex) {\n        console.error(this.tag + this.uid + ' notify ', ex)\n      }\n    })\n    return { payload: fn(this), cancel: () => listeners.delete(uuid) }\n  }\n\n  connect (key, applicator) {\n    const [refId, propId] = key.split('.')\n    const ref = refId === 'this' ? this.impl : this.app[refId]\n    if (!ref) {\n      return console.error('connect: No such ref ' + refId, key)\n    }\n\n    return ref.subscribe(this, (c) => applyValue(c.get(propId), applicator))\n  }\n\n  // --- Right Arrow.\n\n  emit (key, data) {\n    const $ = this\n\n    if (!key || !key.includes('.')) {\n      return $.up(key ? { [key]: data } : data)\n    }\n\n    const [type, target] = key.split('.')\n    // const event = { data, ...data }\n\n    const ref = type === 'this' ? $ : $.app[type]\n    if (!ref) {\n      console.warn('emit: No such ref ' + type)\n      return\n    }\n\n    try {\n      const propId = methodName(target, 'on')\n      const impl = ref.impl\n      const method = impl[propId]\n\n      if (!method) { Function.throw('emit ' + type + ': No such method ' + propId) }\n\n      const result = method.call(impl, data, impl, ref)\n\n      this.log(type + ':' + propId, result, data, impl)\n      if (result) {\n        ref.up(result)\n      }\n    } catch (ex) {\n      console.error('emit ' + key + ':', ex)\n    }\n  }\n\n  // --- Life-cycle hooks.\n\n  init (initials) {\n    if (this.isDone || this.isInited) {\n      return\n    }\n    this.isInited = true\n    const all = []\n    const initializers = this.node.initializers\n    if (initializers && initializers.length) {\n      initializers\n        .map((f) => f(this))\n        .forEach((r) => {\n          if (!r) return\n          const { payload, cancel } = r\n          this.defer(cancel)\n          if (payload && payload.then) {\n            all.push(payload)\n          } else {\n            Object.assign(initials, payload)\n          }\n        })\n    }\n\n    if (all.length) {\n      Promise.all(all).then((args) => {\n        this.up(args.reduce((r, e) => Object.assign(r, e), initials), true)\n        if (this.impl.init) {\n          const d = this.impl.init(this)\n          if (d) {\n            this.up(d)\n          }\n        }\n      })\n    } else {\n      this.up(initials, true)\n      if (this.impl.init) {\n        const d = this.impl.init(this)\n        if (d) {\n          this.up(d)\n        }\n      }\n    }\n    return this\n  }\n\n  done () {\n    if (this.isDone) {\n      return\n    }\n    this.isDone = true\n    if (this.impl.done) {\n      this.impl.done(this)\n    }\n    if (this.children) {\n      this.children.forEach((c) => {\n        c.parent = null\n        c.done()\n      })\n    }\n    if (this.parent) {\n      this.parent.children.delete(this.uid)\n    }\n    if (this.defered) {\n      this.defered.forEach((f) => f(this))\n      delete this.defered\n    }\n    this.impl.$ = null;\n    ['parent', 'app', 'children', 'container', 'impl', 'state'].forEach((k) => {\n      delete this[k]\n    })\n  }\n\n  // --- Routines.\n\n  raceCondition (key) {\n    const COUNTERS = this.$weak || (this.$weak = new Map())\n    let counter = 1 + (COUNTERS.get(key) || 0)\n    COUNTERS.set(key, counter)\n    return (fn) => {\n      if (counter === COUNTERS.get(key)) {\n        counter = 0\n        fn()\n      }\n    }\n  }\n\n  defer (fn) {\n    if (fn && typeof fn === 'function') {\n      (this.defered || (this.defered = [])).push(fn)\n    }\n  }\n\n  log (...args) {\n    console.log('' + this.tag + '@' + this.uid, ...args)\n  }\n\n  res (key) {\n    return res(this.app, key)\n  }\n\n  pipes (key) {\n    return pipes(this.app, key)\n  }\n\n  toString () {\n    return stringifyComponent(this)\n  }\n\n  // --- Content Reconciliation.\n\n  get content () {\n    return this.node.getNodes ? this.node.getNodes(this) : this.node.nodeMap\n  }\n\n  recontent () {\n    recontent(this, this.container, this.content)\n  }\n}\n\nfunction recontent (parent, container, content) {\n  parent.last = parent.first = null\n\n  container.app.requestReflow();\n\n  (parent.children || Array.EMPTY)\n    .forEach((c) => (!content || !content.has(c.uid) ? c.done() : 0))\n\n  if (!content || !content.size) return\n  const children = parent.children || (parent.children = new Map())\n  let p = null\n\n  content.forEach((node, uid) => {\n    let c = null\n    if (node.tag === 'ui:slot') {\n      const snode = node.clone(node.uid)\n      snode.id = node.id\n      snode.nodeMap = filterSlotNodes(node.id, container)\n      c = children.get(uid) || setNodeMap(children, new Component(getByTag('ui:fragment'), snode, parent, container.container))\n    } else {\n      c = children.get(uid)\n      if (!c) {\n        const Registered = getByTag(node.tag)\n        const Ctor = Ctors[node.tag] || (Registered ? ContainerComponent : Component)\n        c = setNodeMap(children, new Ctor(Registered || Element, node, parent, container))\n      }\n    }\n    c.next = null\n    p = (p || parent)[p ? 'next' : 'first'] = c\n  })\n\n  children.forEach((c) => !c.isInited ? c.init(c.node.resolveProps(c, true)) : c.up(c.node.resolveProps(c, false), true))\n}\n\nexport class ContainerComponent extends Component {\n  recontent () {\n    recontent(this, this, this.impl.constructor.getTemplate())\n  }\n}\n\nclass ForComponent extends Component {\n  recontent () {\n    const nodes = new Map()\n    const { items } = this.state\n    if (items && items.length) {\n      if (!items.forEach) { Function.throw('[ui:for] Items has no forEach() ' + items) }\n      const itemNode = this.node.nodes[0]\n      const itemName = itemNode.get('itemName')\n      this.pkHash = {}\n      items.forEach((datum) => {\n        const pk = `${datum.id || ''}`\n        if (pk == null || this.pkHash[pk]) {\n          console.error('ERROR: empty/duplicate item id: ' + pk, datum)\n          return\n        }\n        this.pkHash[pk] = datum\n        setNodeMap(\n          nodes,\n          itemNode\n            .clone(this.uid + '#' + pk)\n            .addPropertyResolver(() => this.pkHash[pk], itemName)\n        )\n      })\n    }\n    recontent(this, this.container, nodes)\n  }\n}\n\nclass ItemComponent extends Component {\n  recontent () {\n    recontent(this, this, this.content)\n  }\n\n  emit (key, data) {\n    return this.container.emit(key, data)\n  }\n\n  get (propId) {\n    return propId.startsWith(this.state.itemName) ? super.get(propId) : this.container.get(propId)\n  }\n}\n\nconst Ctors = {\n  'ui:fragment': Component,\n  'ui:for': ForComponent,\n  'ui:item': ItemComponent\n}\n","let COUNTER = 1\nconst fnId = e => e\nexport const nextId = (p = '') => p + (COUNTER++)\nexport const applyValue = (value, fn = fnId) => value && value.then ? value.then(fn) : fn(value)\n\nexport const methodName = (x, pre = '') => {\n  if (!x) { return pre }\n  const s = `${x}`\n  return pre + s[0].toUpperCase() + s.slice(1)\n}\n\nexport const upAsync = ($, promise, key) => {\n  const racer = $.raceCondition('set:' + (key || 'up'))\n  const up = r => racer(() => $.up(r))\n  if (key && key !== '...') {\n    const akey = key.replace('Promise', '')\n    promise.then(val => up({ [akey + 'Error']: null, [akey]: val }), error => up({ [akey + 'Error']: error }))\n  } else {\n    promise.then(up, error => up({ error }))\n  }\n  return promise\n}\n\nexport const propGetter = ($, key) => {\n  const map = $.$propFnMap || ($.$propFnMap = {})\n  let fn = map[key]\n  if (fn) { return fn }\n\n  const impl = $.impl\n  const instant = impl[key]\n  if (instant && (typeof instant === 'function')) {\n    const bound = instant.bind(impl)\n    fn = () => bound\n  } else {\n    const [pk, ...path] = key.split('.')\n    const gettr = impl[methodName(pk, 'get')]\n\n    const fn0 = gettr\n      ? () => gettr.call(impl)\n      : () => impl[pk]\n\n    fn = !path.length\n      ? fn0\n      : () => path.reduce((r, p) => (r && (p in r) ? r[p] : undefined), fn0())\n  }\n\n  map[key] = fn\n\n  return fn\n}\n\nexport const res = (app, key) => {\n  const [id, ...deep] = key.split('.')\n  const target = id === 'app' ? app : app.resources[id]\n  if (!target || deep.length === 0) {\n    return target\n  }\n  if (deep.length === 1) {\n    return target[deep[0]]\n  }\n  return deep.reduce((r, k) => r ? r[k] : null, target)\n}\n\nexport const pipes = (app, key) => {\n  const [id, ...deep] = key.split('.')\n  const target = app.pipes && app.pipes[id]\n  if (!target || deep.length === 0) {\n    return target\n  }\n  if (deep.length === 1) {\n    return target[deep[0]]\n  }\n  return deep.reduce((r, k) => r ? r[k] : null, target)\n}\n","const camelize = (key, sep = '_', jn = ' ') => ('' + key).split(sep).map((s, i) => i ? s[0].toUpperCase() + s.slice(1) : s).join(jn)\n\n// DOM\nconst ATTR_SETTERS = {\n  '#text': (e, v) => (e.textContent = v == null ? '' : v),\n  disabled: (e, v) => (e.disabled = v ? true : null),\n  class: (e, v) => {\n    e.className = v\n  },\n  selected: (e, v) => (e.selected = v ? true : null),\n  value: (e, v) => (e.value = v == null ? '' : v),\n  checked: (e, v) => (e.checked = !!v),\n  init: function (e, v) {\n    this.init = () => v(e, this)\n  },\n  data: function (e, v) {\n    if (v && e.$dataset) {\n      Object.keys(e.$dataset).forEach(k => { if (v[k] == null) { e.dataset[camelize(k, '-', '')] = null } })\n      e.$dataset = { ...e.$dataset, ...v }\n    } else {\n      e.$dataset = v ? { ...v } : (e.$dataset || {})\n    }\n    if (v) {\n      Object.keys(v).forEach(k => { e.dataset[camelize(k, '-', '')] = v[k] })\n    }\n  },\n  click: function (e, v) {\n    setAttribute.call(this, 'click:click', !v ? null : (ev) => {\n      this.$attributes.click({ ...e.$dataset }, ev)\n      return false\n    })\n  },\n  'bubble-click': function (e, v) {\n    setAttribute.call(this, 'bubbled-click:click', !v ? null : (ev) => {\n      this.$attributes['bubble-click']({ ...e.$dataset }, ev)\n      return true\n    })\n  },\n  blur: function (e, v) {\n    setAttribute.call(this, 'blur:blur', !v ? null : (ev) => {\n      this.$attributes.blur({ ...e.$dataset }, ev)\n      return false\n    })\n  },\n  dblclick: function (e, v) {\n    setAttribute.call(this, 'dblclick:dblclick', !v ? null : (ev) => {\n      this.$attributes.dblclick({ ...e.$dataset }, ev)\n      return false\n    })\n  },\n  scroll: function (e, v) {\n    setAttribute.call(this, 'scroll:scroll', !v ? null : (ev) => {\n      this.$attributes.scroll({ ...e.$dataset }, ev)\n      return false\n    })\n  },\n  touchstart: function (e, v) {\n    const h = !v ? null : (ev) => {\n      this.$attributes.touchstart({\n        ...e.$dataset,\n        x: ev.pageX || ev.changedTouches[0].screenX,\n        y: ev.pageY || ev.changedTouches[0].screenY\n      }, ev)\n      return false\n    }\n    setAttribute.call(this, 'touchstart:touchstart', h)\n    setAttribute.call(this, 'touchstart:mousedown', h)\n  },\n  touch: function (e, v) {\n    const data = { ...e.$dataset }\n    const hs = !v ? null : (ev) => {\n      data.active = true\n      data.x = ev.pageX || ev.changedTouches[0].screenX\n      data.y = ev.pageY || ev.changedTouches[0].screenY\n      return false\n    }\n    setAttribute.call(this, 'touch:touchstart', hs)\n    setAttribute.call(this, 'touch:mousedown', hs)\n    const h = !v ? () => null : stop => (ev) => {\n      if (data.active) {\n        data.active = !stop\n\n        data.xx = ev.pageX || ev.changedTouches[0].screenX\n        data.yy = ev.pageY || ev.changedTouches[0].screenY\n        data.dx = data.xx - data.x\n        data.dy = data.yy - data.y\n        this.$attributes.touch(data, ev)\n      }\n\n      return false\n    }\n    setAttribute.call(this, 'touch:touchcancel', h(true))\n    setAttribute.call(this, 'touch:touchend', h(true))\n    setAttribute.call(this, 'touch:mouseup', h(true))\n    setAttribute.call(this, 'touch:touchmove', h(false))\n    setAttribute.call(this, 'touch:mousemove', h(false))\n  },\n  error: function (e, v) {\n    setAttribute.call(this, 'error:error', !v ? null : (ev) => {\n      const fn = this.getAttribute('error')\n      fn && fn({ ...e.$dataset }, ev)\n      return false\n    })\n  },\n  keypress: function (e, v) {\n    setAttribute.call(this, 'keypress:keyup', !v ? null : (ev) => {\n      if (ev.keyCode !== 13 && ev.keyCode !== 27) {\n        const fn = this.$attributes.keypress\n        fn && fn({ value: e.value, ...e.$dataset }, ev)\n        setTimeout(() => e.focus(), 0)\n      }\n      return false\n    })\n  },\n  enter: function (e, v) {\n    setAttribute.call(this, 'enter:keyup', !v ? null : (ev) => {\n      if (ev.keyCode === 13) {\n        this.$attributes.enter({ value: e.value, ...e.$dataset }, ev)\n      }\n      if (ev.keyCode === 13 || ev.keyCode === 27) {\n        e.blur()\n      }\n      return false\n    })\n  },\n  change: function (e, v) {\n    setAttribute.call(this, 'change:change', !v ? null : (ev) => {\n      this.$attributes.change({ value: e.value, ...e.$dataset }, ev)\n      return false\n    })\n  },\n  toggle: function (e, v) {\n    setAttribute.call(this, 'toggle:change', !v ? null : (ev) => {\n      this.$attributes.toggle({ value: e.checked, ...e.$dataset }, ev)\n      return false\n    })\n  }\n}\n\nexport function applyAttributes (changes, attrs = this.$attributes || (this.$attributes = {})) {\n  const e = this.elt\n  changes.forEach(([value, key]) => {\n    if (value !== attrs[key]) {\n      const setter = ATTR_SETTERS[key]\n      if (setter) {\n        setter.call(this, e, value)\n      } else if (key.slice(0, 5) === 'data-') {\n        ATTR_SETTERS.data.call(this, e, {\n          ...e.$dataset,\n          [key.slice(5)]: value\n        })\n      } else {\n        setAttribute.call(this, key, value)\n      }\n    }\n    attrs[key] = value\n  })\n}\n\nexport function cleanupAttributes () {\n  this.$attributes = null\n}\n\nfunction setAttribute (key, value) {\n  if (value != null) {\n    if (typeof value === 'function') {\n      const fnValue = (...args) => { if (!this.isDone) { value(...args) } }\n      if (!this.listeners) {\n        this.listeners = new Map()\n      }\n      if (!this.listeners.has(key)) {\n        const [akey, ekey = akey] = key.split(':')\n        this.elt.addEventListener(ekey, fnValue, false)\n        this.listeners.set(key, fnValue)\n      }\n    } else {\n      this.elt.setAttribute(key, value)\n    }\n  } else {\n    if (this.listeners && this.listeners.has(key)) {\n      const [akey, ekey = akey] = key.split(':')\n      this.elt.removeEventListener(ekey, this.listeners.get(key))\n      this.listeners.delete(key)\n    } else {\n      this.elt.removeAttribute(key)\n    }\n  }\n}\n","import { applyAttributes, cleanupAttributes } from './dom.attrs'\n\nexport class Element {\n  constructor (attrs, $, elt) {\n    this.$ = $\n    this.$.isElementary = true\n    this.elt = elt || ($.tag === '#text' ? document.createTextNode('') : document.createElement($.tag))\n    this.elt.impl = this\n  }\n\n  done () {\n    this.elt.parentElement && this.elt.parentElement.removeChild(this.elt)\n    cleanupAttributes.call(this)\n    this.elt = null\n  }\n\n  stateChanged (attrs) {\n    applyAttributes.call(this, attrs)\n  }\n}\n","import { ContainerComponent } from './component.js'\nimport { registerTypes } from './register.js'\nimport { Node } from './node'\nimport commonTypes from '../types'\nimport commonPipes from '../pipes'\nimport { arrangeElements } from './utils.js'\n\nexport function launch ({ types, template = '<App/>', rootElement = document.body, pipes, ...props } = {}) {\n  class $AppContext {\n    constructor () {\n      this.elt = rootElement\n      this.app = this\n      this.pipes = { ...commonPipes, ...pipes }\n      this.reflow = () => {\n        arrangeElements(this.$, this.elt)\n        this.reflowId = null\n      }\n    }\n\n    requestReflow () {\n      if (this.reflowId) return\n      this.reflowId = setTimeout(this.reflow, 10)\n    }\n  }\n\n  registerTypes([Object.assign($AppContext, { template }), ...commonTypes, ...types])\n  const top = new ContainerComponent($AppContext, new Node('#top'))\n  top.up(props)\n  return top.impl\n}\n\nif (typeof window === 'object') {\n  window.launch = launch\n}\n","import { withPipes } from './compile.expr'\nimport { decodeXmlEntities, stringifyNode } from './xml.utils'\n\nlet UID = 1\nconst OBJ = {}\n\nexport class Node {\n  constructor (tag, attrs = new Map(), nodes = []) {\n    this.uid = '' + UID++\n    this.tag = tag || ''\n    this.attrs = attrs\n    this.nodes = nodes\n  }\n\n  // --- attrs\n\n  updateAttrs (attrs) {\n    attrs.forEach((v, k) => this.attrs.set(k, v))\n    return this\n  }\n\n  updateAttrsFormObject (obj) {\n    Object.entries(obj).forEach(([k, v]) => this.attrs.set(k, v))\n    return this\n  }\n\n  setAttrs (attrs = []) {\n    this.attrs = attrs\n    return this\n  }\n\n  get (key) {\n    const val = this.attrs.get(key)\n    return val\n  }\n\n  extractAttr (key) {\n    const val = this.get(key)\n    this.attrs.delete(key)\n    return val\n  }\n\n  // --- Nodes\n\n  setNodes (nodes = []) {\n    this.nodes = nodes\n    return this\n  }\n\n  get firstChild () {\n    return this.nodes.values().next\n  }\n\n  addChild (tag, attrs) {\n    const e = new Node(tag, attrs)\n    this.nodes.push(e)\n    return e\n  }\n\n  // ---  text\n\n  setText (text) {\n    this.attrs.set('#text', decodeXmlEntities(text))\n  }\n\n  // --- compiled\n\n  addPropertyResolver (getter, propKey) {\n    (this.$propertyResolvers || (this.$propertyResolvers = [])).push(\n      propKey\n        ? (c, acc) => {\n          acc[propKey] = getter(c)\n        }\n        : (c, acc) =>\n          Object.entries(getter(c) || OBJ).forEach(([key, val]) => {\n            acc[key] = val\n          })\n    )\n    return this\n  }\n\n  addInitialState (values) {\n    const acc = this.initialState || (this.initialState = {})\n    Object.entries(values).forEach(([key, val]) => { acc[key] = val })\n    return this\n  }\n\n  get initializers () {\n    return this.$initializers || (this.$initializers = [])\n  }\n\n  addPropertyConnector (v, getter) {\n    const [key, ...pipes] = v.slice(2).split('|').map(s => s.trim())\n    const pipec = withPipes(pipes)\n    this.initializers.push(c => c.connect(key, rr => (getter(pipec(c, rr)))))\n  }\n\n  addEmitter (v, k) {\n    const [key, ...pipes] = v.slice(2).split('|').map(s => s.trim())\n    const pipec = withPipes(pipes)\n    this.initializers.push(c => ({ payload: { [k]: data => c.container.emit(key, pipec(c, data)) } }))\n  }\n\n  resolveProps (c, isInitial) {\n    let props = this.$propertyResolvers ? this.$propertyResolvers.reduce((r, fn) => { fn(c, r); return r }, {}) : {}\n    const initialState = this.initialState\n    if (isInitial && initialState) {\n      props = { ...initialState, ...props }\n    }\n    if (props.data && initialState && initialState.data) {\n      props.data = { ...initialState.data, ...props.data }\n    }\n    return props\n  }\n\n  // --- utils\n\n  clone (uid, tag = this.tag) {\n    return Object.assign(new Node(tag), {\n      uid,\n      attrs: this.attrs,\n      nodes: this.nodes,\n      nodeMap: this.nodeMap,\n      getNodes: this.getNodes,\n      $propertyResolvers: this.$propertyResolvers ? [...this.$propertyResolvers] : null,\n      initialState: this.initialState ? { ...this.initialState } : null,\n      $initializers: this.$initializers ? [...this.$initializers] : null\n    })\n  }\n\n  toString () {\n    return stringifyNode(this)\n  }\n}\n","import { compileTemplate } from './compile.js'\n\nlet COUNTER = 1\n\nconst nextId = (p = '') => p + (COUNTER++)\n\nconst fnName = ctor => (/^function\\s+([\\w$]+)\\s*\\(/.exec(ctor.toString()) || [])[1] || nextId('$C')\n\nclass Fragment {}\n\nconst REGISTRY = new Map([\n  ['ui:fragment', Fragment],\n  ['ui:for', Fragment],\n  ['ui:item', Fragment],\n  ['ui:slot', Fragment]\n])\n\nconst reg = ctr => {\n  if (typeof ctr === 'string') {\n    ctr.replace(/<component\\sid=\"(.+)\">([\\s\\S]*?)<\\/component>/gm, (_, NAME, TEMPLATE) => reg({ NAME, TEMPLATE }))\n    return\n  }\n  const ctor = typeof ctr === 'function' ? ctr : Object.assign(function () { }, ctr)\n  const name = ctor.NAME || ctor.name || fnName(ctor)\n  const text = ctor.TEMPLATE || ctor.template || ctor.prototype.TEMPLATE\n  ctor.getTemplate = () => (ctor.$template || (ctor.$template = compileTemplate(text, name)))\n  REGISTRY.set(name, ctor)\n}\n\nexport const registerTypes = types => types.forEach(reg)\n\nexport const getByTag = tag => REGISTRY.get(tag)\n","Array.EMPTY = []\nObject.assign(Function, {\n  ID: x => x,\n  next: (COUNTER => (p = '') => p + (COUNTER++))(1),\n  // system\n  throw: (error, ErrorType = Error) => { throw typeof error === 'string' ? new ErrorType(error) : error }\n})\n\nexport const parseValue = (map => value => {\n  if (value && '1234567890+-'.includes(value[0]) && value.length <= 17) {\n    const num = +value\n    return isNaN(num) ? value : num\n  }\n  return value in map ? map[value] : value\n})({\n  true: true,\n  false: false,\n  null: null,\n  undefined\n})\n\nexport const setNodeMap = (map = new Map(), node) => {\n  if (node) {\n    map.set(node.uid, node)\n  }\n  return node\n}\n\nexport const wrapNode = n => new Map([[n.uid, n]])\n\nfunction appendElt (e, p, cursor) {\n  const before = cursor ? cursor.nextSibling : p.firstChild\n  if (!before) {\n    if (p !== e.parentElement) {\n      p.appendChild(e)\n    }\n  } else if (e !== before) {\n    p.insertBefore(e, before)\n  }\n  return e\n}\n\nexport function arrangeElements ($, parent, cursor = null) {\n  for (let p = $.first; p; p = p.next) {\n    if (p.isElementary) {\n      const e = p.impl.elt\n      if (e) {\n        arrangeElements(p, e)\n        cursor = appendElt(e, parent, cursor)\n      }\n    } else {\n      cursor = arrangeElements(p, parent, cursor)\n    }\n  }\n  return cursor\n}\n\nexport const hasSlot = (c, id) => {\n  let r = false\n  const { tag, content } = c.container\n  if (!content) return r\n  if (id && id !== 'default') {\n    content.forEach((e) => { r = r || (e.tag === tag + ':' + id) })\n  } else {\n    content.forEach((e) => { r = r || (e.tag.slice(0, tag.length + 1) !== tag + ':') })\n  }\n  return r\n}\n\nexport const filterMapKey = (src, key) => {\n  const r = new Map()\n  src.forEach((v, k) => { if (k !== key) { r.set(k, v) } })\n  return [src.get(key), r]\n}\n\nconst stringifyAttrs = (attrs) => {\n  if (!attrs) {\n    return ''\n  }\n  const r = []\n  Object.entries(attrs).forEach(([k, v]) => {\n    if (v && k !== '#text') {\n      r.push(' ' + k + '=\"' + (v) + '\"')\n    }\n  })\n  return r.join('')\n}\n\nexport function stringifyComponent ({ uid, tag, state, container, children = new Map() }, tab = '') {\n  const sattrs = stringifyAttrs(state)\n  const ssubs = [...children.values()].map(c => stringifyComponent(c, `  ${tab}`)).join('\\n')\n  const text = state && state['#text']\n  const stext = text ? `  ${tab}${text}` : ''\n  if (tag === '#text') {\n    return stext.trim()\n  }\n  return `${tab}<${tag}#${uid} ${container ? container.uid : '-'}${sattrs}` + (!ssubs && !stext ? '/>' : `>\\n${ssubs}${stext}\\n${tab}</${tag}#${uid}>`)\n}\n\nexport function filterSlotNodes (slotId, container) {\n  const { content, tag } = container\n  if (!content) return null\n  const r = new Map()\n  content.forEach((v) => {\n    if (slotId) {\n      if ((v.tag === tag + ':' + slotId)) {\n        v.nodeMap.forEach(vv => setNodeMap(r, vv))\n      }\n    } else if (v.tag.slice(0, tag.length + 1) !== tag + ':') {\n      setNodeMap(r, v)\n    }\n  })\n  return r\n}\n","import { Node } from './node'\nimport { parseAttrs } from './xml.utils'\n\n// XML Parse for templates. XML -> NodeTree\n\nconst RE_EMPTY = /^\\s*$/\nconst RE_XML_COMMENT = /<!--((?!-->)[\\s\\S])*-->/g\nconst RE_XML_TAG = /(<)(\\/?)([a-zÐ°-Ñ][a-zÐ°-Ñ0-9-:]*)((?:\\s+[a-z][a-z0-9-:]+(?:=\"[^\"]*\"|={[^}]*})?)*)\\s*(\\/?)>/gi\nconst SINGLE_TAGS = 'img input br col'.split(' ').reduce((r, e) => { r[e] = 1; return r }, {})\n\nexport const parseXML = (_s, key) => {\n  const s = ('' + _s).trim().replace(RE_XML_COMMENT, '')\n  const ctx = [new Node()]\n  let lastIndex = 0\n  // head text omitted\n  for (let e = RE_XML_TAG.exec(s); e; e = RE_XML_TAG.exec(s)) {\n    // preceding text\n    const text = e.index && s.slice(lastIndex, e.index)\n    if (text && !text.match(RE_EMPTY)) {\n      ctx[0].addChild('#text').setText(text)\n    }\n    // closing tag\n    if (e[2]) {\n      if (ctx[0].tag !== e[3]) {\n        throw new Error(\n          (key || '') + ' XML Parse closing tag does not match at: ' + e.index +\n                    ' near ' +\n                    e.input.slice(Math.max(e.index - 150, 0), e.index) +\n                    '^^^^' +\n                    e.input.slice(e.index, Math.min(e.index + 150, e.input.length))\n        )\n      }\n      ctx.shift()\n    } else {\n      const sAttrs = e[4].trim()\n      const elt = ctx[0].addChild(e[3], sAttrs ? parseAttrs(sAttrs) : undefined)\n      // not single tag\n      if (!(e[5] || (e[3] in SINGLE_TAGS))) {\n        ctx.unshift(elt)\n        if (ctx.length === 1) {\n          throw new Error('Parse error at: ' + e[0])\n        }\n      }\n    }\n    // up past index\n    lastIndex = RE_XML_TAG.lastIndex\n  }\n  // tail text omitted\n  return ctx[0]\n}\n","import { parseValue } from './utils'\n\nconst RE_ESCAPE_XML_ENTITY = /[\"'&<>]/g\nconst ESCAPE_XML_ENTITY = {\n  34: '&quot;',\n  38: '&amp;',\n  39: '&#39;',\n  60: '&lt;',\n  62: '&gt;'\n}\nconst FN_ESCAPE_XML_ENTITY = m => ESCAPE_XML_ENTITY[m.charCodeAt(0)]\nconst RE_XML_ENTITY = /&#?[0-9a-z]{3,5};/g\n\nconst RE_ATTRS = /([a-z][a-zA-Z0-9-:]+)(=\"[^\"]*\"|={[^}]*})?/g\n\nconst SUBST_XML_ENTITY = {\n  amp: '&',\n  gt: '>',\n  lt: '<',\n  quot: '\"',\n  nbsp: ' '\n}\n\nconst FN_XML_ENTITY = function (_) {\n  const s = _.substring(1, _.length - 1)\n  return s[0] === '#' ? String.fromCharCode(+s.slice(1)) : (SUBST_XML_ENTITY[s] || ' ')\n}\nexport const escapeXml = (s) => !s ? '' : ('' + s).replace(RE_ESCAPE_XML_ENTITY, FN_ESCAPE_XML_ENTITY)\nexport const skipQoutes = (s) => s[0] === '\"' && s[s.length - 1] === '\"' ? s.slice(1, -1) : s\nexport const decodeXmlEntities = (s = '') => s.replace(RE_XML_ENTITY, FN_XML_ENTITY)\n\nexport const parseAttrs = (s, r = new Map()) => {\n  for (let e = RE_ATTRS.exec(s); e; e = RE_ATTRS.exec(s)) {\n    r.set(e[1], !e[2] ? true : parseValue(decodeXmlEntities(skipQoutes(e[2].slice(1)))))\n  }\n  return r\n}\n\nconst stringifyAttrs = (attrs) => {\n  if (!attrs || !attrs.size) {\n    return ''\n  }\n  const r = []\n  attrs.forEach((v, k) => {\n    if (v && k !== '#text') {\n      r.push(' ' + k + '=\"' + escapeXml(v) + '\"')\n    }\n  })\n  return r.join('')\n}\n\nexport function stringifyNode ({ tag, attrs, nodes = [] }, tab = '') {\n  const sattrs = stringifyAttrs(attrs)\n  const ssubs = nodes.map(c => stringifyNode(c, `  ${tab}`)).join('\\n')\n  const text = attrs && attrs.get('#text')\n  const stext = text ? `  ${tab}${escapeXml(text)}` : ''\n  if (tag === '#text') {\n    return stext.trim()\n  }\n  return `${tab}<${tag}${sattrs}` + (!ssubs && !stext ? '/>' : `>\\n${ssubs}${stext}\\n${tab}</${tag}>`)\n}\n","/** ***********************\n * Arrays.\n */\n\nexport default {\n  slice: (x, b = 0, e) => x ? x.slice(b, e) : [],\n\n  /**\n * Builds histogram on given field for given list.\n *\n * @param {*} list source\n * @param {*} field to be used as group key\n */\n  groupBy: function (list, field = 'type') {\n    const result = {}\n    const fieldFn = typeof field === 'string' ? e => e[field] : field\n    const iter = (v, entry) => {\n      const slot = result[v] || (result[v] = { id: v, count: 0, subs: [] })\n      slot.count++;\n      (slot.items || (slot.items = slot.subs)).push(entry)\n    };\n    (list || []).forEach((e) => {\n      const value = fieldFn(e)\n      if (Array.isArray(value)) {\n        value.forEach(v => iter(v, e))\n      } else {\n        iter(value, e)\n      }\n    })\n    return result\n  },\n\n  /**\n     * Sorts array by element property.\n     *\n     * @param {*} arr source\n     * @param {*} property element property to sort by\n     * @param {*} order\n     */\n  sortBy: function sortBy (arr, property = 'name', order = 1) {\n    let fn = property\n    if (typeof property === 'string') {\n      if (property[0] === '-') {\n        /* eslint-disable */\n                order = -1;\n                property = property.substr(1);\n            }\n            fn = e => e[property];\n        }\n\n        function compare(a, b) {\n            const aa = fn(a);\n            const bb = fn(b);\n            /* eslint-disable */\n            return (aa < bb) ? -order : (aa > bb) ? order : 0;\n        }\n        return (arr || []).slice(0).sort(compare);\n    },\n\n    /**\n     * Produces key/value index on given array.\n     * \n     * @param {*} arr source array\n     * @param {*} idKey id key\n     * @param {*} valKey value key\n     */\n    hash: (arr, idKey = 'id', valKey) => {\n        const r = {};\n        if (arr) {\n            const isKeyFn = typeof idKey === 'string' ? e => e[idKey] : idKey\n            arr.forEach((e) => { r[isKeyFn(e)] = valKey ? e[valKey] : e; });\n        }\n        return r;\n    }\n}","\nconst R = {\n  ru: {\n    monthNames: ['', 'Ð¯Ð½Ð²Ð°Ñ€ÑŒ', 'Ð¤ÐµÐ²Ñ€Ð°Ð»ÑŒ', 'ÐœÐ°Ñ€Ñ‚', 'ÐÐ¿Ñ€ÐµÐ»ÑŒ', 'ÐœÐ°Ð¹', 'Ð˜ÑŽÐ½ÑŒ', 'Ð˜ÑŽÐ»ÑŒ', 'ÐÐ²Ð³ÑƒÑÑ‚', 'Ð¡ÐµÐ½Ñ‚ÑÐ±Ñ€ÑŒ', 'ÐžÐºÑ‚ÑÐ±Ñ€ÑŒ', 'ÐÐ¾ÑÐ±Ñ€ÑŒ', 'Ð”ÐµÐºÐ°Ð±Ñ€ÑŒ'],\n    monthNamesShort: ['', 'Ð¯Ð½Ð²', 'Ð¤ÐµÐ²', 'ÐœÐ°Ñ€', 'ÐÐ¿Ñ€', 'ÐœÐ°Ð¹', 'Ð˜ÑŽÐ½', 'Ð˜ÑŽÐ»', 'ÐÐ²Ð³', 'Ð¡ÐµÐ½', 'ÐžÐºÑ‚', 'ÐÐ¾Ñ', 'Ð”ÐµÐº'],\n    dayNames: ['Ð’Ð¾ÑÐºÑ€ÐµÑÐµÐ½ÑŒÐµ', 'ÐŸÐ¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸Ðº', 'Ð’Ñ‚Ð¾Ñ€Ð½Ð¸Ðº', 'Ð¡Ñ€ÐµÐ´Ð°', 'Ð§ÐµÑ‚Ð²ÐµÑ€Ð³', 'ÐŸÑÑ‚Ð½Ð¸Ñ†Ð°', 'Ð¡ÑƒÐ±Ð±Ð¾Ñ‚Ð°'],\n    dayNamesShort: ['Ð’Ñ', 'ÐŸÐ½', 'Ð’Ñ‚', 'Ð¡Ñ€', 'Ð§Ñ‚', 'ÐŸÑ‚', 'Ð¡Ð±']\n  },\n  en: {\n    monthNames: ['', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    monthNamesShort: ['', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n    dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    dayNamesShort: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa']\n  }\n}\nconst DATE_FORMATTERS = {\n  hh: (date) => (String.pad(date.getHours())),\n  ii: (date) => (String.pad(date.getMinutes())),\n  hi: (date) => (String.pad(date.getHours()) + ':' + String.pad(date.getMinutes())),\n  dd: (date) => (String.pad(date.getDate())),\n  w: (date) => ('' + Date.l18n(`dayNames.${date.getDay()}`)),\n  ww: (date) => ('' + Date.l18n(`dayNamesShort.${date.getDay()}`)),\n  d: (date) => ('' + date.getDate()),\n  mmmm: (date) => (Date.monthName(date.getMonth() + 1, '')),\n  mmm: (date) => (Date.monthName(date.getMonth() + 1, 'Short')),\n  mm: (date) => (String.pad(date.getMonth() + 1)),\n  yyyy: (date) => (`${date.getFullYear()}`),\n  ll: (date) => (`${date.getTime()}`),\n  z: (date) => (`Z${Date.formatTimezone(date.getTimezoneOffset())}`)\n}\n\nexport default {\n  orNow: x => x ? Date.narrow(x) : (new Date()),\n\n  l18n: (key) => Object.dig(R[Date.LOCALE || 'ru'], key),\n\n  daysInMonth: (month, year) => new Date(year, month + 1, 0).getDate(),\n\n  firstOfWeek: (d, x = Date.narrow(d)) => (new Date(x.getFullYear(), x.getMonth(), x.getDate() - x.getDay())),\n\n  monthName: (m, mode = '') => Date.l18n(`monthNames${mode}.${m}`),\n\n  fractions: (x = new Date()) => [x.getFullYear(), x.getMonth(), x.getDate(), x.getHours(), x.getMinutes(), x.getSeconds(), x.getMilliseconds()],\n\n  parseISO8601 (x) {\n    Function.assert(typeof x === 'string', `Date.parseISO8601: not a string: ${x}`)\n\n    if (x.length === 10) {\n      x += 'T12:00'\n    }\n    const timebits = /^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2})(?::([0-9]*)(\\.[0-9]*)?)?(Z?)(([+-])([0-9]{2})([0-9]{2}))?/\n    const m = timebits.exec(x)\n    if (!m) {\n      return null\n    }\n    const tz = m[8]\n      ? !m[9] ? 0 : (m[10] === '+' ? -1 : +1) * ((parseInt(m[11]) * 60) + parseInt(m[12]))\n      : (new Date().getTimezoneOffset())\n    // utcdate is milliseconds since the epoch\n    const utcdate = Date.UTC(\n      parseInt(m[1]),\n      parseInt(m[2]) - 1, // months are zero-offset (!)\n      parseInt(m[3]),\n      parseInt(m[4]), parseInt(m[5]), // hh:mm\n      ((m[6] && parseInt(m[6])) || 0), // optional seconds\n      ((m[7] && parseFloat(m[7]))) || 0\n    )\n\n    return new Date(utcdate + tz * 60000)\n  },\n  /**\n * Universal all-weather converter to Date.\n *\n * @param {*} x any value to be converted to date\n * @returns Date instance or null\n */\n  narrow (x) {\n    const type = typeof x\n    if (x == null) { return null }\n    // eslint-disable-next-line eqeqeq\n    if (type === 'number' || +x == x) { return new Date(+x) }\n    if (type === 'object') {\n    // Date already\n      if (x.getTime) { return x }\n      // having a date re-presentation method\n      if (x.toDate) { return x.toDate() }\n      // firestore timestamp for web\n      if (x.seconds && x.nanoseconds != null) { return new Date((x.seconds * 1000) + x.nanoseconds) }\n    }\n    return Date.parseISO8601(x)\n  },\n  formatTimezone (tzOffset) {\n    const toNumber = Number(tzOffset)\n    return toNumber\n      ? toNumber >= 0\n        ? `+${String.pad(toNumber / 60)}:${String.pad(toNumber % 60)}`\n        : `-${String.pad(-toNumber / 60)}:${String.pad(-toNumber % 60)}`\n      : ''\n  },\n\n  format (x, format = 'yyyy-mm-dd') {\n    if (!x) {\n      return ''\n    }\n    const date = Date.narrow(x)\n    return !date ? '' : format\n      .replace(/[_]/g, '\\n')\n      .replace(/[hidwmylz]+/g, (key) => {\n        const fn = DATE_FORMATTERS[key]\n        return fn ? fn(date) : key\n      })\n  },\n\n  dateKey: d => { const ms = Date.narrow(d).getTime(); return Date.format(ms - ms % (24 * 3600000) + 12 * 3600000, 'yyyy-mm-dd') }\n}\n","import obj from './obj.js'\nimport str from './str.js'\nimport arr from './arr.js'\nimport date from './date.js'\n\n// useful pipes\nexport default {\n  ID: x => x,\n  next: (COUNTER => (p = '') => p + (COUNTER++))(1),\n\n  // system\n  throw: (error, ErrorType = Error) => { throw typeof error === 'string' ? new ErrorType(error) : error },\n  assert: (b, error, ErrorType = Error) => { if (!b) { throw typeof error === 'string' ? new ErrorType(error) : error } },\n  log: (x, pre) => { console.log(pre || 'pipe', x); return x },\n  track: (fn, x, y) => (...args) => { console.log('track', x || y); return (fn || Function.ID)(...args) },\n  // eslint-disable-next-line no-debugger\n  debugger: () => { debugger },\n\n  // data structures\n  dot: (x, k) => x && k in x ? x[k] : undefined,\n  wrap: (x, k) => ({ [k]: x }),\n  includes: (x, p) => x.includes && x.includes(p),\n  dig: (o, steps) => (steps.reduce ? steps : steps.split('.')).reduce((r, e) => r ? r[e] : undefined, o),\n\n  // logical\n  then: (x, p = '', n = '') => x ? p : n,\n  not: x => !x,\n  isUndefined: x => typeof x === 'undefined',\n  isTrue: x => x === true,\n  isFalse: x => x === false,\n  or: (x, s) => x || s,\n  and: (x, s) => x && s,\n\n  // math\n  // eslint-disable-next-line eqeqeq\n  equals: (x, p) => x == p,\n  greater: (x, p) => x > p,\n  less: (x, p) => x < p,\n  plus: (x, alt) => (+x) + (+alt),\n  minus: (x, alt) => (+x) - (+alt),\n  multiply: (x, alt) => (+x) * (+alt),\n  compose: (...ff) => x0 => ff.reduceRight((x, f) => f(x), x0),\n  swap: f => (a, b) => f(b, a),\n  curry: (() => {\n    const _curry = (fn, args0, lengthLimit) => {\n      const fx = (args) => args.length >= lengthLimit\n        ? fn(...args)\n        : _curry(fn, args, lengthLimit - args.length)\n\n      return (...args) => fx([...args0, ...args])\n    }\n    return (f, ...args) => _curry(f, args, f.length)\n  })(),\n  /* Simple GUID generator. */\n  guid: (s4 => () => `${s4()}${s4()}-${s4()}-${s4()}-${s4()}-${s4()}${s4()}${s4()}`)(() => Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1)),\n  /* Simple hash function. */\n  hash: function (s) {\n    let a = 1; let c = 0; let h; let o\n    if (s) {\n      a = 0\n      /* jshint plusplus:false bitwise:false */\n      for (h = s.length - 1; h >= 0; h--) {\n        o = s.charCodeAt(h)\n        a = (a << 6 & 268435455) + o + (o << 14)\n        c = a & 266338304\n        a = c !== 0 ? a ^ c >> 21 : a\n      }\n    }\n    return String(a)\n  },\n\n  str,\n  arr,\n  obj,\n  date: Object.assign((s, format) => date.format(s, format), date)\n}\n","Object.EMPTY = Object.freeze({})\nexport default {\n/**\n * Checks if argument is empty .\n */\n  isEmpty  (x) {\n    if (!x) {\n      return true\n    }\n    if (x instanceof Object) {\n    // (zero-length array)\n      if (Array.isArray(x)) {\n        return x.length === 0\n      }\n      // (zero-size map)\n      if (x instanceof Map) {\n        return x.size === 0\n      }\n      // (has no props)\n      return Object.keys(x).length === 0\n    }\n    return false\n  },\n\n  decode  (val) {\n    const value = decodeURIComponent(val)\n    if ('{['.indexOf(value[0]) > -1) {\n      return JSON.parse(value)\n    }\n    return Object.decodePrimitive(val)\n  },\n\n  decodePrimitive: (map => value => {\n    if (value && '1234567890+-'.includes(value[0]) && value.length <= 17) {\n      const num = +value\n      return isNaN(num) ? value : num\n    }\n    return value in map ? map[value] : value\n  })({\n    true: true,\n    false: false,\n    null: null,\n    undefined\n  }),\n\n  encode (value) {\n    return encodeURIComponent((typeof value === 'object') ? JSON.stringify(value) : `${value}`)\n  }\n}\n","\nfunction capitalize (x) {\n  if (!x) {\n    return x\n  }\n  const s = `${x}`\n\n  return s[0].toUpperCase() + s.slice(1)\n}\nfunction camelize (s, sep = '_') {\n  return ((s && s.length && s.split(sep).map((t, i) => (i ? capitalize(t) : t)).join('')) || '')\n}\n\n/**\n * Formats given string template with params.\n *\n * Template should contain placeholders like `{someKey}`,\n * which will be replaced with value by key from params.\n *\n * @param {string} template string template\n * @param {object} params hash with parameters\n */\nexport default {\n  format: (template, params) => {\n    return `${template || ''}`.replace(/\\{([\\S]+)\\}/i, (_, key) => ((params && params[key]) != null) ? params[key] : '')\n  },\n  wrap: (x, template) => {\n    return !x ? '' : `${template || '*'}`.replace('*', x)\n  },\n\n  tail: (x, sep = '.') => {\n    if (!x) {\n      return ''\n    }\n    const pos = x.lastIndexOf(sep)\n\n    return pos === -1 ? x : x.slice(pos + sep.length)\n  },\n\n  lastTail: (key, sep = '.') => ('' + key).split(sep).slice(-1)[0],\n\n  head: (x, sep = '.') => {\n    if (!x) {\n      return ''\n    }\n    const pos = x.indexOf(sep)\n\n    return pos === -1 ? x : x.slice(0, pos)\n  },\n\n  pad: (x, size = 2, fill = '0') => {\n    let s = String(x)\n    while (s.length < (size)) { s = `${fill}${s}` }\n    return s\n  },\n  capitalize: capitalize,\n  camelize: camelize,\n  mirror: (x) => (x || '').split('').reduce((r, c) => (c + r), ''),\n  snakeCase: (x) => (x || '').replace(/([a-z])([A-Z])/g, '$1_$2'),\n  proper: (s) => capitalize(camelize(s)),\n  upper: s => ('' + s).toUpperCase()\n}\n","import Obj from './obj.js'\n\nexport default {\n\n  /**\n * Parses string into URL object like `{type, target, path, params, data }`.\n *\n * @param {string} s string in format: `type:target/path?params#data`\n * @param {object} r optional target object\n * @returns URL object\n */\n  parse (s, r = {}) {\n    if (!s) {\n      return { path: [], params: {}, target: '', ...r }\n    }\n    if (typeof s === 'object') {\n      return { path: [], params: {}, target: '', ...r, ...s }\n    }\n    let p\n    // extract type:\n    p = s.indexOf(':')\n    if (p > -1) {\n      r.type = s.slice(0, p)\n      s = s.slice(p + 1)\n    }\n    // extract data:\n    p = s.indexOf('#')\n    if (p > -1) {\n      r.data = Object.decode(s.slice(p + 1))\n      s = s.slice(0, p)\n    }\n    // extract query params:\n    p = s.indexOf('?')\n    r.params = r.params || {}\n    if (p > -1) {\n      for (const param of s.slice(p + 1).split('&')) {\n        const [key, value] = param.split('=')\n        if (value) {\n          r.params[key] = Obj.decode(value)\n        }\n      }\n      s = s.slice(0, p)\n    }\n    // target and path:\n    const path = r.path = s.split('/').map(decodeURIComponent)\n    while (path.length && !r.target) {\n      r.target = path.shift()\n    }\n    return r\n  },\n\n  /**\n*  Represents an URL object as a string\n*\n* @param {object} r URL object like `{type, target, path, params, data }`\n* @returns string in format `type://target/path?params#data`\n*/\n  stringify  (r) {\n    let result = ''\n    if (!r) {\n      return result\n    }\n    if (typeof r === 'string') {\n      return r\n    }\n    if (r.target) {\n      if (r.type) {\n        result += `${r.type}://`\n      }\n      result += r.target\n    }\n    if (r.path) {\n      result += `/${Array.isArray(r.path) ? r.path.map(encodeURIComponent).join('/') : r.path}`\n    }\n    const params = r.params\n    if (params) {\n      const keys = Object.keys(params).filter(key => (params[key] != null))\n      if (keys.length) {\n        result += `?${keys.map(key => (`${key}=${Obj.encode(params[key])}`)).join('&')}`\n      }\n    }\n    if (r.data) {\n      result += `#${Obj.encode(r.data)}`\n    }\n    return result\n  }\n\n}\n","\nconst FIELD_TYPES = {\n  bool: 'SwitchField'\n}\n\nexport class FormField {\n  get TEMPLATE () {\n    return /* html */ `\n    <ui:fragment>\n      <ui:tag tag={fieldType} ui:props={fieldProps} onChange={onChange}/>\n    </ui:fragment>`\n  }\n\n  onChange ({ value }) {\n    const form = this.form\n    const field = this.field\n    const id = field.id\n    form.data = { ...form.data, [id]: value }\n    form.change && form.change(form.data)\n  }\n\n  get fieldType () {\n    const type = this.field.type || 'text'\n    return FIELD_TYPES[type] || (String.capitalize(type) + 'Field')\n  }\n\n  get fieldProps () {\n    const field = this.field\n    const form = this.form\n    const id = field.id\n    const data = form.data || {}\n    const value = data[id]\n    return {\n      ...field,\n      error: (form.error && form.error.fields && form.error.fields[id]) || null,\n      get disabled () { return field.disabled && field.disabled(this.value, this.data) },\n      value: value === undefined ? null : value,\n      caption: field.caption || field.name,\n      data\n    }\n  }\n}\n\nexport class Form {\n  get TEMPLATE () {\n    return /* html */ `\n    <div autocomplete=\"off\" class=\"form-horizontal\">\n        <FormField ui:for=\"field of fields\" field={field} form={form}/>\n    </div>`\n  }\n\n  getForm () {\n    return this\n  }\n\n  getFields () {\n    return this.fields || Object.keys(this.data).map(id => ({ id, caption: id }))\n  }\n}\n","import { Service } from './Service'\nimport url from '../pipes/url'\n\nexport class NavigationService extends Service {\n  init () {\n    this.prevHash = ''\n    this.hashchange = () => {\n      const hash = window.location.hash.slice(1)\n      if (hash[0] === '/' && hash !== this.prevHash) {\n        this.emit('this.hash', { value: hash.slice(1) })\n        this.prevHash = hash\n      } else if (!this.prevHash) {\n        this.emit('this.hash', { value: 'main' })\n        this.prevHash = '/main'\n      }\n    }\n    window.addEventListener('hashchange', this.hashchange)\n    setTimeout(() => this.hashchange(), 0)\n  }\n\n  done () {\n    window.removeEventListener('hashchange', this.hashchange)\n  }\n\n  update (d) {\n    const { target, path = ['*'], params } = url.parse(d)\n    const state = {\n      target: (!target || target === '*' ? this.target : target) || 'main',\n      path: path[0] === '*' ? this.path : path,\n      params: params.reset ? { ...params, reset: null } : { ...this.params, ...params }\n    }\n    window.location.hash = this.prevHash = '/' + url.stringify(state)\n    return state\n  }\n\n  getRoute () {\n    return {\n      target: this.target,\n      path: this.path,\n      params: this.params\n    }\n  }\n\n  onHash ({ value }) { return this.update(value) }\n  onParams (params) { return this.update({ params: { ...params, data: null } }) }\n}\n","export class Service {\n  constructor (state, $) {\n    this.state = state\n    this.$ = $\n  }\n\n  /**\n   * Framework\n   */\n  lookupService (ref) {\n    return this.$.app && this.$.app[ref] ? this.$.app[ref].impl : null\n  }\n\n  up (...args) {\n    return this.$.up(...args)\n  }\n\n  defer (...args) {\n    return this.$.defer(...args)\n  }\n\n  emit (...args) {\n    return this.$.emit(...args)\n  }\n\n  log (...args) {\n    console.log(this.$.ref + ': ', ...args)\n    return args[0]\n  }\n\n  /**\n   * Error handling\n   */\n\n  handleError ({ message = '', code = '' }) {\n    // may  overriden from props\n    const handler = this.lookupService('errorHandler')\n    if (handler) {\n      handler.handleError({ message, code, source: this.$.ref })\n    } else {\n      console.error(this.$.ref + ': ERROR: ', message, code)\n    }\n  }\n\n  safe (p, def) {\n    return p.catch(error => {\n      this.handleError(error)\n      return def ? def(error) : { error }\n    })\n  }\n\n  onClearError () {\n    return { error: null }\n  }\n}\n","import { Service } from './Service'\n\nexport class ServiceWorker extends Service {\n  get api () {\n    return navigator.serviceWorker\n  }\n\n  init () {\n    try {\n      Function.assert(this.api, 'Service Workers are not supported')\n\n      const { source = '/service-worker.js', scope = '/', push } = this\n\n      this.api.register(source, { scope })\n        .then((registration) => this.registered(registration))\n        .then(() => this.ready(() => this.log('Service Worker Ready')))\n\n      this.api.addEventListener('message', ev => this.onMessage(ev))\n\n      if (push) {\n        this.subscribe()\n      }\n    } catch (error) {\n      this.fallback(error)\n    }\n  }\n\n  // ensures that `fn` executed when api is ready\n  ready (fn) {\n    return this.api.ready.then(fn)\n  }\n\n  fallback (error) {\n    this.log(error)\n  }\n\n  // hook on registered\n  registered (registration) {\n    this.log('Service Worker Registered')\n    return registration\n  }\n  /**\n     * Push\n     */\n\n  withPushManager (fn) {\n    return this.ready(({ pushManager }) => pushManager).then(fn)\n  }\n\n  unsubscribe () {\n    this.withPushManager(pushManager => pushManager.getSubscription())\n      .then((ss) => ss && ss.unsubscribe())\n      .then(() => this.saveSubscription())\n      .catch(function (e) {\n        console.log('Error thrown while unsubscribing from  push messaging.', e)\n      })\n  }\n\n  subscribe () {\n    function urlBase64ToUint8Array (base64String) {\n      const padding = '='.repeat((4 - base64String.length % 4) % 4)\n      const base64 = (base64String + padding)\n        .replace(/-/g, '+')\n        .replace(/_/g, '/')\n\n      const rawData = window.atob(base64)\n      return Uint8Array.from([...rawData].map((char) => char.charCodeAt(0)))\n    }\n    if (Notification.permission === 'granted') {\n      /* do our magic */\n    } else if (Notification.permission === 'blocked') {\n      /* the user has previously denied push. Can't reprompt. */\n    } else {\n      /* show a prompt to the user */\n    }\n    const applicationServerKey = urlBase64ToUint8Array(this.vapidPublicKey)\n    this.withPushManager(pushManager => pushManager.getSubscription()\n    // .then((ss) => ss && ss.unsubscribe())\n      .then(ss => ss || pushManager.subscribe({\n        userVisibleOnly: true,\n        applicationServerKey\n      }))\n      .then((subscription) => this.saveSubscription(subscription.toJSON()))\n      .catch((err) => {\n        if (Notification.permission === 'denied') {\n          this.log('The user has blocked notifications.')\n        }\n        this.handleError(err)\n      })\n    )\n  }\n\n  // to be overriden from props\n  saveSubscription (ss) {\n    this.subscription = ss\n  }\n\n  /**\n     * Intercommunication between service worker.\n     */\n\n  // handles a message posted from Service worker.\n  onMessage (payload) {\n    this.log('onMessage', payload)\n  }\n}\n","export default \"<component id=\\\"Icon\\\">\\n    <i class=\\\"fa{bundle|or:s} fa-{type} {class}\\\" style={style} data={data} click={click}></i>\\n</component>\\n\\n<component id=\\\"Img\\\">\\n    <img src={src|or:@default} alt={alt} class=\\\"img {class}\\\" style={style} />\\n</component>\\n\\n<component id=\\\"Avatar\\\">\\n    <figure class=\\\"avatar {large|then:avatar-lg}\\\">\\n        <Img src={src}\\n             alt={alt}\\n             default=\\\"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\\\" />\\n    </figure>\\n</component>\\n\\n<component id=\\\"Button\\\">\\n    <button class=\\\"btn btn-{mode} {primary|then:btn-primary} {disabled|or:@busy|then:disabled} {class} {large|then:btn-lg} {link|then:btn-link} c-hand\\\"\\n            style={style}\\n            data={data}\\n            click={action|track:@trackId:@caption}>\\n        <i ui:if={busy} class=\\\"loading mx-2\\\"></i>\\n        <Icon ui:if={icon} bundle={iconBundle} type={icon} class=\\\"mx-2\\\" />\\n        <span ui:if={caption} style=\\\"white-space:nowrap; overflow: hidden; text-overflow: ellipsis;\\\">{caption}</span>\\n    </button>\\n</component>\\n\\n<component id=\\\"FAB\\\">\\n    <button class=\\\"btn2 {tooltip|then:tooltip} tooltip-left fixed bg-primary circle c-hand {class}\\\"\\n            style=\\\"position: fixed;border:none; right:1.5rem; bottom:1.5rem; width: 2.5rem; height: 2.5rem; z-index:5;\\\"\\n            data={data} data-tooltip={tooltip|or:} click={action|track:@trackId:big}>\\n        <Icon type={icon|or:plus} />\\n    </button>\\n</component>\\n\\n<component id=\\\"Modal\\\">\\n    <div class=\\\"modal modal {open|then:active}\\\">\\n        <a class=\\\"modal-overlay\\\" aria-label=\\\"Close\\\" data={data} click={close}></a>\\n        <div class=\\\"modal-container\\\">\\n            <div class=\\\"modal-header\\\">\\n                <a class=\\\"btn btn-clear float-right\\\" aria-label=\\\":close\\\" data={data} click={close}></a>\\n                <div class=\\\"modal-title h5\\\" ui:if={title}>{title}</div>\\n                <ui:slot id=\\\"header\\\" />\\n            </div>\\n            <div class=\\\"modal-body\\\" style=\\\"max-height: 70vh;\\\">\\n                <div class=\\\"content\\\">\\n                    <ui:slot />\\n                </div>\\n            </div>\\n            <div class=\\\"modal-footer\\\">\\n                <ui:slot id=\\\"footer\\\" />\\n            </div>\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Tabs\\\">\\n    <ul class=\\\"tab tab-block\\\">\\n        <li class=\\\"tab-item {item.id|equals:@value|then:active} c-hand\\\" ui:for=\\\"item of items\\\">\\n            <a data={data} data-id={item.id} click={action}>\\n                <Icon ui:if={item.icon} type={item.icon} bundle={item.iconBundle} class=\\\"mx-2\\\" />\\n                {item.name}\\n            </a>\\n        </li>\\n    </ul>\\n</component>\";","export default \"<component id=\\\"FieldItem\\\">\\n    <div class=\\\"columns form-group {error|then:has-error} {class}\\\">\\n        <div class=\\\" col-4 col-sm-12\\\">\\n            <label class=\\\"form-label\\\" for=\\\"input-example-1\\\">\\n                {caption}\\n                <sup ui:if={required}\\n                     class=\\\"text-error\\\">âœ±</sup>\\n            </label>\\n        </div>\\n        <div class=\\\"col-8 col-sm-12\\\">\\n            <ui:slot />\\n            <p class=\\\"form-input-hint\\\" ui:if={error}>{error}</p>\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"TextField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               type=\\\"text\\\"\\n               disabled={disabled}\\n               placeholder={placeholder|or:@caption}\\n               value={value}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"DateField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               disabled={disabled}\\n               type=\\\"date\\\"\\n               placeholder={caption}\\n               value={value}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"DateTimeField\\\">\\n    <FieldItem caption=\\\"{caption}\\\" error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               disabled={disabled}\\n               type=\\\"datetime-local\\\"\\n               placeholder={caption}\\n               value={value|date:yyyy-mm-ddTt}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"NumberField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <input class=\\\"form-input\\\"\\n               disabled={disabled}\\n               type=\\\"number\\\"\\n               placeholder={caption}\\n               value={value}\\n               change={onChange}>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"TextareaField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <textarea\\n                  class=\\\"form-input\\\"\\n                  style=\\\"min-height: 15vw\\\"\\n                  disabled={disabled} placeholder={caption} rows=\\\"3\\\" change={onChange} value={value}></textarea>\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"SwitchField\\\">\\n    <div class=\\\"form-group\\\">\\n        <div class=\\\"col-sm-12\\\">\\n            <label class=\\\"form-switch\\\">\\n                <span>{caption}</span>\\n                <input type=\\\"checkbox\\\" toggle={onChange} data={data} checked={value|not|not}>\\n                <i class=\\\"form-icon\\\"></i>\\n            </label>\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"EnumField\\\">\\n    <FieldItem caption={caption} class={class} error={error} required={required}>\\n        <Select class=\\\"form-select\\\"\\n                change={onChange}\\n                value={value|or:@defaultValue}\\n                data={data}\\n                options=\\\":enums.{typeSpec}\\\"\\n                emptyCaption={emptyCaption}\\n                disabled={disabled} />\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"SelectField\\\">\\n    <FieldItem caption={caption} class={class} error={error} required={required}>\\n        <Select class=\\\"form-select\\\"\\n                change={onChange}\\n                value={value|or:@defaultValue}\\n                data={data}\\n                options={options}\\n                emptyCaption={emptyCaption}\\n                disabled={disabled} />\\n    </FieldItem>\\n</component>\\n\\n<component id=\\\"RadioField\\\">\\n    <FieldItem caption={caption} error={error} required={required}>\\n        <RadioGroup change={onChange}\\n                    value={value} data={data} options=\\\":enums.{typeSpec}\\\"\\n                    disabled={disabled} />\\n    </FieldItem>\\n</component>\";","import elements from './elements.html'\nimport table from './table.html'\nimport inputs from './inputs.html'\nimport fields from './fields.html'\nimport layouts from './layouts.html'\nimport viewport from './viewport.html'\n\nimport { NavigationService } from './NavigationService'\nimport { ServiceWorker } from './ServiceWorker'\n\nimport * as formTypes from './Form'\nimport * as services from './services'\n\nexport default [\n  ServiceWorker,\n  NavigationService,\n  ...Object.values(formTypes),\n  ...Object.values(services),\n  elements, table, fields, viewport, layouts, inputs\n]\n","export default \"<component id=\\\"Select\\\">\\n    <select class=\\\"{class}\\\" change={change} disabled={disabled} data={data}>\\n        <option selected={value|not} value=\\\"\\\" ui:if={value|not|or:@emptyCaption}>{emptyCaption}</option>\\n        <option ui:for=\\\"option of options\\\" selected={option.id|equals:@value} value={option.id}>\\n            {option.name}\\n        </option>\\n    </select>\\n</component>\\n\\n<component id=\\\"RadioGroup\\\">\\n    <div class=\\\"{class}\\\">\\n        <label class=\\\"form-radio\\\" ui:for=\\\"option of options\\\">\\n            <input type=\\\"radio\\\" name={id|or:rg}\\n                   value={option.id}\\n                   checked={option.id|equals:@value} change={change} data={data}\\n                   disabled={disabled}>\\n            <i class=\\\"form-icon\\\"></i>{option.name}\\n        </label>\\n    </div>\\n</component>\\n\\n<component id=\\\"Dropdown\\\">\\n    <div class=\\\"dropdown\\\">\\n        <a href=\\\"#\\\" class=\\\"btn btn-link dropdown-toggle\\\" tabindex=\\\"0\\\">\\n            {data|selectedName}<i class=\\\"icon icon-caret\\\"></i>\\n        </a>\\n        <!-- menu component -->\\n        <ul class=\\\"menu\\\" style=\\\"right:0;left:auto;\\\">\\n            <li ui:for=\\\"item of data\\\" class=\\\"menu-item {item.id|equals:@value|then:active}\\\"\\n                data-id={item.id}\\n                data-name={item.name}\\n                click={change}>\\n                <a>{item.name}</a>\\n            </li>\\n        </ul>\\n    </div>\\n</component>\\n\\n<component id=\\\"DateTimeInput\\\">\\n    <input class=\\\"form-input flatpickr-input\\\"\\n           init={:support.initFlatpickr}\\n           disabled={disabled}\\n           type=\\\"text\\\"\\n           placeholder={placeholder}\\n           value={value|support.setFlatpickrValue}\\n           change={change}>\\n</component>\\n\\n<component id=\\\"SearchBar\\\">\\n    <span class=\\\"ant-input-search ant-input-affix-wrapper\\\">\\n        <input placeholder=\\\"ÐŸÐ¾Ð¸ÑÐº...\\\" class=\\\"ant-input\\\" type=\\\"text\\\"\\n               value={value} enter={action}\\n               style=\\\"min-height:40px;\\\">\\n        <span class=\\\"ant-input-suffix\\\">\\n            <i class=\\\"anticon anticon-search ant-input-search-icon\\\" style=\\\"margin-top: 4px;\\\"></i>\\n        </span>\\n    </span>\\n</component>\";","export default \"<component id=\\\"LoadingIndicator\\\">\\n    <div class=\\\"loading {large|then:loading-lg} {class}\\\" />\\n</component>\\n\\n<component id=\\\"EmptyData\\\">\\n    <div class=\\\"empty {class}\\\">\\n        <div class=\\\"empty-icon\\\">\\n            <Icon type={icon|or:people} />\\n        </div>\\n        <p class=\\\"empty-title h5\\\">{title}</p>\\n        <p ui:if={subtitle} class=\\\"empty-subtitle\\\">{subtitle}</p>\\n        <div class=\\\"empty-action\\\">\\n            <ui:slot />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Panel\\\">\\n    <h6 class=\\\"mt-2 pt-2 px-2 text-gray\\\" ui:if=\\\"caption\\\">{caption}</h6>\\n    <div class=\\\"panel {class}\\\" style={style}>\\n        <small class=\\\"p-2 bg-secondary\\\" ui:if={hint}>{hint}</small>\\n        <div class=\\\"panel-header\\\" ui:if=\\\"slot(title)\\\">\\n            <div class=\\\"panel-title\\\">\\n                <ui:slot id=\\\"title\\\" key=\\\"panel-title\\\" />\\n            </div>\\n        </div>\\n        <div class=\\\"panel-nav\\\" ui:if=\\\"slot(nav)\\\">\\n            <ui:slot id=\\\"nav\\\" />\\n        </div>\\n        <div class=\\\"panel-body p-2\\\">\\n            <ui:slot />\\n        </div>\\n        <div class=\\\"panel-footer\\\" ui:if=\\\"slot(footer)\\\">\\n            <ui:slot id=\\\"footer\\\" />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Grid\\\">\\n    <div class=\\\"columns {class}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n\\n<component id=\\\"Col\\\">\\n    <div class=\\\"col-{size|or:6} col-sm-12 {class}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n<component id=\\\"Centroid\\\">\\n    <div class=\\\"{class}\\\" style=\\\"display: flex;align-items: center;justify-content: center;{style}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n\\n<component id=\\\"FlexBox\\\">\\n    <div class=\\\"{class}\\\" style=\\\"display: flex;align-items: stretch;justify-content:space-around;{style}\\\">\\n        <ui:slot />\\n    </div>\\n</component>\\n\\n<component id=\\\"Tile\\\">\\n    <div class=\\\"tile {centered|then:tile-centered} m-2 {class}\\\">\\n        <div class=\\\"tile-icon\\\" ui:if={image}>\\n            <Avatar src={image} />\\n        </div>\\n        <div class=\\\"tile-icon\\\" ui:if={icon}>\\n            <Icon type={icon} />\\n        </div>\\n        <div class=\\\"tile-content\\\">\\n            <div class=\\\"tile-title text-bold\\\" ui:if={title}>{title}</div>\\n            <div class=\\\"tile-subtitle\\\" ui:if={subtitle}>{subtitle}</div>\\n            <ui:slot />\\n        </div>\\n        <div class=\\\"tile-action btn-group\\\" ui:if=\\\"slot(actions)\\\">\\n            <ui:slot id=\\\"actions\\\" />\\n        </div>\\n    </div>\\n</component>\\n\\n\\n<component id=\\\"Card\\\">\\n    <div class=\\\"card\\\" style={style}>\\n        <div class=\\\"card-image\\\" ui:if={image}>\\n            <img src={image} class=\\\"img-responsive\\\" />\\n        </div>\\n        <div class=\\\"card-header\\\">\\n            <a ui:if={title} href={link}>\\n                <h5 class=\\\"card-title\\\">{title}</h5>\\n            </a>\\n            <div ui:if={subtitle} class=\\\"card-subtitle text-gray\\\">{subtitle}</div>\\n            <ui:slot id=\\\"header\\\" />\\n        </div>\\n        <div class=\\\"card-body\\\">\\n            <ui:slot />\\n        </div>\\n        <div class=\\\"card-footer\\\">\\n            <ui:slot id=\\\"footer\\\" />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Popover\\\">\\n    <div class=\\\"popover popover-right\\\">\\n        <ui:slot />\\n        <div class=\\\"popover-container\\\">\\n            <div class=\\\"card\\\">\\n                <div class=\\\"card-header\\\">\\n                    <ui:slot id=\\\"body\\\" />\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</component>\";","import { Service } from './Service'\n\nexport class Invoke {\n  init () {\n    if (this.delay) {\n      setTimeout(() => { if (!this.isDone) { this.action(this.data) } }, (this.delay) * 1000)\n    } else {\n      this.action(this.data)\n    }\n  }\n}\n\nexport class Loader {\n  init () {\n    this.reload()\n  }\n\n  setTrigger (val) {\n    this.trigger = val\n    this.reload()\n  }\n\n  reload () {\n    const { from, data, into } = this\n    if (from && into) {\n      from({ data, callback: (error, result) => into({ error, ...result }) })\n    }\n  }\n}\n\nexport class ErrorHandlingService extends Service {\n  handleError ({ message = '', code, source = {} }) {\n    this.show({ message: source + ': ' + message, code, mode: 'error' })\n  }\n\n  show ({ message = '', code = '', source }) {\n    console.error(source + ': ERROR: ', code, message)\n  }\n}\n\nexport class ToastService extends Service {\n  onSend ({ data }) {\n    return {\n      top: { ...data, close: () => this.emit('this.close'), closeAfter: 5 }\n    }\n  }\n\n  onClose () {\n    return {\n      top: null\n    }\n  }\n}\n","export default \"<component id=\\\"LoadableItems\\\">\\n    <LoadingIndicator class=\\\"empty\\\" ui:if=\\\"data|not\\\">\\n        <ui:else>\\n            <h5 class=\\\"error text-error\\\" ui:if=\\\"data.error\\\">{data.error.message|or:@data.error}</h5>\\n            <EmptyData title={emptyCaption|or:Empty} ui:if=\\\"data.length|not\\\">\\n                <ui:else>\\n                    <div style={style} ui:for=\\\"item of data\\\">\\n                        <ui:tag tag={itemType} ui:props={item} item={item} context={context} action={action} />\\n                    </div>\\n                </ui:else>\\n            </EmptyData>\\n        </ui:else>\\n    </LoadingIndicator>\\n</component>\\n\\n<component id=\\\"LoadableEntity\\\">\\n    <LoadingIndicator class=\\\"empty\\\" ui:if=\\\"data|not\\\">\\n        <ui:else>\\n            <h5 class=\\\"error text-error\\\" ui:if=\\\"data.error\\\">\\n                <span>{data.error.message|or:@data.error}</span>\\n                <ui:else>\\n                    <EmptyData title={emptyCaption|or:Empty} ui:if=\\\"data.id|not\\\">\\n                        <ui:else>\\n                            <ui:tag tag={type} data={data} context={context} action={action} />\\n                        </ui:else>\\n                    </EmptyData>\\n                </ui:else>\\n            </h5>\\n        </ui:else>\\n    </LoadingIndicator>\\n</component>\\n\\n<component id=\\\"Cell\\\">\\n    <span class=\\\"\\\" style=\\\"padding-left: 0px;\\\">{value}</span>\\n</component>\\n\\n<component id=\\\"EnumCell\\\">\\n    <span class=\\\"\\\"\\n          style=\\\"padding-left: 0px;\\\">:map.{typeSpec}.{value}</span>\\n</component>\\n\\n<component id=\\\"DateCell\\\">\\n    <span class=\\\"\\\" style=\\\"padding-left: 0px;\\\">{value|date}</span>\\n</component>\\n\\n<component id=\\\"Table\\\">\\n    <table style=\\\"position: relative;\\\">\\n        <thead class=\\\"table-thead\\\">\\n            <tr>\\n                <th class=\\\"col-index\\\" style=\\\"position: sticky; top: -1;\\\"></th>\\n                <th class=\\\"col-index\\\" style=\\\"position: sticky; top: -1;\\\" ui:for=\\\"item of columns\\\">\\n                    <span>{item.name}</span>\\n                    <div class=\\\"table-column-sorter\\\" ui:if=\\\"item.sortable\\\">\\n                        <span class=\\\"table-column-sorter-up off\\\" title=\\\"â†‘\\\" data-id=\\\"-{item.id}\\\"\\n                              click={doSort}><i class=\\\"anticon anticon-caret-up\\\"></i></span>\\n                        <span class=\\\"table-column-sorter-down off\\\" title=\\\"â†“\\\" data-id={item.id} click={doSort}><i\\n                               class=\\\"anticon anticon-caret-down\\\"></i></span>\\n                    </div>\\n                </th>\\n            </tr>\\n        </thead>\\n        <TableRow ui:for=\\\"item of data\\\" data={item} selected={item.selected} columns={columns} kind={kind} />\\n    </table>\\n</component>\\n\\n<component id=\\\"TableRow\\\">\\n    <tbody class=\\\"table-tbody\\\">\\n        <tr class=\\\"table-row table-row-level-0\\\" style=\\\"position:sticky;\\\">\\n            <td class=\\\"col-index\\\" data-id={data.id} click={doItem}>\\n                <div ui:if={expandable}\\n                     role=\\\"button\\\"\\n                     class=\\\"table-row-expand-icon table-row-expanded\\\"\\n                     aria-label=\\\"Collapse row\\\"\\n                     data-selected=\\\"false\\\" click=\\\"->\\\">\\n                    <ui:else>\\n                        <div role=\\\"button\\\"\\n                             class=\\\"table-row-expand-icon table-row-collapsed\\\"\\n                             aria-label=\\\"Expand row\\\"\\n                             data-selected=\\\"true\\\" click=\\\"->\\\"></div>\\n                    </ui:else>\\n                </div>\\n            </td>\\n            <td class=\\\"col-index\\\" ui:for=\\\"col of columns\\\">\\n                <ui:tag tag=\\\"{col.type|str.capitalize}Cell\\\" ui:props={col} value={col.id|propObjectValueByKey}\\n                        data={data} />\\n            </td>\\n        </tr>\\n        <tr ui:if={expanded} class=\\\"table-expanded-row table-expanded-row-level-1\\\">\\n            <td class=\\\"\\\"></td>\\n            <td class=\\\"\\\" colspan=\\\"100\\\">\\n                <ui:tag tag=\\\"{kind|str.capitalize}RowInsider\\\" data={data} />\\n            </td>\\n        </tr>\\n    </tbody>\\n</component>\";","export default \"<component id=\\\"ViewPort\\\">\\n    <ToastService ui:ref=\\\"toaster\\\" />\\n    <ErrorHandlingService ui:ref=\\\"errorHandler\\\" show=\\\"-> toaster.send\\\" />\\n    <ui:fragment ui:if=\\\"slot(aside)\\\">\\n        <Sidebar caption={caption} size={sidebarWidth}>\\n            <Sidebar:aside>\\n                <ui:slot id=\\\"aside\\\" />\\n            </Sidebar:aside>\\n            <main>\\n                <Toast event=\\\"<- toaster.top\\\" />\\n                <ui:slot />\\n            </main>\\n        </Sidebar>\\n        <ui:else>\\n            <main>\\n                <Toast event=\\\"<- toaster.top\\\" />\\n                <ui:slot />\\n            </main>\\n        </ui:else>\\n    </ui:fragment>\\n</component>\\n\\n<component id=\\\"Sidebar\\\">\\n    <div class=\\\"off-canvas off-canvas-sidebar-show\\\">\\n        <a class=\\\"off-canvas-toggle btn btn-primary btn-action show-lg bg-red\\\"\\n           href=\\\"#sidebar\\\">\\n            <Icon type=\\\"bars\\\" />\\n        </a>\\n        <div id=\\\"sidebar\\\" class=\\\"off-canvas-sidebar\\\">\\n            <Aside caption={caption}>\\n                <ui:slot id=\\\"aside\\\" />\\n            </Aside>\\n        </div>\\n        <a class=\\\"off-canvas-overlay\\\" href=\\\"#\\\"></a>\\n        <div class=\\\"off-canvas-content\\\">\\n            <ui:slot />\\n        </div>\\n    </div>\\n</component>\\n\\n<component id=\\\"Aside\\\">\\n    <aside style=\\\"display:flex; flex-direction: column; height: 100vh; width:{size|or:300}px\\\">\\n        <div class=\\\"text-center\\\" ui:if={caption}>\\n            <a href=\\\"#/main\\\">\\n                <h5 class=\\\"p-2\\\">{caption}</h5>\\n            </a>\\n        </div>\\n        <div class=\\\"m-2\\\" style=\\\"flex:1; overflow-y: auto;\\\">\\n            <ui:slot />\\n        </div>\\n    </aside>\\n</component>\\n\\n<component id=\\\"Navbar\\\">\\n    <header class=\\\"navbar {class}\\\" style=\\\"min-height:48px\\\">\\n        <section class=\\\"navbar-section\\\">\\n            <div class=\\\"mx-2\\\">\\n                <NavLink href={back} ui:if={back}>\\n                    <Button link class=\\\"text-primary\\\" icon=\\\"arrow-left\\\" title=\\\":action.back\\\" />\\n                </NavLink>\\n                <h4 class=\\\"m-1\\\" style=\\\"vertical-align: middle;\\\" ui:if={caption}>{caption}</h4>\\n                <ui:slot id=\\\"left\\\" />\\n            </div>\\n        </section>\\n        <section class=\\\"navbar-center\\\" ui:if={logo}>\\n            <img src={logo} style=\\\"max-height:44px;\\\" />\\n        </section>\\n        <section class=\\\"navbar-section\\\">\\n            <div class=\\\"mx-2\\\">\\n\\n                <ui:slot />\\n            </div>\\n\\n        </section>\\n    </header>\\n</component>\\n\\n<component id=\\\"NavTree\\\">\\n    <ul class=\\\"nav\\\">\\n        <li class=\\\"nav-item {item.class}\\\" ui:for=\\\"item of data\\\">\\n            <NavLink href={item.id}>\\n                <span>{item.name}</span>\\n                <span ui:if={item.label} class=\\\"label label-error\\\">{item.label}</span>\\n            </NavLink>\\n            <NavTree ui:if={item.subs} data={item.subs} />\\n        </li>\\n    </ul>\\n</component>\\n\\n<component id=\\\"NavLink\\\">\\n    <a data-value={href} click=\\\"-> nav.hash\\\" class=\\\"c-hand {class}\\\">\\n        <ui:slot />\\n    </a>\\n</component>\\n\\n<component id=\\\"PageRouter\\\">\\n    <ui:tag tag=\\\"{target|str.capitalize|or:Main}Page\\\" ui:props={params} params={params} />\\n</component>\\n\\n<component id=\\\"Toast\\\">\\n    <div class=\\\"toast toast-{event.mode|or:@mode|or:primary}\\\"\\n         style=\\\"position:absolute;top:1rem;right:1rem;left:1rem;{style}\\\"\\n         ui:if=\\\"event\\\">\\n        <button class=\\\"btn btn-clear float-right\\\" click={event.close}></button>\\n        <p>{event.message}</p>\\n        <Delay ui:if={event.closeAfter} action={event.close} period={event.closeAfter} />\\n    </div>\\n</component>\";","/** ***********************\n * Arrays.\n */\n\nArray.EMPTY = Object.freeze([]);\nArray.slice = (x, b = 0, e) => x ? x.slice(b, e) : [];\n\n/**\n * Builds histogram on given field for given list.\n *\n * @param {*} list source\n * @param {*} field to be used as group key\n */\nArray.groupBy = function (list, field = 'type') {\n    const result = {};\n    const fieldFn = typeof field === 'string' ? e => e[field] : field;\n    const iter = (v, entry) => {\n        const slot = result[v] || (result[v] = { id: v, count: 0, subs: [] });\n        slot.count++;\n        (slot.items || (slot.items = slot.subs)).push(entry);\n    };\n    (list || []).forEach((e) => {\n        const value = fieldFn(e);\n        if (Array.isArray(value)) {\n            value.forEach(v => iter(v, e));\n        } else {\n            iter(value, e);\n        }\n    });\n    return result;\n}\n\n/**\n * Sorts array by element property.\n *\n * @param {*} arr source\n * @param {*} property element property to sort by\n * @param {*} order\n */\nArray.sortBy = function sortBy(arr, property = 'name', order = 1) {\n    let fn = property;\n    if (typeof property === 'string') {\n        if (property[0] === '-') {\n            /* eslint-disable */\n            order = -1;\n            property = property.substr(1);\n        }\n        fn = e => e[property];\n    }\n\n    function compare(a, b) {\n        const aa = fn(a);\n        const bb = fn(b);\n        /* eslint-disable */\n        return (aa < bb) ? -order : (aa > bb) ? order : 0;\n    }\n    return (arr || []).slice(0).sort(compare);\n}\n\n/**\n * Produces key/value index on given array.\n * \n * @param {*} arr source array\n * @param {*} idKey id key\n * @param {*} valKey value key\n */\nArray.index = Array.toHash = (arr, idKey = 'id', valKey) => {\n    const r = {};\n    if (arr) {\n        const isKeyFn = typeof idKey === 'string' ? e => e[idKey] : idKey\n        arr.forEach((e) => { r[isKeyFn(e)] = valKey ? e[valKey] : e; });\n    }\n    return r;\n};","\nconst R = {\n    ru: {\n        monthNames: ['', 'Ð¯Ð½Ð²Ð°Ñ€ÑŒ', 'Ð¤ÐµÐ²Ñ€Ð°Ð»ÑŒ', 'ÐœÐ°Ñ€Ñ‚', 'ÐÐ¿Ñ€ÐµÐ»ÑŒ', 'ÐœÐ°Ð¹', 'Ð˜ÑŽÐ½ÑŒ', 'Ð˜ÑŽÐ»ÑŒ', 'ÐÐ²Ð³ÑƒÑÑ‚', 'Ð¡ÐµÐ½Ñ‚ÑÐ±Ñ€ÑŒ', 'ÐžÐºÑ‚ÑÐ±Ñ€ÑŒ', 'ÐÐ¾ÑÐ±Ñ€ÑŒ', 'Ð”ÐµÐºÐ°Ð±Ñ€ÑŒ'],\n        monthNamesShort: ['', 'Ð¯Ð½Ð²', 'Ð¤ÐµÐ²', 'ÐœÐ°Ñ€', 'ÐÐ¿Ñ€', 'ÐœÐ°Ð¹', 'Ð˜ÑŽÐ½', 'Ð˜ÑŽÐ»', 'ÐÐ²Ð³', 'Ð¡ÐµÐ½', 'ÐžÐºÑ‚', 'ÐÐ¾Ñ', 'Ð”ÐµÐº'],\n        dayNames: ['Ð’Ð¾ÑÐºÑ€ÐµÑÐµÐ½ÑŒÐµ', 'ÐŸÐ¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸Ðº', 'Ð’Ñ‚Ð¾Ñ€Ð½Ð¸Ðº', 'Ð¡Ñ€ÐµÐ´Ð°', 'Ð§ÐµÑ‚Ð²ÐµÑ€Ð³', 'ÐŸÑÑ‚Ð½Ð¸Ñ†Ð°', 'Ð¡ÑƒÐ±Ð±Ð¾Ñ‚Ð°'],\n        dayNamesShort: ['Ð’Ñ', 'ÐŸÐ½', 'Ð’Ñ‚', 'Ð¡Ñ€', 'Ð§Ñ‚', 'ÐŸÑ‚', 'Ð¡Ð±'],\n    },\n    en: {\n        monthNames: ['', 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n        monthNamesShort: ['', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n        dayNamesShort: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n    }\n};\n\nDate.orNow = x => x ? Date.narrow(x) : (new Date())\n\nDate.l18n = (key) => Object.dig(R[Date.LOCALE||'ru'], key)\n\nDate.daysInMonth = (month, year) => new Date(year, month + 1, 0).getDate();\n\nDate.firstOfWeek = (d, x = Date.narrow(d)) => (new Date(x.getFullYear(), x.getMonth(), x.getDate() - x.getDay()));\n\nDate.monthName = (m, mode = '') => Date.l18n(`monthNames${mode}.${m}`);\n\nDate.fractions = (x = new Date()) => [x.getFullYear(), x.getMonth(), x.getDate(), x.getHours(), x.getMinutes(), x.getSeconds(), x.getMilliseconds()];\n\nDate.parseISO8601 = function (x) {\n    Function.assert(typeof x === 'string', `Date.parseISO8601: not a string: ${x}`);\n\n    if (x.length === 10) {\n        x += 'T12:00';\n    }\n    const timebits = /^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2})(?::([0-9]*)(\\.[0-9]*)?)?(Z?)(([+-])([0-9]{2})([0-9]{2}))?/;\n    const m = timebits.exec(x);\n    if (!m) {\n        return null;\n    }\n    const tz = m[8]\n        ? !m[9] ? 0 : (m[10] === '+' ? -1 : +1) * ((parseInt(m[11]) * 60) + parseInt(m[12]))\n        : (new Date().getTimezoneOffset());\n    // utcdate is milliseconds since the epoch\n    const utcdate = Date.UTC(\n        parseInt(m[1]),\n        parseInt(m[2]) - 1, // months are zero-offset (!)\n        parseInt(m[3]),\n        parseInt(m[4]), parseInt(m[5]), // hh:mm\n        ((m[6] && parseInt(m[6])) || 0), // optional seconds\n        ((m[7] && parseFloat(m[7]))) || 0\n    );\n\n    return new Date(utcdate + tz * 60000);\n}\n/**\n * Universal all-weather converter to Date.\n *\n * @param {*} x any value to be converted to date\n * @returns Date instance or null\n */\nDate.narrow = (x) => {\n    const type = typeof x;\n    if (x == null) { return null; }\n    if (type === 'number' || +x == x) { return new Date(+x); }\n    if (type === 'object') {\n        // Date already\n        if (x.getTime) { return x; }\n        // having a date re-presentation method\n        if (x.toDate) { return x.toDate(); }\n        // firestore timestamp for web\n        if (x.seconds && x.nanoseconds != null) { return new Date((x.seconds * 1000) + x.nanoseconds); }\n    }\n    return Date.parseISO8601(x);\n};\n\nDate.formatTimezone = (tzOffset) => {\n    const toNumber = Number(tzOffset);\n    return toNumber ?\n        toNumber >= 0 ?\n            `+${String.pad(toNumber / 60)}:${String.pad(toNumber % 60)}` :\n            `-${String.pad(-toNumber / 60)}:${String.pad(-toNumber % 60)}` :\n        '';\n}\nconst DATE_FORMATTERS = {\n    hh: (date) => (String.pad(date.getHours())),\n    ii: (date) => (String.pad(date.getMinutes())),\n    hi: (date) => (String.pad(date.getHours()) + ':' + String.pad(date.getMinutes())),\n    dd: (date) => (String.pad(date.getDate())),\n    w: (date) => ('' + Date.l18n(`dayNames.${date.getDay()}`)),\n    ww: (date) => ('' + Date.l18n(`dayNamesShort.${date.getDay()}`)),\n    d: (date) => ('' + date.getDate()),\n    mmmm: (date) => (Date.monthName(date.getMonth() + 1, '')),\n    mmm: (date) => (Date.monthName(date.getMonth() + 1, 'Short')),\n    mm: (date) => (String.pad(date.getMonth() + 1)),\n    yyyy: (date) => (`${date.getFullYear()}`),\n    ll: (date) => (`${date.getTime()}`),\n    z: (date) => (`Z${Date.formatTimezone(date.getTimezoneOffset())}`),\n};\n\nDate.format = (x, format = 'yyyy-mm-dd') => {\n    if (!x) {\n        return '';\n    }\n    const date = Date.narrow(x);\n    return !date ? '' : format\n        .replace(/[_]/g, '\\n')\n        .replace(/[hidwmylz]+/g, (key) => {\n            const fn = DATE_FORMATTERS[key];\n            return fn ? fn(date) : key;\n        });\n};\n\nDate.dateKey = d => { const ms = Date.narrow(d).getTime(); return Date.format(ms - ms % (24 * 3600000) + 12*3600000,'yyyy-mm-dd')}\n","/**\n * Functions\n */\nObject.assign(Function, {\n    ID: x => x,\n    next: (COUNTER => (p = '') => p + (COUNTER++))(1),\n    \n    // system\n    throw: (error, ErrorType = Error) => { throw typeof error === 'string' ? new ErrorType(error) : error },\n    assert: (b, error, ErrorType = Error) => { if (!b) {throw typeof error === 'string' ? new ErrorType(error) : error }},\n    log: (x, pre) => { console.log(pre || 'pipe', x); return x },\n    track: (fn, x, y) => (...args) => { console.log('track', x || y); return (fn || Function.ID)(...args) },\n    // eslint-disable-next-line no-debugger\n    debugger: () => { debugger },\n\n    // data structures\n    dot: (x, k) => x ? x[k] : null,\n    includes: (x, p) => x.includes && x.includes(p),\n\n    // logical\n    then: (x, p = '', n = '') => x ? p : n,\n    not: x => !x,\n    isUndefined: x => typeof x === 'undefined',\n    isTrue: x => x === true,\n    isFalse: x => x === false,\n    or: (x, s) => x || s,\n    and: (x, s) => x && s,\n\n    // math\n    // eslint-disable-next-line eqeqeq\n    equals: (x, p) => x == p,\n    greater: (x, p) => x > p,\n    less: (x, p) => x < p,\n    plus: (x, alt) => (+x) + (+alt),\n    minus: (x, alt) => (+x) - (+alt),\n    multiply: (x, alt) => (+x) * (+alt),\n    compose: (...ff) => x0 => ff.reduceRight((x, f) => f(x), x0),\n    swap: f => (a, b) => f(b, a),\n    curry: (() => {\n        const _curry = (fn, args0, lengthLimit) => {\n            const fx = (args) => args.length >= lengthLimit ?\n                fn(...args) :\n                _curry(fn, args, lengthLimit - args.length);\n\n            return (...args) => fx([...args0, ...args]);\n        };\n        return (f, ...args) => _curry(f, args, f.length);\n    })(),\n    /* Simple GUID generator. */\n    guid: (s4 => () => `${s4()}${s4()}-${s4()}-${s4()}-${s4()}-${s4()}${s4()}${s4()}`)\n        (() => Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1)),\n    /* Simple hash function. */\n    hash: function (s) {\n        let a = 1, c = 0, h, o;\n        if (s) {\n            a = 0;\n            /* jshint plusplus:false bitwise:false */\n            for (h = s.length - 1; h >= 0; h--) {\n                o = s.charCodeAt(h);\n                a = (a << 6 & 268435455) + o + (o << 14);\n                c = a & 266338304;\n                a = c !== 0 ? a ^ c >> 21 : a;\n            }\n        }\n        return String(a);\n    }\n})","import './obj.js'\nimport './str.js'\nimport './arr.js'\nimport './fn.js'\nimport './date.js'\n\n// useful pipes\nexport const pipes = {\n  ...Function,\n  str: String,\n  arr: Array,\n  obj: Object,\n  date: Object.assign((s, format) => Date.format(s, format), Date)\n}","Object.EMPTY = Object.freeze({});\n\n/**\n * Checks if argument is empty .\n */\nObject.isEmpty = (x) => {\n    if (!x) {\n        return true;\n    }\n    if (x instanceof Object) {\n        // (zero-length array)\n        if (Array.isArray(x)) {\n            return x.length === 0;\n        }\n        // (zero-size map)\n        if (x instanceof Map) {\n            return x.size === 0;\n        }\n        // (has no props)\n        return Object.keys(x).length === 0;\n    }\n    return false;\n};\n\n/**\n * Digs value in a given object structure by a given path.\n *\n * @param {*} o source object\n * @param {*} steps path\n * @param {*} def default value\n */\nObject.dig = (o, steps) => steps.split('.').reduce((r, e) => r ? r[e] : undefined, o);\n\nObject.dot = (x, k) => x ? x[k] : null\n\nconst VALUE_MAP = {\n  true: true,\n  false: false,\n  undefined\n};\n\nObject.decode = (val) => {\n  const value = decodeURIComponent(val);\n  if ('{['.indexOf(value[0]) > -1) {\n    return JSON.parse(value);\n  }\n  const num = +value;\n  if (value.length <= 17 && !isNaN(num)) {\n    return num;\n  }\n  return VALUE_MAP[value] || value;\n}\n\nObject.encode = (value) => {\n  return encodeURIComponent((typeof value === 'object') ? JSON.stringify(value) : `${value}`);\n}\n\n/**\n * Parses string into URL object like `{type, target, path, params, data }`.\n *\n * @param {string} s string in format: `type:target/path?params#data`\n * @param {object} r optional target object\n * @returns URL object \n */\nObject.urlParse = function (s, r = {}) {\n  if (!s) {\n    return { path: [], params: {}, target: '', ...r };\n  }\n  if (typeof s === 'object') {\n    return { path: [], params: {}, target: '', ...r, ...s };\n  }\n  let p;\n  // extract type:\n  p = s.indexOf(':');\n  if (p > -1) {\n    r.type = s.slice(0, p);\n    s = s.slice(p + 1);\n  }\n  // extract data:\n  p = s.indexOf('#');\n  if (p > -1) {\n    r.data = Object.decode(s.slice(p + 1));\n    s = s.slice(0, p);\n  }\n  // extract query params:\n  p = s.indexOf('?');\n  r.params = r.params || {};\n  if (p > -1) {\n    for (let param of s.slice(p + 1).split('&')) {\n      let [key, value] = param.split('=');\n      if (value) {\n        r.params[key] = Object.decode(value);\n      }\n    }\n    s = s.slice(0, p);\n  }\n  // target and path:\n  let path = r.path = s.split('/').map(decodeURIComponent);\n  while (path.length && !r.target) {\n    r.target = path.shift();\n  }\n  return r;\n}\n\n/**\n*  Represents an URL object as a string\n*\n* @param {object} r URL object like `{type, target, path, params, data }`\n* @returns string in format `type://target/path?params#data`\n*/\nObject.urlStringify = function (r) {\n  let result = '';\n  if (!r) {\n    return result;\n  }\n  if (typeof r === 'string') {\n    return r;\n  }\n  if (r.target) {\n    if (r.type) {\n      result += `${r.type}://`;\n    }\n    result += r.target;\n  }\n  if (r.path) {\n    result += `/${Array.isArray(r.path) ? r.path.map(encodeURIComponent).join('/') : r.path}`;\n  }\n  const params = r.params;\n  if (params) {\n    const keys = Object.keys(params).filter(key => (params[key] != null));\n    if (keys.length) {\n      result += `?${keys.map(key => (`${key}=${Object.encode(params[key])}`)).join('&')}`;\n    }\n  }\n  if (r.data) {\n    result += `#${Object.encode(r.data)}`;\n  }\n  return result;\n}\n\n","\nfunction capitalize(x) {\n    if (!x) {\n        return x;\n    }\n    const s = `${x}`;\n\n    return s[0].toUpperCase() + s.slice(1);\n}\nfunction camelize(s, sep = '_') {\n    return ((s && s.length && s.split(sep).map((t, i) => (i ? capitalize(t) : t)).join('')) || ``)\n}\n\n/**\n * Formats given string template with params.\n *\n * Template should contain placeholders like `{someKey}`,\n * which will be replaced with value by key from params.\n *\n * @param {string} template string template\n * @param {object} params hash with parameters\n */\nString.format = (template, params) => {\n    return `${template || ''}`.replace(/\\{([\\S]+)\\}/i, (_, key) => ((params && params[key]) != null) ? params[key] : '');\n};\nString.wrap = (x, template) => {\n    return !x ? '' : `${template || '*'}`.replace('*', x);\n};\n\nString.tail = (x, sep = '.') => {\n    if (!x) {\n        return '';\n    }\n    const pos = x.lastIndexOf(sep);\n\n    return pos === -1 ? x : x.slice(pos + sep.length);\n};\n\nString.lastTail = (key, sep = '.') => ('' + key).split(sep).slice(-1)[0];\n\nString.head = (x, sep = '.') => {\n    if (!x) {\n        return '';\n    }\n    const pos = x.indexOf(sep);\n\n    return pos === -1 ? x : x.slice(0, pos);\n};\n\nString.pad = (x, size = 2, fill = '0') => {\n    let s = String(x);\n    while (s.length < (size)) { s = `${fill}${s}`; }\n    return s;\n};\nString.capitalize = capitalize;\nString.camelize = camelize;\nString.mirror = (x) => (x || '').split('').reduce((r, c) => (c + r), '');\nString.snakeCase = (x) => (x || '').replace(/([a-z])([A-Z])/g, '$1_$2');\nString.proper = (s) => capitalize(camelize(s));\nString.upper = s => ('' + s).toUpperCase();","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n"],"sourceRoot":""}